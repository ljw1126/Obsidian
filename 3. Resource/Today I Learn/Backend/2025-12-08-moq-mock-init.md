# π“ μ¤λ λ°°μ΄ κ²ƒ (Today I Learned) 
## λ‚ μ§ 
`2025λ…„ 12μ›” 06μΌ`

## μΉ΄ν…κ³ λ¦¬
`#CSharp`, `#xUnit`, `#Moq`

## μ£Όμ : 
### 1. λ¬Έμ  μƒν™© λλ” ν•™μµ λ°°κ²½
- EventGridTriggerμ λΉ„μ¦λ‹μ¤ λ΅μ§μ„ λ‹΄λ‹Ήν•λ” μ„λΉ„μ¤ λ μ΄μ–΄μ Mock κΈ°λ° λ‹¨μ„ ν…μ¤νΈλ¥Ό μ§„ν–‰
- μΈν„°νμ΄μ¤λ¥Ό μ •μν•μ§€ μ•κ³  μ„λΉ„μ¤/λ νμ§€ν† λ¦¬ κµ¬ν„μ²΄λ¥Ό λ°”λ΅ MockμΌλ΅ μ‚¬μ©ν•λ ¤κ³  ν–λ”λ° Mock μ΄κΈ°ν™” μμ™Έ λ°μƒ
### 2. ν•µμ‹¬ λ‚΄μ© / κ°λ… μ •λ¦¬
#### 2-1. Mock μ΄κΈ°ν™”μ‹ μΈν„°νμ΄μ¤λ” ν•„μμ 
λ‹·λ„· μ§„μμ λ€ν‘μ μΈ Mocking λΌμ΄λΈλ¬λ¦¬μΈ **Moq**λ¥Ό μ‚¬μ©ν•  λ•λ” **κµ¬ν„μ²΄ ν΄λμ¤(Concrete Class) λ€μ‹  λ°λ“μ‹ μΈν„°νμ΄μ¤(Interface)λ¥Ό μ‚¬μ©**ν•λ” κ²ƒμ΄ μ›μΉ™μ΄λ‹¤.

```cs
Mock<ImageResizeService> _mockImageResizeService = new Mock<ImageResizeService>(); // π’©

Mock<IImageResizeService> _mockImageResizeService = new Mock<IImageResizeService>(); // β…
```
- **μΈν„°νμ΄μ¤ Mocking:** `Moq`λ” μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν”„λ΅μ‹ κ°μ²΄λ¥Ό λ™μ μΌλ΅ μƒμ„±ν•©λ‹λ‹¤. μΈν„°νμ΄μ¤λ” μƒμ„±μκ°€ μ—†μΌλ―€λ΅ ν”„λ΅μ‹ μƒμ„±μ— λ¬Έμ κ°€ μ—†μ
- **κµ¬ν„μ²΄ Mocking λ¬Έμ :** `Moq`κ°€ μΌλ° ν΄λμ¤(κµ¬ν„μ²΄)λ¥Ό Mockingν•λ ¤λ©΄ ν•΄λ‹Ή ν΄λμ¤λ¥Ό μƒμ†ν•λ” ν”„λ΅μ‹λ¥Ό λ§λ“¤μ–΄μ•Ό ν•©λ‹λ‹¤. μ΄ κ³Όμ •μ—μ„ **ν΄λμ¤μ μƒμ„±μλ¥Ό νΈμ¶**ν•΄μ•Ό ν•λ”λ°, λ§μ•½ ν΄λμ¤μ— **λ§¤κ°λ³€μ μ—†λ” κΈ°λ³Έ μƒμ„±μ**κ°€ μ—†λ‹¤λ©΄ `Moq`λ” μΈμ¤ν„΄μ¤ν™”μ— μ‹¤ν¨ν•κ³  μ—λ¬(`Could not find a parameterless constructor`)λ¥Ό λ°μƒμ‹ν‚΄

β… λ”°λΌμ„, **ν…μ¤νΈ μ©μ΄μ„±**κ³Ό **λμ¨ν• κ²°ν•©**μ„ μ„ν•΄ μ„λΉ„μ¤λ‚ μ €μ¥μ†μ™€ κ°™μ€ μμ΅΄μ„± κ°μ²΄λ” λ°λ“μ‹ **μΈν„°νμ΄μ¤ κΈ°λ°μΌλ΅ μ„¤κ³„**ν•΄μ•Ό ν•©λ‹λ‹¤.

#### 2-2. Moqμ κΈ°λ³Έκ°’ 
`Moq`λ” `Setup`μ„ ν†µν•΄ λ…μ‹μ μΌλ΅ ν–‰μ„λ¥Ό μ •μν•μ§€ μ•μ•μ„ λ•λ„, ν•΄λ‹Ή λ©”μ„λ“λ‚ μ†μ„±μ **λ°ν™ νƒ€μ…μ— λ§λ” κΈ°λ³Έκ°’μ„ μλ™μΌλ΅ μ κ³µ**ν•¨. μ΄λ¥Ό ν†µν•΄ ν…μ¤νΈμ—μ„ μμƒμΉ λ»ν• `NullReferenceException`μ΄ λ°μƒν•λ” κ²ƒμ„ λ°©μ§€ν•¨

|**λ°ν™ νƒ€μ…**|**κΈ°λ³Έ λ™μ‘**|
|---|---|
|**κ°’ ν•μ‹** (`int`, `bool`, `DateTime` λ“±)|ν•΄λ‹Ή νƒ€μ…μ κΈ°λ³Έκ°’ (`0`, `false`, `default(DateTime)`)μ„ λ°ν™ν•©λ‹λ‹¤.|
|**μ°Έμ΅° ν•μ‹** (`string`, `class`, `interface` λ“±)|`null`μ„ λ°ν™ν•©λ‹λ‹¤.|
|**`void` λ©”μ„λ“**|μ•„λ¬΄κ²ƒλ„ ν•μ§€ μ•κ³  (Do Nothing) **μ •μƒ μΆ…λ£**λ©λ‹λ‹¤.|
|**λΉ„λ™κΈ° λ©”μ„λ“** (`Task`, `Task<T>`)|μ¦‰μ‹ μ™„λ£λ Task (`Task.CompletedTask`) λλ” Taskμ κΈ°λ³Έκ°’ (`Task.FromResult(default(T))`)μ„ λ°ν™ν•©λ‹λ‹¤.|