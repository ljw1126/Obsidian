
- [ìœ íŠœë¸Œ](https://www.youtube.com/watch?v=60lLSe1phks&list=PLeQ0NTYUDTmMM71Jn1scbEYdLFHz5ZqFA&index=2)
- [ë°œí‘œìë£Œ](https://github.com/msbaek/clean-coders-2013)

**âœ… ë‚¨ì€ ê°•ì˜**
- 22 ~ 26 TDD 
- 31. Presenting TDD
- 33. Vertical Slice ë°©ì‹ìœ¼ë¡œ GrpahQL ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ TDDë¡œ êµ¬í˜„í•˜ê¸°


## ì„¹ì…˜1. í´ë¦° ì½”ë”ìŠ¤

### 2. ì†Œê°œ ë° OOP
ì ˆì°¨ì§€í–¥ vs ê°ì²´ì§€í–¥
ìº¡ìŠí™” 
ë‹¤í˜•ì„±

>[!note] ì°½í”¼í•¨ì„ ì´ê¸°ê³  ëª¨ë¥´ëŠ” ê²ƒì„ ì§ˆë¬¸ í–ˆì„ ë•Œ ì„±ì¥ì„ í•  ê¸°íšŒê°€ ìˆë‹¤

### 3. OOP part 2

ì ˆì ì§€í–¥ì˜ í•œê³„ 
- ìš”êµ¬ì‚¬í•­ì˜ ë³€ê²½ì´ ë°ì´í„° êµ¬ì¡° ë³€ê²½ ìœ ë°œ 
- ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì½”ë“œì˜ ìˆ˜ì • ìœ ë°œ(Client, Test)

âœ¨ ìº¡ìŠí™”ë¥¼ í•˜ëŠ” ê²½ìš°
- ì ˆì°¨ ì§€í–¥ì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ ë³€ê²½ì˜ ì˜í–¥ì´ ì ë‹¤
- êµ¬í˜„ ë³€ê²½ì˜ ìœ ì—°í•¨ì´ ìˆì–´, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜í–¥ ì•ˆ ë¯¸ì¹¨

> [!note] Tell, Don't Ask
> - ë°ì´í„°ë¥¼ ìš”ì²­í•´ì„œ ë³€ê²½í•˜ê³ , ì €ì¥í•˜ë¼ê³  í•˜ì§€ë§ˆë¼
> - ë¬´ìŠ¨ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ë¼
> - ë°ì´í„°ë¥¼ ì˜ ì•Œê³  ìˆëŠ” ê°ì²´ì—ê²Œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ë¼ê³  í•˜ë¼
> - Encapsulationì´ ìœ ì§€ë˜ì–´ ë³€ê²½ì— ì˜í–¥ì„ ì•ˆ ë°›ê²Œ ë¨  


Composition(í•©ì„±) / Delegation(ìœ„ì„)
- ì „ëµ íŒ¨í„´ê³¼ë„ ì—°ê´€ 
	- í•©ì„±ê³¼ ìœ„ì„ì€ ë‹¤ë¥´ì§€ ì•Šë‚˜
	- Composition íŒ¨í„´ì´ ìˆê³ , ìœ„ì„ì€ ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ êµ¬í˜„ì²´ë¥¼ ë°”ê¿”ê°€ëŠ” .. ë‹¤í˜•ì„±ì„ í™œìš©í•œ ê¸°ë²•ì´ê³  

ë‹¤í˜•ì„± + Composition í†µí•´
- ìœ ì—°ì„± ì¦ëŒ€(ë³€ê²½ ìš©ì´)
- í…ŒìŠ¤íŠ¸ ìš©ì´
- TDD ìš©ì´
- ì¸í„°í˜ì´ìŠ¤ì˜ ì¤‘ìš”ì„± ì²´ê°

> ì˜ˆì œ ì½”ë“œê°€ ì‹¬í”Œí•˜ë‹¤. 3ê°œ ì¸ë° ìº¡ìŠí™”ì™€ ë‹¤í˜•ì„±ì„ í™œìš©í•œ ì „ëµ íŒ¨í„´(ìœ„ì„)ì— ëŒ€í•´ ê°€ë³ê²Œ í•˜ê³  ë„˜ì–´ê°


### 4. Function âœ¨ 
> í•¨ìˆ˜ëŠ” í•œ ê°€ì§€ ì¼ë§Œ í•´ì•¼ í•œë‹¤ 


// ë¦¬íŒ©í„°ë§ ë„ì„œì—ì„œ í•¨ìˆ˜ ì¡°ì°¨ SRPê°€ ì ìš©ë˜ì—ˆë˜ê²Œ ê¸°ì–µë‚¨

**The First Rule of Functions** 
- í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‘ì•„ì§ˆ ìˆ˜ ì—†ì„ ë§Œí¼ ì‘ì•„ì•¼ í•œë‹¤
- í° í•¨ìˆ˜ë¥¼ ë³´ë©´ í´ë˜ìŠ¤ë¡œ ì¶”ì¶œí•  ìƒê°ì„ í•´ì•¼í•¨
- í´ë˜ìŠ¤ëŠ” ì¼ë ¨ì˜ ã…‚ë…€ìˆ˜ë“¤ì— ë™ì‘í•˜ëŠ” ê¸°ëŠ¥ì˜ ì§‘í•©

> ë§ˆí‹´ íŒŒìš¸ëŸ¬ Extract Method Object 


> [!todo] ì˜ˆì œ ê¼­ ë¦¬íŒ©í„°ë§ í•´ë³´ê¸°
> [ì˜ˆì œ ì €ì¥ì†Œ](https://github.com/msbaek/fitness-example) 


>[!note] org.fitness ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë‹¤ìš´ë¡œë“œ ë˜ì§€ ì•Šì•„ì„œ ì§ì ‘ ì°¾ì•„ ë„£ì–´ì¤˜ì•¼ í•œë‹¤
>https://repo1.maven.org/maven2/org/fitnesse/fitnesse/20081201/

```java
public class FitnessExample {  
    public String testableHtml(PageData pageData, boolean includeSuiteSetup) throws Exception {  
        WikiPage wikiPage = pageData.getWikiPage();  
        StringBuffer buffer = new StringBuffer();  
  
        if (pageData.hasAttribute("Test")) {  
            if (includeSuiteSetup) {  
                WikiPage suiteSetup = PageCrawlerImpl.getInheritedPage(SuiteResponder.SUITE_SETUP_NAME, wikiPage);  
                if (suiteSetup != null) {  
                    WikiPagePath pagePath = wikiPage.getPageCrawler().getFullPath(suiteSetup);  
                    String pagePathName = PathParser.render(pagePath);  
                    buffer.append("!include -setup .").append(pagePathName).append("\n");  
                }            }            WikiPage setup = PageCrawlerImpl.getInheritedPage("SetUp", wikiPage);  
            if (setup != null) {  
                WikiPagePath setupPath = wikiPage.getPageCrawler().getFullPath(setup);  
                String setupPathName = PathParser.render(setupPath);  
                buffer.append("!include -setup .").append(setupPathName).append("\n");  
            }        }  
        buffer.append(pageData.getContent());  
        if (pageData.hasAttribute("Test")) {  
            WikiPage teardown = PageCrawlerImpl.getInheritedPage("TearDown", wikiPage);  
            if (teardown != null) {  
                WikiPagePath tearDownPath = wikiPage.getPageCrawler().getFullPath(teardown);  
                String tearDownPathName = PathParser.render(tearDownPath);  
                buffer.append("!include -teardown .").append(tearDownPathName).append("\n");  
            }            if (includeSuiteSetup) {  
                WikiPage suiteTeardown = PageCrawlerImpl.getInheritedPage(SuiteResponder.SUITE_TEARDOWN_NAME, wikiPage);  
                if (suiteTeardown != null) {  
                    WikiPagePath pagePath = wikiPage.getPageCrawler().getFullPath(suiteTeardown);  
                    String pagePathName = PathParser.render(pagePath);  
                    buffer.append("!include -teardown .").append(pagePathName).append("\n");  
                }            }        }  
        pageData.setContent(buffer.toString());  
        return pageData.getHtml();  
    }          
}
```


ë§ˆì´í´ íŒ”ì €ìŠ¤ - ì›Œí‚¹ ì´í™ë¦¬ë¸”ë¦¬ ë ˆê±°ì‹œ ì½”ë“œ 
- ìºë¦­í„° ë¼ì´ì¦Œ í…ŒìŠ¤íŠ¸ ê¸°ë²• (?) : ë¬´ì¡°ê±´ ì‹¤í–‰í•´ì„œ ë§ë„ ì•ˆë˜ëŠ” ê°’ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë¹„êµ

1.í•„ë“œ ì¶”ì¶œ
`class field variable`ë¡œ ì˜®ê²¨ì„œ ìƒì„±ì ì´ˆê¸°í™”í•˜ê²Œ ë˜ë©´ 
- í•¨ìˆ˜ê°€ ì¶”ì¶œë ë•Œ ë‹¬ê³  ë‹¤ë‹ í•„ìš”ê°€ ì—†ì–´ì§
	- í•¨ìˆ˜ëŠ” ì‘ì€ ê°œìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì ¸ì•¼ í•œë‹¤ (**ì¡°ê±´ ì¶©ì¡±**)
	- ì¶”ì¶œí•˜ë ¤ëŠ” ì½”ë“œ ë¸”ë½ì´ ë‘ ê°œì´ìƒì˜ ë³€ìˆ˜ì— ë³€ê²½ì„ ê°€í•˜ë©´ í•¨ìˆ˜ ì¶”ì¶œ ë¦¬íŒ©í„°ë§ì„ ëª»í•¨ (ì´ë•Œ ìœ ìš©)

2.ë³€ìˆ˜ì¶”ì¶œ 
- ì„œë¡œ ë‹¤ë¥¸ ë¬¸ìì—´ì´ë‚˜ ë³€ìˆ˜ ê°’ë§Œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° 
	- ë³€ìˆ˜ ì¶”ì¶œ í›„ ë©”ì„œë“œ ì¶”ì¶œ

3.ë¼ì¸ ì´ë™ ë¦¬íŒ©í„°ë§í•˜ì—¬ ë³€ìˆ˜ë¥¼ ì˜¬ë¦¼
- ë˜‘ê°™ì€ ë¡œì§ ë¶€ë¶„ì„ ë©”ì†Œë“œ ì¶”ì¶œ

> ì„œë¡œ ë‹¤ë¥¸ ë¶€ë¶„ì€ ë³€ìˆ˜ë¡œ ì¶”ì¶œ 

4.ë³€ìˆ˜ ì¸ë¼ì¸í•˜ê¸°
- ë©”ì„œë“œì— ì¸ìì— ë„£ê³ , ë³€ìˆ˜ ì§€ìš°ê¸°

> ê°•ì˜ìë£Œì— ë¦¬íŒ©í„°ë§ ê²°ê³¼ ìˆìŒ ğŸ™Œ


ë¦¬íŒ©í„°ë§ íš¨ê³¼ 
- ê°€ë…ì„± í–¥ìƒ 
- ì´í•´í•˜ê¸° ì‰¬ì›Œì§€ê³  í•¨ìˆ˜ê°€ ìì‹ ì˜ ì˜ë„ë¥¼ ì˜ ì „ë‹¬

ê°œì„ ì˜ ì›ì¸
- 1. í•¨ìˆ˜ê°€ ì‘ì•„ì§(Small)
	- í•¨ìˆ˜ì˜ ì²«ë²ˆì§¸ ê·œì¹™
		- `í•¨ìˆ˜ëŠ” ì‘ì•„ì§ˆ ìˆ˜ ìˆëŠ” í•œ ìµœëŒ€í•œ ì‘ì•„ì•¼ í•œë‹¤`
- 2. ë¸”ë¡ì´ ì ì–´ì•¼ í•¨
	- if, else, while ë¬¸ì¥ ë“±ì˜ ë‚´ë¶€ ë¸”ë¡ì€ í•œì¤„ì´ì–´ì•¼ í•¨
	- ê´„í˜¸ê°€ try/catch ë§ê³ ëŠ” ì—†ì–´ì•¼ í•¨ (ìµœëŒ€í•œ)
- 3. Indentingì´ ì ì–´ì•¼ í•œë‹¤
	- í•¨ìˆ˜ëŠ” ì¤‘ì²© êµ¬ì¡°ë¥¼ ê°–ì„ ë§Œí¼ í¬ë©´ ì•ˆëœë‹¤
	- ë“¤ì—¬ì“°ê¸°ëŠ” í•œ ë‘ ë‹¨ê³„ ì •ë„ë§Œ 
		- ê°ì²´ ì§€í–¥ ìƒí™œ ì²´ì¡° ì›ì¹™ì´ ìƒê°ë‚˜ë„¤ 
			- **í† ë¹„ë‹˜ ê¸€ ì°¾ì•„ë³´ì** 

ë¦¬íŒ©í„°ë§ ì „ì˜ ê²½ìš° í•˜ë‚˜ì˜ í•¨ìˆ˜ì—ì„œ ì—¬ëŸ¬ ì¼ì„ í•¨ 
- creating buffers 
- fetching pages
- searching for in herited pages
- rendering paths 
- appending arcane strings
- including setups and teardowns into test pages

ë¦¬íŒ©í„°ë§ í›„ 
- í˜ì´ì§€ê°€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì¸ê°€?
	- ë§ë‹¤ë©´ setups, teardownsë¥¼ include í•œ í›„
	- HTML í˜ì´ì§€ë¡œ ì „ë‹¬

> ê²°ê³¼ë¬¼ì´ 3ê°€ì§€ ì¼ì„ í•˜ê³  ìˆëŠ”ê±° ì•„ë‹Œê°€?
- **ë©”ì„œë“œ ì´ë¦„ ì¶”ìƒí™”** 
	- ì¶”ìƒí™”ë¥¼ í•œ ë‹¨ê³„ ë†’ì„ 
- í•¨ìˆ˜ì˜ ê° ìŠ¤í…ë“¤ì€ í•¨ìˆ˜ ì´ë¦„ë³´ë‹¤ í•œìˆ˜ì¤€ ë‚®ì€ ì¶”ìƒí™” ìˆ˜ì¤€ì„ ê°–ëŠ”ë‹¤ 
- ì´ ì˜ˆì œëŠ” ì™„ì „í•œ ì˜ˆì œê°€ ì•„ë‹ˆë¼ ì—¬ê¸°ì„œ ì¢…ë£Œ 
	- ì‹¤ì œ ì˜ˆì œë¥¼ ì°¾ì•„ë³´ë©´ ì˜ ë˜ì–´ ìˆë‹¤í•˜ëŠ”ë° .. (`ì°¾ì•„ë³´ì`)

> [!tip] í•¨ìˆ˜ì˜ ê° ìŠ¤í…ë“¤ì´ í•¨ìˆ˜ ì´ë¦„ì´ ê°–ëŠ” ì¶”ìƒí™” ìˆ˜ì¤€ë³´ë‹¤ í•œ ë‹¨ê³„ ë‚®ì€ ê²ƒìœ¼ë¡œë§Œ ì´ë¤„ì¡Œë‹¤ë©´ í•¨ìˆ˜ëŠ” í•œê°€ì§€ ì¼ë§Œ í•˜ëŠ” ê²ƒ


>[!note] ì¶”ìƒí™” ìˆ˜ì¤€ì´ ë³€í•˜ì§€ ì•ŠëŠ” ìˆ˜ì¤€ê¹Œì§€ ë©”ì†Œë“œ ì¶”ì¶œí•˜ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ì¶”ìƒí™” ìˆ˜ì¤€ì´ ê°™ì€ ë©”ì†Œë“œê°€ ë§Œë“¤ì–´ì§„ë‹¤ 


ì˜ˆ. ì•„ë˜ì™€ ê°™ì´ í•¨ìˆ˜ë¥¼ ë©”ì†Œë“œ ì¶”ì¶œí•˜ì—¬ ì¶”ìƒí™”í•´ë³¸ë‹¤
- To include the setups and tear downs 
	- include setups
		- To include the setups 
			- include the suite setup if this is a suite
				- to include the suite setup
					- search the parent hiearchy for the "SuiteSetUp" page
					- add and include with the path of that page
			- then include the regular setup 
	- then include the test page content
	- then include the teardowns

ëìŠ¤ë³„ë¡œ ê°™ì€ ì¶”ìƒí™”

<u>í° í•¨ìˆ˜ëŠ” ì‹¤ì œë¡œëŠ” í´ë˜ìŠ¤ê°€ ìˆ¨ì–´ ìˆëŠ” ê³³</u>
- ë³€ìˆ˜ì™€ ì¸ìë¡œ êµ¬ì„± (=í•„ë“œ)
	- ì´ë¥¼ ê°€ì§€ê³  í†µì‹ í•˜ëŠ” ê¸°ëŠ¥ ë¸”ë½ì„ ê°€ì§ (=ë©”ì„œë“œ)
- ë“¤ì—¬ì“°ê¸°ì— ì¡´ì¬í•˜ê³ , ë³€ìˆ˜ë“¤ì„ ì‚¬ìš©í•´ì„œ í†µì‹ í•˜ëŠ” ê¸°ëŠ¥ë“¤ì˜ ì§‘í•©
- í•­ìƒ í•˜ë‚˜ ì´ìƒì˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤

---
### 5. Function part2
- [Prime Number ë¦¬íŒ©í„°ë§ ì˜ˆì œ](https://github.com/msbaek/print-prime)
	- master ë¸Œëœì¹˜ëŠ” ë¦¬íŒ©í„°ë§ ê²°ê³¼ ë¸Œëœì¹˜
	- ì§ì ‘ í•´ë³´ëŠ” ë¸Œëœì¹˜ëŠ” ë”°ë¡œ ìˆìŒ

> [!tip] ì•„ëŠ” ê²ƒê³¼ í•„ìš”í•  ë•Œ ì‚¬ìš©í•  ì¤„ ì•„ëŠ” ê²ƒì€ ë‹¤ë¥´ë‹¤. ì—°ìŠµì„ ë§ì´ í•´ì•¼ í•„ìš”í•  ë•Œ ìì—°ìŠ¤ëŸ½ê²Œ ë‚˜ì˜¬ ìˆ˜ ìˆë‹¤.


**PrintPrimeTest**
- (íŠ¹ì´í•˜ë„¤)íŒŒì¼ë¡œ ì“°ê³  ì½ì–´ì™€ì„œ ë¹„êµí•˜ëŠ” í˜•íƒœ


- ë³€ìˆ˜ ìƒ‰ê¹”ë§Œ ë³´ê³  í•œ êµ°ë°ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë¡œì»¬ ë³€ìˆ˜ë‚˜ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ê²Œ ë‚˜ì„ ìˆ˜ ìˆë‹¤ 
	- ë©”ì„œë“œ ë‚´ìš©ì´ NumberPrintë¼ëŠ” í´ë˜ìŠ¤ë¡œ ë°”ê»´ì§ âœ¨
- ì¸ë¼ì¸, í´ë˜ìŠ¤ ë¦¬ë„¤ì´ë°

> ë¦¬íŒ©í„°ë§ í›„ ì „ì²´ ë¼ì¸ìˆ˜ëŠ” ì¦ê°€í•˜ì§€ë§Œ ë³µì¡ë„ëŠ” ì¤„ì–´ë“¦ â¡ï¸ ì¡°ê±´ë¬¸ì´ ê¹Šì–´ì§ˆìˆ˜ë¡ ë³µì¡ë„ ì¦ê°€


PrintPrimeì´ ì²˜ìŒì—ëŠ” one big function êµ¬ì¡° ì˜€ë‹¤
- ë¦¬íŒ©í„°ë§ í›„ Three little classesë¡œ ë¶„ë¦¬ë¨ìœ¼ë¡œì¨ ë³µì¡ë„ê°€ ë‚®ì•„ì§

**í° í•¨ìˆ˜ë¥¼ ì‘ì€ í•¨ìˆ˜ë“¤ë¡œ ìª¼ê°¤ë•Œ í¥ë¯¸ë¡œìš´ ì¼ì„ ìˆ˜í–‰** ğŸ‘€
- í•¨ìˆ˜ë¥¼ ì„œë¡œ ë‹¤ë¥¸ ì¶”ìƒí™” ë ˆë²¨ë¡œ ë¶„ë¦¬ 
	- í•¨ìˆ˜ê°€ í•˜ë‚˜ ì´ìƒì˜ ì¶”ìƒí™” ë ˆë²¨ì„ ë‹¤ë£¨ë©´ ì´ í•¨ìˆ˜ëŠ” í•œ ê°€ì§€ ì´ìƒì˜ ì¼ì„ í•˜ëŠ” ê²ƒ
		- `fitness` ì˜ˆì œ ì—ì„œ
		- StringBuffer, parse, pageCrawlerì€ low level detail of implementation
		- ë°˜ë©´ testablePage, inheritedPage ë“±ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ê°œë…ìœ¼ë¡œ high level of abstraction 
		- í•˜ë‚˜ì˜ í•¨ìˆ˜ê°€ 2ê°€ì§€ ê°œë…ë“¤ì„ ëª¨ë‘ ë‹¤ë£¨ëŠ” ê²ƒì„ ì›ì¹˜ ì•ŠëŠ”ë‹¤
		- ì„œë¡œ ë‹¤ë¥¸ ì¶”ìƒí™” ë ˆë²¨ì„ ì„œë¡œ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ë¶„ë¦¬
		- í•¨ìˆ˜ê°€ í•œ ê°€ì§€ ì¼ë§Œ í•˜ê¸° ìœ„í•´ì„œëŠ” ì¶”ìƒí™” ë ˆë²¨ì˜ ê²½ê³„ë¥¼ ë„˜ì§€ ë§ì•„ì•¼ í•œë‹¤ 
> í•¨ìˆ˜ ë ˆë²¨ì—ì„œ ì¶”ìƒí™” ë‹¨ê³„ë¥¼ ë¶„ë¦¬í•œë‹¤ëŠ”ê²Œ ì•„ì§ê¹Œì§€ ì™€ë‹¿ì§€ ì•ŠìŒ (6/2)

í•˜ì§€ë§Œ ì¶”ìƒí™” ë ˆë²¨ì€ ë¶ˆë¶„ëª…(fuzzy)í•˜ë‹¤

>[!tip] Extract Till you Drop
>- í•¨ìˆ˜ê°€ í•œê°€ì§€ ì¼ë§Œ í•˜ëŠ”ì§€ ì–´ë–»ê²Œ í™•ì‹¤í•  ìˆ˜ ìˆëŠ”ê°€?
>- ë” ì´ìƒ extractí•  ìˆ˜ ì—†ì„ ë•Œê¹Œì§€ extract í•˜ë¼
>- extractí•  ì½”ë“œë¥¼ ê°€ì§„ í•¨ìˆ˜ëŠ” í•œê°€ì§€ ì´ìƒì˜ ì¼ì„ í•˜ëŠ” ê²ƒì´ë‹¤
>- 4ì¤„ ì´ë‚´ì˜ í•¨ìˆ˜ë“¤ë¡œë§Œ êµ¬ì„±ëœ í´ë˜ìŠ¤ (ë¶„ë¦¬ ê°€ëŠ¥)
>- if, while ë¬¸ ë“±ì—ì„œ {} ë¸”ë¡ì´ ë³´ì´ë©´ extract ëŒ€ìƒ
>- {} ë¸”ë¡ì€ extractí•  ê¸°íšŒì´ë‹¤ !


**10. conclusion**
- 1st rule : `function should be small`
- 2nd rule  : `smaller than that`
- ì´ë¦„ì„ ì˜ ì§€ìœ¼ë©´ ëª¨ë‘ì˜ ì‹œê°„ì„ ì ˆì•½ ê°€ëŠ¥
	- ë„¤ë¹„ê²Œì´ì…˜/ì´ì •í‘œ ì—­í• ì„ í•˜ê¸° ë•Œë¬¸
- í•¨ìˆ˜ë¥¼ ì‘ê²Œ ë§Œë“¤ë©´ ëª¨ë‘ì˜ ì‹œê°„ì„ ì ˆì•½ ê°€ëŠ¥ (ê²½ìš°ì— ë”°ë¼ ì ˆì°¨ì ì¸ê²Œ ê°€ë…ì„±ì´ ë‚˜ì„ ìˆ˜ ìˆë‹¤)
- í´ë˜ìŠ¤ëŠ” í° í•¨ìˆ˜ë¥¼ ê°ì¶˜ë‹¤ (ğŸ‘€ **ì‹ í˜¸ì¸ë“¯**)
	- í•¨ìˆ˜ë¥¼ ì—¬ëŸ¬ í´ë˜ìŠ¤ë“¤ì— ì˜ ë°°ë¶„í•˜ë ¤ë©´ í•¨ìˆ˜ë¥¼ ì‘ê²Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤
- í•¨ìˆ˜ëŠ” í•œê°€ì§€ ì¼ë§Œ í•´ì•¼í•˜ê³ , í•œê°€ì§€ë§Œ í•˜ëŠ”ì§€ í™•ì‹ í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë°©ë²•ì€ `extract till you drop` ì´ë‹¤. 


> ë§¥ë¶ì—ì„œ control + t ëˆ„ë¥´ë©´ ê°€ëŠ¥í•œ ë¦¬íŒ©í„°ë§ í‘œì¶œí•´ì¤€ë‹¤ âœ¨

---
### 6. Function Structure
- [ê°•ì˜ ìë£Œ ì´ë¯¸ì§€](https://github.com/msbaek/clean-coders-2013/blob/master/3.Function%20Structure.png)


ì•„ë˜ì˜ ë‚´ìš©ì„ ì‚´í´ë³¸ë‹¤
1. Arguments
2. The Stepdown Rule
3. switches and cases
4. Temporal Coupling
5. CQS
6. Tell Don't Ask
7. Law of Demeter
8. early returns
9. error handling
10. Special Cases
11. Null is not an error
12. Null is a value
13. tryë„ í•˜ë‚˜ì˜ ì—­í• /ê¸°ëŠ¥ì´ë‹¤

**1. Arguments**
íŒŒë¼ë¯¸í„°ê°€ ë§ìœ¼ë©´ ê°€ë…ì„±ë„ ë–¨ì–´ì§€ê³ , ì‹¤ìˆ˜í•˜ê¸° ì¢‹ë‹¤ 
- ê°œì„  ë°©ë²•1. Java Bean Pattern
	- getter/setter ì‚¬ìš©
		- ì´ ê²½ìš° setterë¥¼ ëˆ„ë½í•˜ë©´ ë¶ˆì™„ì „í•œ ë¹ˆì„ ìƒì„± ê°€ëŠ¥ 
- ê°œì„  ë°©ë²•2. ë¹Œë” íŒ¨í„´ ì‚¬ìš© 

Boolean ì¸ì ì‚¬ìš© ê¸ˆì§€ 
- 2ê°€ì§€ ì´ìƒì˜ ì¼ì„ í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ê¸° ë•Œë¬¸ì— ì½ì–´ì•¼ í•¨ 
	- 2ê°œì˜ í•¨ìˆ˜ë¡œ ë¶„ë¦¬ ê³ ë ¤í•˜ê¸°

Innies not ou??
- output ì¸ìë¥¼ ì‚¬ìš©í•˜ì§€ ë§ë¼ 
- ArgumentëŠ” í•¨ìˆ˜ë¡œ ì „ë‹¬ë˜ëŠ” ê²ƒì´ì§€ í•¨ìˆ˜ë¡œë¶€í„° ë³€ê²½ë˜ì–´ ë‚˜ì˜¤ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•˜ì§€ ì•ŠìŒ

> íŒŒë¼ë¯¸í„°ë¡œ ë°›ì€ ì¸ìë¥¼ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë³€ê²½í•œ í›„ ë‹¤ì‹œ ë°˜í™˜í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤ ğŸ’© 


the null defense
- nullì„ ì „ë‹¬/ê¸°ëŒ€í•˜ëŠ” í•¨ìˆ˜ëŠ” ìˆìœ¼ë©´ ì•ˆ ëœë‹¤.ğŸ’©
	- booleanì„ ì „ë‹¬í•˜ëŠ” ë§Œí¼ ì˜ëª»ëœ ê²ƒì´ë‹¤ (nullì¸ ê²½ìš°ì™€ ì•„ë‹Œ ê²½ìš° í–‰ìœ„ë¥¼ êµ¬ë¶„í•´ì•¼ í•œë‹¤ğŸ’©)
	- ì´ ê²½ìš° 2ê°œì˜ í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ë§ë‹¤
- nullì„ pseudo booleanìœ¼ë¡œ ì“°ì§€ ë§ˆë¼
- defensive í”„ë¡œê·¸ë˜ë°ì„ ì§€ì–‘í•˜ë¼ âš ï¸
	- null, ì—ëŸ¬ ì²´í¬ë¡œ ì½”ë“œë¥¼ ë”ëŸ½íˆì§€ ë§ë¼ 
	- ì˜ëª»ë˜ì—ˆë‹¤ëŠ” ë‹¨ì„œë‹¤ (smellğŸ’©)
	- ì´ëŠ” ê³§ íŒ€ì›ì´ë‚˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ëª» ë¯¿ëŠ”ë‹¤ëŠ” ë§ 
	- null ì—¬ë¶€ë¥¼ ì§€ì†ì ìœ¼ë¡œ ì¡°ì‚¬í•  ê²ƒì´ ì•„ë‹ˆë¼ **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì—ì„œ ê²€ì¦**í•´ì•¼ í•œë‹¤
		- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì—ëŠ” **íšŒê·€ í…ŒìŠ¤íŠ¸ì˜ ëª©ì **ë„ ìˆë‹¤
- ë‹¨, public apiì˜ ê²½ìš° defensiveí•˜ê²Œ í”„ë¡œê·¸ë˜ë° í•´ì•¼ í•œë‹¤ğŸ™Œ


**2.The Stepdown Rule**

> ëª¨ë“  publicì€ ìœ„ì—, ëª¨ë“  privateëŠ” ì•„ë˜ì—
> public ë©”ì„œë“œë§Œ ë³´ê³ ë„ í´ë¼ì´ì–¸íŠ¸ê°€ ì´í•´ ê°€ëŠ¥í•˜ë‹¤ë¡
- public partë§Œ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•˜ë©´ ëœë‹¤
- ì¤‘ìš”í•œ ë¶€ë¶„(public)ì€ ìœ„ë¡œ ìƒì„¸í•œ ë¶€ë¶„(private)ì€ ë°‘ìœ¼ë¡œ 
- ì´ì 
	- í¸ì§‘ìë“¤ì€ ë§ˆì§€ë§‰ ë¶€ë¶„ì€ í•„ìˆ˜ì ì¸ ë‚´ìš© ì „ë‹¬ ì˜¤ë¥˜ ì—†ì´ ì œê±°í•  ìˆ˜ ìˆë‹¤
	- ë…ìë“¤ì€ ì œì¼ ìœ„ì—ì„œë¶€í„° ì½ê¸° ì‹œì‘í•´ì„œ ì§€ë£¨í•´ì§€ë©´ ê·¸ë§Œ ì½ìœ¼ë©´ ëœë‹¤
- backward reference ì—†ì´ top ì—ì„œ botton ìœ¼ë¡œ ì½ì„ ìˆ˜ ìˆê²Œ

> ë©”ì„œë“œì˜ ìˆœì„œë¥¼ ë§ì¶°ì£¼ëŠ” IDE ê¸°ëŠ¥ì´ ìˆë‹¤?? public private ë©”ì„œë“œ


**3. switches and cases (ì¤‘ìš”âœ¨)**
- ì™œ ìŠ¤ìœ„ì¹˜ ë¬¸ì¥ì„ êº¼ë¦¬ëŠ”ê°€?
	- ìŠ¤ìœ„ì¹˜ëŠ” ê°ì²´ì§€í–¥ìŠ¤ëŸ½ì§€ ì•Šë‹¤ëŠ” ë§Œì¡±ìŠ¤ëŸ¬ìš´ ëŒ€ë‹µì´ ì•„ë‹ˆë‹¤
- ê°ì²´ì§€í–¥ì˜ ê°€ì¥ í° ì´ì  ì¤‘ í•˜ë‚˜ëŠ” ì˜ì¡´ì„± ê´€ë¦¬ ëŠ¥ë ¥
	- DIP, ë‹¤í˜•ì„± ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ì²´ì™€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ì— ë‘ ìœ¼ë¡œì¨
		- ëŸ°íƒ€ì„ ì˜ì¡´ì„±ì€ ê·¸ëŒ€ë¡œ ë‘” ì±„ ì†ŒìŠ¤ ì½”ë“œì˜ ì˜ì¡´ì„±ì„ ì—­ì „ì‹œí‚´
			- ì†Œí¬ ì½”ë“œì˜ ì˜ì¡´ì„±ì´ a > b ì˜€ëŠ”ë° a > interfaceê°€ ë¨
	- ì¸í„°í˜ì´ìŠ¤ê°€ ì¤‘ìš”
		- TDDì—ì„œë„ ì¸í„°í˜ì´ìŠ¤ë§Œ ìˆìœ¼ë©´ êµ¬í˜„ì²´ ê³ ë ¤í•  í•„ìš” ì—†ìŒ
- ìŠ¤í”„ë§ì€ DIP êµ¬ì¡°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ ì§€ì›í•´ì£¼ê¸° ë•Œë¬¸ì— ì¢‹ë‹¤
	- ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— ë‹¨ìœ„í…ŒìŠ¤íŠ¸ ì‘ì„±í•˜ê¸°ë„ ì‰½ë‹¤
- ìŠ¤ìœ„ì¹˜ ë¬¸ì¥ì€ ë…ë¦½ì  ë°°í¬ì— ë°©í•´ê°€ ë¨
	- ê° case ë¬¸ì¥ì€ ì™¸ë¶€ ëª¨ë“ˆì— ì˜ì¡´ì„±ì„ ê°–ëŠ”ë‹¤
	- ë‹¤ìˆ˜ì˜ ë‹¤ë¥¸ ëª¨ë“ˆì— ì˜ì¡´ì„±ì„ ê°–ì„ ìˆ˜ ìˆë‹¤
		- ì´ê²ƒì€ `fan-out problem` ì´ë¼ê³  í•œë‹¤
	- êµ¬í˜„ì²´ì— ì§ì ‘ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— ë³€ê²½ì— ì·¨ì•½í•˜ë‹¤
	- switch ë¬¸ì¥ì—ì„œ ì†ŒìŠ¤ ì½”ë“œ ì˜ì¡´ì„±ì€ flow of controlê³¼ ë°©í–¥ì´ ê°™ë‹¤ 
		- ëª¨ë“  ì™¸ë¶€ ëª¨ë“ˆì— ì˜í–¥ì„ ë°›ëŠ”ë‹¤ 
		- ì™¸ë¶€ ëª¨ë“ˆ ì¤‘ í•˜ë‚˜ë¼ë„ ë³€ê²½ì´ ì¼ì–´ë‚˜ë©´ switch ë¬¸ì¥ì´ ì˜í–¥ ë°›ìŒ
		- ë…ë¦½ì  ë°°í¬ë¥¼ ë¶ˆê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ë§ì€ ì˜ì¡´ì„±ì„ ë§Œë“¦

ğŸ™Œ ìŠ¤ìœ„ì¹˜ ë¬¸ì¥ ì œê±° ì ˆì°¨ 
- ìŠ¤ìœ„ì¹˜ ë¬¸ì¥ì„ ë‹¤í˜•ì„± ì¸í„°í˜ì´ìŠ¤ í˜¸ì¶œë¡œ ë³€í™˜ 
- caseì— ìˆëŠ” ë¬¸ì¥ë“¤ì„ ë³„ë„ì˜ í´ë˜ìŠ¤ë¡œ ì¶”ì¶œí•˜ì—¬ ë³€ê²½ ì˜í–¥ì´ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•œë‹¤
- https://github.com/msbaek/videostore?tab=readme-ov-file

âœ¨ ì‹¤ìŠµ remove-switch-statement ë¸Œëœì¹˜
- https://github.com/msbaek/videostore/tree/remove-switch-stmt?tab=readme-ov-file

í›„ê¸°.
- ìš°ì„  í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ìƒìˆ˜ íƒ€ì… ëª…ì¹­ì— ë”°ë¼ Movie í•˜ìœ„ í´ë˜ìŠ¤ ìƒì„± (ìƒì†)
- íƒ€ì… ì½”ë“œë¥¼ ìƒì„±ìì—ì„œ ì§ì ‘ ì£¼ì… í•˜ë„ë¡ ë¦¬íŒ©í„°ë§
- Movie í´ë˜ìŠ¤ í•˜ìœ„ì— ìœ„ì¹˜í•œ ê³„ì‚° ë©”ì„œë“œ 2ê°œë¥¼ ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ ê°ì êµ¬í˜„í•˜ë„ë¡ ë¦¬íŒ©í„°ë§
	- ì¶”ìƒ ë©”ì„œë“œ ì„ ì–¸
- **ìƒì†ì„ í™œìš©í•´ switchë¬¸ì— ë‹¤í˜•ì„± ì ìš©í•˜ëŠ” ì‹¬í”Œí•œ ì˜ˆì œ**


---

### 7. Function Structure (Part. 2)
- [stack-example](https://github.com/msbaek/stack-example/tree/master)


**4. Temporal Coupling**
- open, closeë¥¼ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ê²½ìš°
	- ì‚¬ìš©ìê°€ ì‹¤ìˆ˜(ëˆ„ë½) ê°€ëŠ¥í•˜ë¯€ë¡œ ì•„ë˜ í…œí”Œë¦¿ì—ì„œ ë³€ê²½ ê°€ëŠ¥í•œ ë¶€ë¶„ì„ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¹¼ê³ , ë‚˜ë¨¸ì§€ ë¡œì§ì€ ë‚´ë¶€ì— ìº¡ìŠí™”
	- ğŸ¤” í…œí”Œë¦¿ ì½œë°± íŒ¨í„´ ê°™ë„¤

```java
class FileCommandTemplate {
	public void process(File file, FileCommand command) {
		file.open();
		command.process(file);
		file.close();
	}
}
```

**5. CQS**
- side effectë¥¼ ê´€ë¦¬í•˜ëŠ” ì¢‹ì€ ë°©ë²•
- ì‹œìŠ¤í…œì˜ ìƒíƒœ ë³€ê²½ ê°€ëŠ¥
- command
	- side effectë¥¼ ê°–ëŠ”ë‹¤
	- ì•„ë¬´ê²ƒë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ”ë‹¤
- query
	- side effectê°€ ì—†ë‹¤
	- ê³„ì‚°ê°’ì´ë‚˜ ì‹œìŠ¤í…œì˜ ìƒíƒœë¥¼ ë³€í™˜
- CQS ì •ì˜ 
	- ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ëŠ” ê°’ì„ ë°˜í™˜í•˜ë©´ ì•ˆëœë‹¤
	- ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ëŠ” ìƒíƒœë¥¼ ë³€ê²½í•˜ë©´ ì•ˆëœë‹¤
- `ë‹¹ì‹  ì½”ë“œì˜ ë…ìë“¤ì„ í˜¼ë€ìŠ¤ëŸ½ê²Œ í•˜ì§€ ë§ë¼`
	- ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ëŠ” ìƒíƒœë¥¼ ë³€ê²½í•˜ë©´ ì•ˆëœë‹¤
		- ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ëŠ” exceptionì„ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆì§€ë§Œ, ê°’ì„ ë°˜í™˜í•  ìˆ˜ëŠ” ì—†ë‹¤
		- ì´ê²ƒì€ ì•½ì†ì´ë‹¤
```java
// ğŸ’© ë¡œê·¸ì¸ì„ í•˜ë©´ user ì •ë³´ë¥¼ ì½ì–´ì•¼ í•¨
User u = authorizer.login(userName, password);

// âœ¨
authorizer.login(userName, password);
User u = authorizer.getUser(userName);
```

**6. Tell Don't Ask**
- extremeí•œ CQSëŠ” Cì™€ Që¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ì§€ ë§ë„ë¡ í•œë‹¤.

ìœ ì €ê°€ ë¡œê·¸ì¸í•œ ê±´ì§€ if ì¡°ê±´ë¬¸ ê²€ì¦ë³´ë‹¤ ì•„ë˜ì™€ ê°™ì´ ì˜ˆì™¸ ì²˜ë¦¬ê°€ ê²½ìš°ì— ë”°ë¼ ë‚˜ì„ ìˆ˜ ìˆë‹¨ë‹¤
```java
try {
	user.execute(command);
} catch(NotLoggedIn e) {
	anthenticator.promptLogin();
}
```

ë‚˜ì•„ê°€ ì•„ë˜ì™€ ê°™ì´ user ê°ì²´ê°€ ëª¨ë“  ê²ƒì„ ì²˜ë¦¬í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ ë” ë‚˜ì„ ìˆ˜ ìˆë‹¤ 
```java
user.execute(command, authenticator);
```
- ë¡œê·¸ì¸ ì—¬ë¶€ ìƒíƒœëŠ” user ê°ì²´ì— ì†í•¨
- ì™œ user ìƒíƒœë¥¼ ê°€ì ¸ë‹¤ê°€, user ëŒ€ì‹ í•´ì„œ ê²°ì • í•˜ëŠ”ê°€ 
- userê°€ í•´ë‹¹ ë²”ìœ„ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ë§ë‹¤

**Tell Don't Ask**
- tell other object what to do
- but not to ask object what the stat is (ìƒíƒœë¥¼ ë¬»ì§€ ë§ˆë¼)

> [!note] CQSë¥¼ ê°•í™”í•˜ëŠ” ìˆ˜ë‹¨ì´ Tell Don't Ask ê·œì¹™ì´ë‹¤


**7. Law of Demeter (ë””ë¯¸í„° ì›ì¹™)**
- ë©”ì„œë“œ ì²´ì´ë‹ì´ ë„ˆë¬´ ê¹Šì–´ì§€ë©´
	- í•˜ë‚˜ì˜ í•¨ìˆ˜ê°€ ì „ì²´ ì‹œìŠ¤í…œ ê°ì²´ë“¤ ê°„ì˜ ë„¤ë¹„ê²Œì´ì…˜ì„ ì•„ëŠ” ê²ƒì€ ì˜ëª»ëœ ì„¤ê³„ì´ë‹¤
- í•¨ìˆ˜ê°€ ì‹œìŠ¤í…œì˜ ì „ì²´ë¥¼ ì•Œê²Œ í•˜ë©´ ì•ˆëœë‹¤ 
- ê°œë³„ í•¨ìˆ˜ëŠ” ì œí•œëœ ì§€ì‹ë§Œ ê°€ì ¸ì•¼ í•œë‹¤
- ê°ì²´ëŠ” ìš”ì²­ëœ ê¸°ëŠ¥ ìˆ˜í–‰ì„ ìœ„í•´ ì´ì›ƒ ê°ì²´ì—ê²Œ ìš”ì²­í•´ì•¼ í•œë‹¤
- ìš”ì²­ì„ ìˆ˜ì‹ í•˜ë©´ ì ì ˆí•œ ê°ì²´ê°€ ìˆ˜ì‹ í•  ë•Œê¹Œì§€ ì „íŒŒë˜ì–´ì•¼ í•œë‹¤
- `law of demeter`ëŠ” ì•„ë˜ì™€ ê°™ì€ ì¼ë ¨ì˜ ê·œì¹™ì„ í†µí•´ Tell Don't Askë¥¼ í˜•ì‹í™”í•œë‹¤.
	- ì¸ìë¡œ ì „ë‹¬ëœ ê°ì²´
	- localy ìƒì„±í•œ ê°ì²´
	- í•„ë“œë¡œ ì„ ì–¸ëœ ê°ì²´
	- ì „ì—­ ê°ì²´

**8. early returns**
- early return ì´ë‚˜ guarded returnì€ í—ˆìš©ë¨
- ë£¨í”„ì˜ ì¤‘ê°„ì—ì„œ ë¦¬í„´í•˜ëŠ” ê²ƒì€ ë¬¸ì œì´ë‹¤ ğŸ’£
	- break, ë£¨í”„ ì¤‘ê°„ì—ì„œì˜ returnì€ loopë¥¼ ë³µì¡í•˜ê²Œ í•¨
	- ì½”ë“œê°€ ë™ì‘í•˜ë„ë¡ í•˜ëŠ” ê²ƒë³´ë‹¤ ì´í•´í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì´ ë” ì¤‘ìš”âœ¨

```java
private boolean isValidName() {
	if(name.equals("")) return true;
	if(..) return true;

	return false;
}
```


**9. error handling**
- [ì˜ˆì œ ì €ì¥ì†Œ - stack-example](https://github.com/msbaek/stack-example)
- ìŠ¤íƒì„ ì§ì ‘ êµ¬í˜„í•  ë•Œ
	- ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ìœ„í•´ pop()ì€ null ë°˜í™˜í•˜ê³ , push()ëŠ” falseë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤
	- ì´ë³´ë‹¤ëŠ” exceptionì„ ë°œìƒì‹œí‚¤ëŠ” ê²ƒì´ ì¢‹ë‹¤
		- ì‹¤íŒ¨ì‹œ ê°’ì— ëŒ€í•´ ì•Œì•„ì•¼ í•˜ë„¤.. ë‚´ë¶€ êµ¬í˜„ì„ ì•Œì•„ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ì¸ë“¯ğŸ¤”
	- ì´ë•Œ exceptionì˜ ì´ë¦„ì€ ìµœëŒ€í•œ êµ¬ì²´ì ì´ì—¬ì•¼ í•œë‹¤. 

```java
public static Stack make(int capacity) {
	if(capacity < 0) 
		throw new IllegalCapacity();
	if(capacity == 0)
		return new ZeroCapacityStack(); // NOP, ë„ì˜¤ë¸Œì íŠ¸ íŒ¨í„´

	return new BoundedStack(capacity);
}

public static class IllegalCapacity extends RuntimeException { 
}
```

**checked vs unchecked ì˜ˆì™¸**
- checked ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ catchë‚˜ throw í•´ì•¼ í•œë‹¤ 
	- íŠ¹ì • ê¸°ìˆ ì˜ ì˜ˆì™¸ì— ëŒ€í•œ ì˜ì¡´ì´ ë°œìƒ
	- checked exceptionì„ ì•„ì˜ˆ ì‚¬ìš©í•˜ì§€ ë§ë¼ 
		- ë‹¨, ğŸ‘€ ì¬ì‹œë„ ë¡œì§ì˜ ê²½ìš° checked exceptionì´ í•„ìš”í•˜ë‹¤ê³  ìƒê°
		- ê·¸ë¦¬ê³  public apiì˜ ê²½ìš°ì—ë„ checked exceptionì´ í•„ìš”
- ì˜ˆì™¸ ë©”ì‹œì§€ëŠ” ì–´ë–¤ê±¸ ë‹´ì•„ì•¼ í•˜ë‚˜?
	- ë©”ì‹œì§€ê°€ í•„ìš”ì—†ëŠ”ê²Œ ê°€ì¥ ì¢‹ë‹¤ ğŸ‘
	- ì˜ˆì™¸ í´ë˜ìŠ¤ ì´ë¦„ì„ ì •í™•í•˜ê²Œ ì§€ì–´ ì´ë¦„ìœ¼ë¡œ ì˜ë¯¸ê°€ ì „ë‹¬ë˜ë„ë¡ í•˜ë¼
		- ê°€ì¥ ì¢‹ì€ ì»¤ë§¨íŠ¸ëŠ” ì»¤ë§¨íŠ¸ë¥¼ ì‘ì„±í•˜ì§€ ì•ŠëŠ” ê²ƒì´ë‹¤
		- ì½”ë“œ(ì´ë¦„)ê°€ ì»¤ë§¨íŠ¸ë¥¼ ëŒ€ì‹ í•˜ë„ë¡ í•´ë¼

**10. Special Cases**
- `stack-example` ì˜ˆì œì—ì„œ ([ì €ì¥ì†Œ](https://github.com/msbaek/stack-example))
	- capacityê°€ 0ì¸ ê²½ìš° ì–´ë–»ê²Œ ì²˜ë¦¬í•  ê²ƒì¸ê°€? `Null Object Pattern` ì‚¬ìš©
		- Stack ì¸í„°í˜ì´ìŠ¤ ì¶”ì¶œ 
		- íŠ¹ì´í•œê²Œ ì¸í„°í˜ì´ìŠ¤ì— ëŸ°íƒ€ì„ ì˜ˆì™¸ë¥¼ ì„ ì–¸í•˜ë„¤ ğŸ¤”

> ì ˆì°¨ë¥¼ ì§€í‚¤ì§€ ëª»í–ˆë‹¤.
- https://github.com/msbaek/stack-example/blob/master/src/test/java/new-requirement
- https://github.com/msbaek/stack-example/blob/master/SpecialCases.md

**11. Null is not an error**
- ì˜ˆì œ ìŠ¤íƒì—ì„œ 
	- `top()` í˜¸ì¶œì‹œ null ë°˜í™˜ë³´ë‹¤ `Stack.Empty` ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ”ê²Œ ë‚˜ì„ ìˆ˜ ìˆë‹¤.
		- ì•„ë¬´ë„ null ê¸°ëŒ€í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤ 
		- nullì„ ë˜ì§€ë©´ ì‹œìŠ¤í…œì˜ ì—¬ê¸°ì €ê¸°ì— ì¡°ìš©íˆ í¼ì§€ëŠ” ì†ì„±ì´ ìˆë‹¤

**12. Null is a value**
- ì˜ˆì œ ìŠ¤íƒì—ì„œ 
	-  `find()`ì—ì„œ elementê°€ ì—†ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— -1ë³´ë‹¤ nullì´ ì˜ë¯¸ìˆì„ ìˆ˜ ìˆë‹¤ (`Null == Nothing`)

**13. tryë„ í•˜ë‚˜ì˜ ì—­í• /ê¸°ëŠ¥ì´ë‹¤**

---
### 8. Form 
> ê°œë…ì ì¸ ë¶€ë¶„ì´ ë§ë‹¤


---

### 9. TDD 1ï¸âƒ£
- ê°œë…ì„ ì‚´í´ë´„
- ì•„ë¬´ê²ƒë„ ì—†ëŠ” ìƒíƒœì—ì„œ Movie í´ë˜ìŠ¤ë¥¼ TDDë¡œ ë§Œë“œëŠ” ê³¼ì •ì„ ë³´ì—¬ì¤Œ
	- 2ï¸âƒ£ë¶€í„° ë³¸ê²©ì ì¸ ì˜ˆì œ

### 10. TDD 2ï¸âƒ£ - tyrant
- ì„œë²„ ì„¤ì¹˜ í›„ í†µì‹ í•˜ëŠ” ë„ë©”ì¸ í´ë˜ìŠ¤ë¥¼ TDDë¡œ ê°œë°œí•˜ëŠ” ì˜ˆì œ
- `tokyo-cabinet`ê³¼ `tokyo-tyrant`ì„¤ì¹˜í•´ì•¼ í•˜ëŠ”ë° 10ë…„ ì „ì´ë¼ ë‹¤ìš´ë¡œë“œ ë¶ˆê°€
- ì €ì¥ì†Œ:  [https://github.com/msbaek/tyrant-client-tdd](https://github.com/msbaek/tyrant-client-tdd)
	- `git clone` ë‚´ë ¤ ë°›ê³  ê°€ì´ë“œë¼ì¸ì— ë”°ë¼ `tokyo-tyrant` ì„¤ì¹˜ í›„ ì‹¤í–‰
- ì ˆì°¨ì ì¸ ì‹¤í–‰ ì½”ë“œë¥¼ ë¦¬íŒ©í„°ë§
    - 1. inner class ì¶”ì¶œ
    - 2. ë¡œì»¬ ë³€ìˆ˜ë¥¼ ë©¤ë²„ ë³€ìˆ˜ë¡œ ì´ë™
    - 3. íŒŒë¼ë¯¸í„°ë¥¼ ë³€ìˆ˜ ì¶”ì¶œ
    - 4. ë©”ì„œë“œ ì¶”ì¶œ
    - 5. ë³€ìˆ˜ ì¸ë¼ì¸
    - 6. ë¡œì»¬ ë³€ìˆ˜ë¥¼ ë©”ì„œë“œ ì¸ìë¡œ ì „í™˜
    - 7. ìƒìœ„ í´ë˜ìŠ¤ë¡œ ì¶”ì¶œ
- ê°œì¸ì ìœ¼ë¡œ ğŸ‘€
	- ë©”ì„œë“œ ì¶”ì¶œí•˜ê¸° ì „ ì„œë¡œ ë‹¤ë¥¸ ê°’ì„ ê°€ì§€ëŠ” íŒŒë¼ë¯¸í„°ì— ëŒ€í•´ ë³€ìˆ˜ë¥¼ ì¶”ì¶œí•œ í›„ ë©”ì„œë“œ ì¶”ì¶œí•˜ëŠ” ê²Œ ì¸ìƒì .
	- í´ë˜ìŠ¤ ë‚´ì—ì„œ public ì„ ìœ„ì— ë‘ê³ , privateì„ ì•„ë˜ì— ë‘ëŠ” ê²ƒë„ ì¸ìƒì .

**ë¦¬íŒ©í„°ë§ ì „**
```java
class TyrantMapTest {  
  
    @Test  
    void getRetrievesWhatWasPut() throws IOException {  
       Socket socker = new Socker("localhost", 1978);
       OutputStream writer = socker.getOutputStream();
       writer.write(0xC8); // OPERATION_PREFIX
       writer.write(0x10); // OPERATION_PUT
       writer.write(0);
       writer.write(0);
       writer.write(0);
       writer.write(3); // key length
       writer.write(0);
       writer.write(0);
       writer.write(0);
       writer.write(5); // value length
       writer.write("key".getBytes());
       writer.write("value".getBytes());

	   InputStream reader = socket.getInputStream();
	   int status = reader.read();
	   assertThat(status).isEqualsTo(0); // 0 ì„±ê³µ, ê·¸ì™¸ ì‹¤íŒ¨
		
    }  
}
```


**ë¦¬íŒ©í„°ë§ í›„**
```java
class TyrantMapTest {  
  
    @Test  
    void getRetrievesWhatWasPut() throws IOException {  
        TyrantMap tyrantMap = new TyrantMap();  
        tyrantMap.open();  
        tyrantMap.put("key", "value");  
        assertThat(tyrantMap.get("key")).isEqualTo("value".getBytes());  
        tyrantMap.close();  
    }  
}
```


```java
public class TyrantMap {  
    public static final int OPERATION_PREFIX = 0xC8;  
    public static final int OPERATION_PUT = 0x10;  
    public static final int OPERATION_GET = 0x30;  
  
    private Socket socket;  
    private DataOutputStream writer;  
    private DataInputStream reader;  
  
    public void put(String key, String value) throws IOException {  
        writeHeader(OPERATION_PUT);  
        writeKeyValue(key, value);  
        verifyStatus();  
    }  
  
    public void open() throws IOException {  
        socket = new Socket("localhost", 1978);  
        writer = new DataOutputStream(socket.getOutputStream());  
        reader = new DataInputStream(socket.getInputStream());  
    }  
  
    public byte[] get(String key) throws IOException {  
        writeHeader(OPERATION_GET);  
        writeKey(key);  
        verifyStatus();  
        return readResults();  
    }  
  
    public void close() throws IOException {  
        reader.close();  
        writer.close();  
        socket.close();  
    }  
  
    private void writeKey(String key) throws IOException {  
        writer.writeInt(key.length());  
        writer.write(key.getBytes());  
    }  
  
    private void writeHeader(int operationCode) throws IOException {  
        writer.write(OPERATION_PREFIX);  
        writer.write(operationCode);  
    }  
  
    private void writeKeyValue(String key, String value) throws IOException {  
        writer.writeInt(key.length());  
        writer.writeInt(value.length());  
        writer.write(key.getBytes());  
        writer.write(value.getBytes());  
    }  
  
    private void verifyStatus() throws IOException {  
        int status = reader.read();  
        assert status == 0;  
    }  
  
    private byte[] readResults() throws IOException {  
        int length = reader.readInt();  
        byte[] results = new byte[length];  
        reader.read(results);  
        return results;  
    }  
}
```

### 11. TDD 3ï¸âƒ£ - bowling game (ìœ ëª…í•œ ì˜ˆì œ)
- ë³¼ë§ ê²Œì„ì— ëŒ€í•œ ê·œì¹™ì„ í™•ì¸ í›„ TDD ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ 
- ğŸ“Œ ê·œì¹™
	- ë³¼ë§ ê²Œì„ì€ 10ê°œì˜ í”„ë ˆì„ìœ¼ë¡œ êµ¬ì„±ëœë‹¤
	- ê° í”„ë ˆì„ì€ ëŒ€ê²Œ `2ë£°`ì„ ê°–ëŠ”ë‹¤ 
		- â¡ï¸ 10ê°œì˜ í•€ì„ ì“°ëŸ¬ëœ¨ë¦¬ê¸° ìœ„í•´ 2ë²ˆì˜ ê¸°íšŒë¥¼ ê°–ëŠ”ë‹¤
	- `Spare`: 10 + next first rollì—ì„œ ì“°ëŸ¬ ëœ¨ë¦° í•€ìˆ˜
	- `Strike`: 10 + next two rollì—ì„œ ì“°ëŸ¬ ëœ¨ë¦° í•€ìˆ˜
	- 10th í”„ë ˆì„ì€ íŠ¹ë³„
		- spareë¥¼ ì²˜ë¦¬í•˜ë©´ 3ë²ˆ ë˜ì§ˆ ìˆ˜ ìˆë‹¤
- Gameì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±
	- `bowling` íŒ¨í‚¤ì§€ì—
	- rollê³¼ scoreë¼ëŠ” 2ê°œì˜ ë©”ì†Œë“œë¥¼ ê°€ì§
	- roll í•¨ìˆ˜: ballì„ rollí•  ë•Œë§ˆë‹¤ í˜¸ì¶œëœë‹¤. ì¸ìë¡œëŠ” ì“°ëŸ¬ëœ¨ë¦° í•€ ìˆ˜ë¥¼ ê°€ì§
	- score í•¨ìˆ˜: ê²Œì„ì´ ëë‚œ í›„ì—ë§Œ í˜¸ì¶œë˜ì–´ ê²Œì„ì˜ ì ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤
- `new int[21]` ë°°ì—´ì— ìˆœì°¨ì ìœ¼ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— ì ìˆ˜ ê²Œì‚°ì€ ë¬¸ì œì—†ìœ¼ë‚˜ frame ë³„ë¡œ ì ìˆ˜ê°€ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ í‘œì¶œí•˜ëŠ”ê±°ëŠ” ê³ ë ¤í•˜ì§€ ì•Šì„ ë“¯í•˜ë‹¤ğŸ’©
	 
> ì¼„íŠ¸ë²¡ì˜ í´ë¦°ì½”ë”ìŠ¤ ì˜ìƒì´ë¼ëŠ”ê²Œ ìˆëŠ” ë“¯

ì—ì œ ì €ì¥ì†Œ - https://github.com/msbaek/bowling-game

**ìš©ì–´**
- frame: íŒì„ ëœ»í•˜ê³ , 2ë²ˆì”© ë˜ì§
	- ë‹¨, 10ë²ˆì§¸ í”„ë ˆì„ì— ê²½ìš°ì— ë”°ë¼ ë³´ë„ˆìŠ¤ ë¡¤(`+1`) ì´ ìˆì„ ìˆ˜ ìˆë‹¤ (ìµœëŒ€ 3ë²ˆ)
	- ë°°ì—´ í¬ê¸°ë¥¼ 21ë¡œ ì´ˆê¸°í™”í•´ì„œ 0 ~ 20ê¹Œì§€ í•˜ë‹ˆ, 10ë²ˆì§¸ í”„ë ˆì„ì˜ ë³´ë„ˆìŠ¤ë¥¼ ê³ ë ¤í–ˆêµ¬ë‚˜
- strike : ì²« ë²ˆì§¸ íˆ¬êµ¬ì—ì„œ 10ê°œ í•€ ì „ë¶€ë¥¼ ì“°ëŸ¬ëœ¨ë¦¼ (`X` í‘œê¸°)
- spare: ë‘ ë²ˆì˜ íˆ¬êµ¬ë¡œ ì´ 10ê°œì˜ í•€ì„ ëª¨ë‘ ì“°ëŸ¬ëœ¨ë¦¼ (`/` í‘œê¸°)
- open frame: 2ë²ˆ ë˜ì¡ŒëŠ”ë° í•©ì´ 10ì´ ì•ˆë˜ëŠ” ê²½ìš° 

**ì ìˆ˜ ê³„ì‚°**
- one frame: íˆ¬êµ¬ 2ë²ˆì˜ í•© (10 ë¯¸ë§Œ)
- spare: 
	- 2ë²ˆ ë˜ì ¸ì„œ 10ê°œë¥¼ ì“°ëŸ¬ ëœ¨ë¦¼
	- ë‹¤ìŒ í”„ë ˆì„ì˜ ì²«ë²ˆì§¸ íˆ¬êµ¬ ê°’ì´ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¡œ í•©ì‚°ë¨ 
	- `10 + ë‹¤ìŒ í”„ë ˆì„ì˜ ì²«ë²ˆì§¸ íˆ¬êµ¬ ê°’(ë³´ë„ˆìŠ¤)`
- strike:
	- 1ë²ˆ ë˜ì ¸ì„œ 10ê°œë¥¼ ì“°ëŸ¬ ëœ¨ë¦¼ 
	- ë‹¤ìŒ í”„ë ˆì„ì˜ 2ê°œ íˆ¬êµ¬ ê°’ì´ ë³´ë„ˆìŠ¤ ì ìˆ˜ë¡œ í•©ì‚°ë¨ 
	- `10 + ë‹¤ìŒ í”„ë ˆì„ì˜ ë‘ê°œì˜ íˆ¬êµ¬ ê°’(ë³´ë„ˆìŠ¤)`


ìŠ¤íŠ¸ë¼ì´í¬ê°€ ì—°ì†í•´ì„œ ë‚˜ì˜¨ ê²½ìš° (edge case ğŸ‘€)
```text
[1] X       â†’ ë‹¤ìŒ ë‘ ë²ˆ: X(10), 3 â†’ 10+10+3 = 23
[2] X       â†’ ë‹¤ìŒ ë‘ ë²ˆ: 3, 4    â†’ 10+3+4 = 17
[3] 3 4     â†’ í•©: 7
```
- **í”„ë ˆì„ ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ íˆ¬êµ¬ ë‹¨ìœ„**ë¡œ "ì´ 2ë²ˆì˜ ì‹¤ì œ íˆ¬êµ¬ ì ìˆ˜"ë¥¼ ë”í•´ì•¼ í•©ë‹ˆë‹¤.
- ìŠ¤íŠ¸ë¼ì´í¬ê°€ ì—°ì†í•´ì„œ ë‚˜ì˜¤ë‹ˆ 3ë²ˆì§¸ í”„ë ˆì„ì˜ ì²«ë²ˆì§¸ ê°’ì´ í•©ì‚°ë˜ë²„ë¦¼
- ì˜ˆì œì˜ ê²½ìš° ìˆœì°¨ì ìœ¼ë¡œ ì¸ë±ìŠ¤ì— pins ê°œìˆ˜ë¥¼ í• ë‹¹í•˜ê¸° ë•Œë¬¸ì— ì—£ì§€ ì¼€ì´ìŠ¤ë„ í†µê³¼í•¨âœ¨

ìŠ¤í˜ì–´ ë‹¤ìŒì— ìŠ¤íŠ¸ë¼ì´í¬ê°€ ë‚˜ì˜¤ëŠ” ê²½ìš° 
```text
[1] 5 /    10 + 10 = 20, ë‹¤ìŒ íˆ¬êµ¬ê°€ ìŠ¤íŠ¸ë¼ì´í¬ì´ë¯€ë¡œ
[2] X      10 + .. ë‹¤ìŒ íˆ¬êµ¬ 2íšŒ ëŒ€ê¸°
```


public class ë¥¼ ë¨¼ì € ë§Œë“¤ ìˆ˜ ìˆì§€ë§Œ, nothingë¶€í„° ì‹œì‘ 
```java
public class GameTest {  
    @Test  
    void nothing() {  
        Game game = new Game();  
    }  
}
```

> tddë¥¼ í•  ë•Œ ì‹¤íŒ¨í•  í…ŒìŠ¤íŠ¸ ì‘ì„±, ì„±ê³µ, ë¦¬íŒ©í„°ë§ ì‚¬ì´í´ì„ ì§€í‚¤ë„ë¡ í•œë‹¤
> ì´ë•Œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” ìµœëŒ€í•œ ê°„ë‹¨í•œ ê²ƒë¶€í„° ì‘ì„±
> - ì˜ˆì œ ì½”ë“œì˜ í…ŒìŠ¤íŠ¸ ìˆœì„œë¥¼ í™•ì¸í•˜ê¸°


> ì¤‘ë³µë˜ëŠ” ë©”ì„œë“œ ì¶”ì¶œí•  ë•Œ ë³€ìˆ˜ê°’ì´ ë‹¤ë¥¸ ê²½ìš° 
> - ë³€ìˆ˜ ì¶”ì¶œ â¡ï¸ ë©”ì„œë“œ ì¶”ì¶œ â¡ï¸ ë³€ìˆ˜ ì¸ë¼ì¸


one spare í…ŒìŠ¤íŠ¸ì‹œ ì‹¤íŒ¨í•˜ê²Œ ë˜ê³ , Gameì— SRP ì±…ì„ì´ ìœ„ë°˜ëœê²ƒì„ í™•ì¸í•˜ëŠ”ê²Œ ì¸ìƒì 
```java
@Test  
void oneSpare() {  
    game.roll(5);  
    game.roll(5);  
    game.roll(3);  
    rollMany(17, 0);  
  
    assertThat(game.getScore()).isEqualTo(16);  
}  
  
private void rollMany(int pins, int frame) {  
    for(int i = 0; i < frame; i++) {  
        game.roll(pins);  
    }  
}
```


```java
public class Game {  
    private int score;  
  
    public void roll(int pins) {  
        this.score += pins;  
    }  
  
    public int getScore() {  // ì ìˆ˜ ê³„ì‚°ì˜ ì±…ì„ì„ ê°€ì§
        return this.score;  
    }  
}
```

// ìš”êµ¬ì‚¬í•­ì— ëŒ€í•œ ì¢‹ì€ ë§ì´ ìˆì—ˆìŒ .. 
### 12. TDD 4ï¸âƒ£ - primefactor and wordwrap 
- ë§ˆì°¬ê°€ì§€ë¡œ ìš”êµ¬ì‚¬í•­ í™•ì¸ í›„ 2ê°œì˜ ì˜ˆì œ ìˆ˜í–‰
- primefactor : ì†Œì¸ìˆ˜ ë¶„í•´, wordwrap: ë‹¨ì–´ ë‚˜ëˆ„ê¸°
- ì €ì¥ì†Œ : https://github.com/msbaek/primefactors


```java

  
public class PrimeFactorTest {  

	@Test  
	void canFactorIntoPrimes() {  
		assertThat(of(1)).isEqualTo(list());  
		assertThat(of(2)).isEqualTo(list(2));  
		assertThat(of(3)).isEqualTo(list(3));  
	}  
	
	private List<Integer> list(Integer... ints) {  
		return Arrays.asList(ints);  
	}  
	
	private List<Integer> of(int n) {  
		List<Integer> factors = new ArrayList<>();  
		if(n > 1)  
			factors.add(n);  
	
		return factors;  
		}  
	}

}
```
- í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•˜ë„ë¡ ê°€ì¥ ì‹¬í”Œí•˜ê²Œ êµ¬í˜„ (static)

```java
public class PrimeFactorTest {  
  
    @Test  
    void canFactorIntoPrimes() {  
        assertPrimeFactors(1, list());  
        assertPrimeFactors(2, list(2));  
        assertPrimeFactors(3, list(3));  
        assertPrimeFactors(4, list(2, 2));  
        assertPrimeFactors(5, list(5));  
        assertPrimeFactors(6, list(2, 3));  
        assertPrimeFactors(8, list(2, 2, 2));  
        assertPrimeFactors(9, list(3, 3));  
    }  
  
    private void assertPrimeFactors(int n, List<Integer> list) {  
        assertThat(of(n)).isEqualTo(list);  
    }  
  
    private List<Integer> list(Integer... ints) {  
        return Arrays.asList(ints);  
    }  
  
    private List<Integer> of(int n) {  
        List<Integer> factors = new ArrayList<>();  
        if(n > 1) {  
            while(n % 2 == 0) {  
                factors.add(2);  
                n /= 2;  
            }  
  
            while(n % 3 == 0) {  
                factors.add(3);  
                n /= 3;  
            }  
        }  
        if(n > 1)  
            factors.add(n);  
        return factors;  
    }  
}
```

> [!note] ì›ì¹™ì´ ì¦ê°€í• ìˆ˜ë¡ production ì½”ë“œëŠ” ì œë„¤ëŸ´ í•´ì ¸ì•¼ í•œë‹¤(êµ¬ì²´í™”)
> if ì¡°ê±´ë¬¸ì´ë‚˜, whileì„ forë¡œ ë³€í™˜

```java
private List<Integer> of(int n) {  
    List<Integer> factors = new ArrayList<>();  
    int divisor = 2;  
    for(;n > 1; divisor++) {  
        for(;n % divisor == 0; n /= divisor) {  
            factors.add(divisor);  
        }  
    }  
    return factors;  
}
```


word wrap ì˜ˆì œ 
https://github.com/msbaek/wordwrap

> nothingì´ë¼ëŠ” ì•„ë¬´ê²ƒë„ ì—†ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê³  ì‹¤í–‰í•´ë³´ëŠ”ê²Œ ê°œë°œìì—ê²Œ ì‹¬ë¦¬ì  ì•ˆì •ê°ì„ ì¤€ë‹¤í•¨ 

```java
public class WrapperTest {  
  
    @Test  
    void shouldWrap() {  
        assertThat(wrap("word word", 4)).isEqualTo("word\nword");  
        assertThat(wrap("a dog", 5)).isEqualTo("a dog");  
        assertThat(wrap("a dog with a bone", 6)).isEqualTo("a dog\nwidth a\bbone"); // fail
  }  
  
    private static String wrap(String s, int width) {  
        return s.length() > width ? s.replaceAll(" ", "\n") : s;  
    }  
}
```
- `Getting Stuck` ìƒíƒœì— ë¹ ì§ 
	- í˜„ì¬ ì‹¤íŒ¨í•˜ê³  ìˆëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì„±ê³µì‹œí‚¤ê¸° ìœ„í•´ ì ì§„ì (incremental)ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ì¼ì´ ì—†ê³ 
	- í…ŒìŠ¤íŠ¸ë¥¼ ì„±ê³µì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” ì•„ì£¼ ë§ì€ ì–‘ì˜ í”„ë¡œë•ì…˜ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•˜ê³ 
	- ê·¹ë‹¨ì˜ ê²½ìš° ì „ì²´ ì•Œê³ ë¦¬ì¦˜ì„ ë‹¤ì‹œ ì‘ì„±í•´ì•¼ë§Œí•˜ëŠ” ê²½ìš°ë¥¼ ì¼ì»«ëŠ” ê¸°ìˆ ì  ìš©ì–´
- ì´ **í…ŒìŠ¤íŠ¸ë¥¼ íŒ¨ìŠ¤ì‹œí‚¤ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ ì•Œê³ ë¦¬ì¦˜ì„ ë‹¤ì‹œ ì‘ì„±í•˜ëŠ” ê²ƒ ë¿**ì´ë‹¤.


**Getting Unstuck**ğŸ‘  // ì¢‹ì€ê±° ê°™ë‹¤. ìŠ¤í…ì„ ë°Ÿì•„ê°€ë©´ì„œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê²€ì¦
- `most degenerate test case`ë¥¼ ë¨¼ì € ì‘ì„±í•˜ê³ 
- ì´ ë³µì¡í•¨ í€´ì¦ˆë¥¼ ì•„ì£¼ ì‘ì€ ìŠ¤í…ì”© ì˜¬ë¼ê°€ì.
- ê° ê²½ìš°ì—ì„œ í•´ë‹¹ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œí‚¤ë„ë¡ specificí•œ fixë¥¼ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼
- production codeë¥¼ generalizingí•˜ì—¬ í…ŒìŠ¤íŠ¸ê°€ í†µê³¼ë˜ë„ë¡ í•˜ì.

```java
public class WrapperTest {  
  
    @Test  
    void shouldWrap() {  
        assertWraps(null, 1, "");  
        assertWraps("", 1, "");  
        assertWraps("x", 1, "x");  
        assertWraps("xx", 1, "x\nx");  
        assertWraps("xxx", 1, "x\nx\nx");  
        assertWraps("x x", 1, "x\nx");  
        assertWraps("x xx", 3, "x\nxx");  
        assertWraps("four score and seven years ago our fathers brought forth upon this continent",  
                7,  
                "four\nscore\nand\nseven\nyears\nago our\nfathers\nbrought\nforth\nupon\nthis\ncontine\nnt");  
    }  
  
    private static void assertWraps(String s, int width, String expected) {  
        assertThat(wrap(s, width)).isEqualTo(expected);  
    }  
  
    private static String wrap(String s, int width) {  
        if(s == null)  
            return "";  
  
        if(s.length() <= width)  
            return s;  
  
        int breakPoint = s.lastIndexOf(" ", width);  
        if(breakPoint == -1) {  
            breakPoint = width;  
        }  
  
        return s.substring(0, breakPoint) + "\n" + wrap(s.substring(breakPoint).trim(), width);  
    }  
}
```


---

### 10. Architecture

**What is Architecture**
- `ì•„í‚¤í…ì²˜ëŠ” ì‚¬ìš©ë²•(Usage)ì— ëŒ€í•œ ê²ƒì´ë‹¤`
- ì „ì²´ì ì¸ ì‹œìŠ¤í…œ ê°œë°œì— ê¸°ë°˜ì„ ì œê³µí•˜ëŠ” ë³€ê²½ ë¶ˆê°€í•œ ì´ˆê¸° ê²°ì •ì‚¬í•­ì˜ ì§‘í•©
	- Eclipse: development environment
	- Spring, Tomcat, Hibernate: Framework
	- MySQL, MVC 


**What is Use Case**
> a list of steps, typically defining interactions between a role(actor) and a system, to achieve a goal
- `actor` : ì‚¬ìš©ì ê·¸ë£¹
- `use case`: actorê°€ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥, ì¼ë ¨ì˜ ë‹¨ê³„ (ìƒí˜¸ì‘ìš©)


**Architecture Exposes Usage**
- ì•„í‚¤í…ì²˜ëŠ” ì‚¬ìš©ë²•ì— ëŒ€í•´ì„œ ì„¤ëª…
- Use case should stand alone
- ...


**Deferring Decisions**
- ì¢‹ì€ ì•„í‚¤í…ì²˜ëŠ” FW, WAS, UI ë“±ê³¼ ê°™ì€ stuffë“¤ì— ëŒ€í•œ ê²°ì •ì„ ì—°ê¸°í•˜ëŠ” ê²ƒì„ í—ˆìš©
	- Stuffì— ëŒ€í•œ ê²°ì •ì€ ì—°ê¸°ë  ìˆ˜ ìˆì–´ì•¼ í•˜ê³ , ì—°ê¸°ë˜ì–´ì•¼ í•œë‹¤
	- ì´ê²Œ ì¢‹ì€ ì•„í‚¤í…ì²˜ì˜ ì£¼ìš”í•œ ëª©ì  ì¤‘ í•˜ë‚˜
- ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ê²°ì •ì„ ìœ„í•œ ì •ë³´ê°€ í’ë¶€í•´ì§ 


(Fitness ì˜ˆì œ ë° ì„¤ëª… ìƒëµ)

**Central Abstraction**
- ë§ì€ ì•„í‚¤í…íŠ¸ëŠ” DBë¥¼ core abstraction ì´ë¼ê³  ìƒê°
	- DBê°€ ë™ì‘í•˜ê³  ìŠ¤í‚¤ë§ˆê°€ ì¤€ë¹„ë˜ê¸° ì „ì—ëŠ” ì–´ë– í•œ ìƒê°ë„, ì‘ì—…ë„ ì‹œì‘í•˜ì§€ ì•ŠëŠ”ë‹¤ ğŸ’©
- **ê°œë°œ ì…ì¥ì—ì„œ ì¶”ìƒí™”í•œ í›„ì— ê¸°ëŠ¥ë¶€í„° í•˜ê³  ë°ì´í„°ë¥¼ í•˜ë©´** ğŸ‘
	- ë°ì´í„°ë¶€í„°í•˜ë©´ ì ˆì°¨ì§€í–¥ì ìœ¼ë¡œ ê°
- Fitness í”„ë¡œì íŠ¸ì˜ Central Abstraction - WikiPage
	- DBë¥¼ ì—°ê¸°í•  ìˆ˜ ìˆëŠ” Detailë¡œ ê°„ì£¼
	- ì¢‹ì€ ì•„í‚¤í…ì²˜ëŠ” Tool, Frameworkë¡œ êµ¬ì„±ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤ 
	- ì¢‹ì€ ì•„í‚¤í…ì²˜ëŠ” UI, WAS, DI FW ë“±ê³¼ ê°™ì€ Detailì— ëŒ€í•œ ê²°ì •ì„ ì—°ê¸°í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤
- ì–´ë–»ê²Œ í•˜ë©´ ì´ë ‡ê²Œ ì—°ê¸°í•  ìˆ˜ ìˆë‚˜?
	- ì—°ê¸°í•˜ê³  ì‹¶ì€ ê²ƒì—ì„œ êµ¬ì¡°ë¥¼ decouple, irrelevant í•˜ê²Œ ì„¤ê³„
- ì–´ë–»ê²Œ í•˜ë©´  Tool, FWs, DBì—ì„œ decouple í•˜ë‚˜?
	- ì•„í‚¤í…ì²˜ ì¸¡ë©´ì—ì„œ SW í™˜ê²½ì´ ì•„ë‹Œ Use Caseì— ì§‘ì¤‘í•˜ë¼

**Conclusion**
- ì•„í‚¤í…ì²˜ë¥¼ Use caseì— ì§‘ì¤‘
	- ë‹¤ë¥¸ ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ ê²°ì •ì„ ë¯¸ë£° ìˆ˜ ìˆë‹¤
	- ì´ëŸ¬í•œ ì—°ê¸°ëŠ” ìš°ë¦¬ì˜ ì„ íƒì„ ìµœëŒ€í•œ ì˜¤ë˜ ì—´ì–´ë‘˜ ìˆ˜ ìˆë‹¤. 
	- ì´ë§ì€ í•„ìš”ì—ë”°ë¼ ê²°ì •ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤
	- í”„ë¡œì íŠ¸ ì§„í–‰ ì¤‘ì— ì¶©ë¶„í•œ ì •ë³´(ë„ë©”ì¸) ìƒê¹€ì— ë”°ë¼ undoì— ëŒ€í•œ ë¹„ìš©ì—†ì´ ì—¬ëŸ¬ë²ˆ ë³€ê²½í•  ìˆ˜ë„ìˆë‹¤

>(ğŸ‘€ ë‚´ìƒê°) ì™¸ë¶€ ì˜ì¡´ì„±ì„ ì œì™¸í•˜ê³  Use caseì— ì§‘ì¤‘í•´ ë„ë©”ì¸ ì„¤ê³„ë¶€í„° í•˜ë©´ êµ¬í˜„ ë° í”¼ë“œë°±ì´ ë¹ ë¥´ê¸° ë•Œë¬¸ì— ë„ë©”ì¸ì— ëŒ€í•œ ì´í•´ë„ê°€ ë†’ì•„ì§€ê³ , ë” ì¢‹ì€ ì„¤ê³„ë¥¼ ë§Œë“¤ìˆ˜ìˆë‹¤



### 11. Architecture UseCase
- ë„ë©”ì¸ ëª¨ë¸ ì„¤ê³„ ë°©ë²•ì„ ì‚´í´ë´„

**1. í´ë˜ìŠ¤/ì†ì„±/ê´€ê³„ ì‹ë³„**
- ë„ë©”ì¸ ì˜ì—­ì˜ ì£¼ìš” ê°œë…(ëª…ì‚¬)ë¥¼ ì‹ë³„
- "Applying UML and Patterns" ì°¸ì¡°
- ì •ì  ëª¨ë¸ë§
	- í´ë˜ìŠ¤
	- ì†ì„±
	- ê´€ê³„ ì‹ë³„


**2. ë„ë©”ì¸ ëª¨ë¸ì— í–‰ìœ„ ì¶”ê°€í•˜ê¸°**
- ë„ë©”ì¸ ëª¨ë¸ì— í–‰ìœ„ë¥¼ ì¶”ê°€í•¨ìœ¼ë¡œì¨ ë„ë©”ì¸ ëª¨ë¸ì— ìƒëª…ë ¥ì„ ë¶€ì—¬
- ë„ë©”ì¸ ëª¨ë¸ì˜ í–‰ìœ„ë¥¼ ê²°ì •í•˜ê¸° ìœ„í•´ ë„ë©”ì¸ ëª¨ë¸ì˜ ì±…ì„(Responsibility)ê³¼ ìƒí˜¸ì‘ìš©(Collaboration)ì„ ì‹ë³„
- í´ë˜ìŠ¤ì˜ ì±…ì„
	- í´ë˜ìŠ¤ê°€ ì•„ëŠ” ê²ƒ(ì†ì„±, ê´€ê³„), í•˜ëŠ” ê²ƒ, ê²°ì • í•˜ëŠ” ê²ƒ ë“±
- í´ë˜ìŠ¤ì˜ ìƒí˜¸ì‘ìš©
	- ì±…ì„ ìˆ˜í–‰ì„ ìœ„í•´ í˜¸ì¶œí•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ë“¤
- ì±…ì„ê³¼ ìƒí˜¸ì‘ìš©ì„ ì‹ë³„í•˜ëŠ” ì ˆì°¨
	- 1. ìš”êµ¬ì‚¬í•­ ..
	- 2. ë„ë©”ì¸ ëª¨ë¸ì˜ í´ë¼ì´ì–¸íŠ¸(í”„ë¦¬ì  í…Œì´ì…˜ í‹°ì–´ ë“±)ì—ê²Œ ë„ë©”ì¸ ëª¨ë¸ì„ ë…¸ì¶œí•˜ê¸° ìœ„í•œ ë„ë©”ì¸ ëª¨ë¸ì˜ ì¸í„°í˜ì´ìŠ¤(íƒ€ì…, ë©”ì†Œë“œ) ê²°ì •
	- 3. í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°ê°ì˜ ìš”êµ¬ì‚¬í•­ì„ ê³ ë ¤í•˜ì—¬ TDD ì ‘ê·¼ë²•ìœ¼ë¡œ êµ¬í˜„

**2.1 ìš”êµ¬ì‚¬í•­ ì‹ë³„í•˜ê¸°**
- ì²˜ë¦¬í•´ì•¼ í•  ìš”êµ¬ì‚¬í•­ ì‹ë³„ â¡ï¸ ì–´ë–»ê²Œ ì‘ë‹µí• ì§€ ê²°ì •
- UI ë””ìì¸, ìœ ìŠ¤ì¼€ì´ìŠ¤, ìœ ì €ìŠ¤í† ë¦¬ ë“±ì„ ë¶„ì„
- ìš”êµ¬ì‚¬í•­ì€ 2ê°€ì§€ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„± 
	- ì‚¬ìš©ì í–‰ìœ„
	- ì‚¬ìš©ì í–‰ìœ„ ìš”ì²­ì— ëŒ€í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‘ë‹µ(ì±…ì„)
- ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì±…ì„ì€ 2ê°€ì§€ë¡œ ê·¸ë£¹í•‘ 
	- ì‚¬ìš©ì ì…ë ¥ ê²€ì¦, ê°’ ê³„ì‚°, ë°ì´í„°ë² ì´ìŠ¤ ê°±ì‹  ë“±
	- ê°’ ì¶œë ¥

> CQS, 2ê°€ì§€ í–‰ìœ„ë¡œ ë‚˜ë‰¨


**2.2 ë©”ì†Œë“œ ì‹ë³„í•˜ê¸°**
- ê° ìš”ì²­ì— ëŒ€í•´ 2ê°€ì§€ ë©”ì†Œë“œë“¤ì´ ì¡´ì¬
	- ì„œë¹„ìŠ¤ ë©”ì†Œë“œ
		- ì‚¬ìš©ì ìš”ì²­ ê²€ì¦
		- ê³„ì‚° ìˆ˜í–‰
		- ë°ì´í„°ë² ì´ìŠ¤ ê°±ì‹ 
	- ë ˆíŒŒì§€í† ë¦¬ ë©”ì„œë“œ
		- ì¶œë ¥ì„ ìœ„í•œ ë°ì´í„° ë°˜í™˜
- ë„ë©”ì¸ ëª¨ë¸ì˜ í´ë¼ì´ì–¸íŠ¸ëŠ” ë„ë©”ì¸ í‹°ì–´ë¥¼ 2ë²ˆ í˜¸ì¶œ
	- ì„œë¹„ìŠ¤ ë©”ì†Œë“œ + ë ˆíŒŒì§€í† ë¦¬ ë©”ì†Œë“œ


**2.3 TDDë¡œ ë©”ì†Œë“œ êµ¬í˜„í•˜ê¸°**
- ëŒ€ìƒ ì„œë¹„ìŠ¤ ë©”ì†Œë“œì— ëŒ€í•´ í•˜ë‚˜ ì´ìƒì˜ T.Cë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘
	- ê° í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ìƒí™©ì„ ì¬í˜„í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ì¸ìë¡œ êµ¬ì„±ë¨
- mock ê°ì²´ë¥¼ ì´ìš©í•´ì„œ
	- service methods â¡ï¸ repository methods ìˆœìœ¼ë¡œ top-down ë°©ì‹ìœ¼ë¡œ êµ¬í˜„
	- êµ¬í˜„ì„ í•˜ë‹¤ê°€ ë°œê²¬ë˜ëŠ” collaboratorë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ ë¨¸ë¦¿ì†ì—ì„œ context-switchingì´ ì¼ì–´ë‚  í•„ìš”ê°€ ì—†ì´ ì§‘ì¤‘í•˜ë©´ì„œ êµ¬í˜„ ê°€ëŠ¥

ğŸ“š [POJOs in Action](https://www.manning.com/books/pojos-in-action)
- `3. Using the Domain Model Pattern`


**Architecture**
- ì›¹ ì‹œìŠ¤í…œì—ì„œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ëŒ€í•´ ì–˜ê¸°í•˜ì§€ ì•Šê³  ì›¹ ì‹œìŠ¤í…œì˜ ì´ìŠˆì— ëŒ€í•´ ë§í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤ ğŸ‘€

**Use Cases**
- ë”œë¦¬ë²„ë¦¬ ë¬¸ì œë¥¼ ìš°ì•„í•˜ê²Œ í•´ê²°í•˜ëŠ” ë°©ë²•
	- ë”œë¦¬ë²„ë¦¬ ë©”ì»¤ë‹ˆì¦˜
- `"Object-Oriented Software Engineering - A Use Case Driven Approach", Ivar Jacobson`
	- Delivery ë¬¸ì œë¥¼ ìš°ì•„í•œ ì•„í‚¤í…ì²˜ë¡œ í•´ê²°
	- Deliveryì™€ ë¬´ê´€í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì‹œìŠ¤í…œê³¼ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ì‹ì„ ì´í•´í•˜ëŠ” ê²ƒ
	- ë§í¬, ë²„íŠ¼, í´ë¦­ ë“±ì˜ ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  í‘œí˜„
	- Delivery ë§¤ì»¤ë‹ˆì¦˜ì„ ë‚˜íƒ€ë‚´ì§€ ì•ŠëŠ” ìš©ì–´ë¥¼ ì‚¬ìš© 
	- ì œì´ì½¥ìŠ¨ì€ ì´ëŸ° ìƒí˜¸ì‘ìš©ì„ **Use Case**ë¼ê³  í–ˆë‹¤
	- ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì€ Deliveryì™€ ë…ë¦½ì ì¸ Use Caseì— ì˜í•´ ì£¼ë„ë˜ì–´í– í•œë‹¤.
	- Use Caseê°€ ì‹œìŠ¤í…œì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒ



> íŠ¹ì • ì›¹ ì‹œìŠ¤í…œì˜ ë”œë¦¬ë²„ë¦¬ ë§¤ì»¤ë‹ˆì¦˜ì´ MVCë¥¼ ëœ»í•˜ëŠ”ê°€ ì‹¶ë‹¤
> MVCì— ì§‘ì¤‘í•˜ë‹¤ë³´ë©´ ë¹„ì¦ˆë‹ˆìŠ¤ì— ëŒ€í•´ ì†Œí™€í•´ì§„ë‹¤ëŠ” ì˜ë¯¸ì¸ë“¯


> ê°œë³„ì ìœ¼ë¡œ ë°°í¬í•  ìˆ˜ ìˆë‹¤ëŠ”ê±´ ê°œë³„ì ìœ¼ë¡œ ê°œë°œê°€ëŠ¥í•˜ë‹¤


> ë”œë¦¬ë²„ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì˜ ë³€ê²½ì´ ìˆë”ë¼ë„ ë‚´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë³´í˜¸ë°›ì„ ìˆ˜ ìˆë‹¤ê°€ ì¤‘ìš”


**Use Case Driven Architecture**
> 14:05 í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ì¶”ê°€í•˜ê¸°
- use case driven ì‹œìŠ¤í…œì˜ ì•„í‚¤í…ì²˜ë¥¼ ë³´ë©´ delivery ë©”ì»¤ë‹ˆì¦˜ì´ ì•„ë‹Œ use caseë¥¼ ë³´ê²Œ ë¨
	- ë…ìê°€ ë³´ê²Œë˜ëŠ” ê²ƒì€ **ì‹œìŠ¤í…œì˜ ì˜ë„**ì´ë‹¤


**Use Case (ì •ì˜)**
- ì‚¬ìš©ìê°€ íŠ¹ì • ëª©ì ì„ ì´ë£¨ê¸° ìœ„í•´ ì‹œìŠ¤í…œê³¼ ì–´ë–»ê²Œ ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ í˜•ì‹ì  ê¸°ìˆ 
- ëª©ì : ì£¼ë¬¸ì²˜ë¦¬ì‹œìŠ¤í…œì—ì„œ ìƒˆë¡œìš´ ì£¼ë¬¸ì„ ìƒì„±í•˜ëŠ” ê²ƒ
	- screen, button, field ë“±ê³¼ ê°™ì€ ì›¹(delivery ë§¤ì»¤ë‹ˆì¦˜)ê³¼ ê°™ì€ ê²ƒë“¤ì€ ì–¸ê¸‰í•˜ì§€ ì•ŠìŒ
	- ì‹œìŠ¤í…œìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” ë°ì´í„°, ì»¤ë§¨ë“œì™€ ì‹œìŠ¤í…œì´ ì‘ë‹µí•˜ëŠ” ê²ƒë§Œ ì–¸ê¸‰
	- Delivery ë§¤ì»¤ë‹ˆì¦˜ê³¼ ë¬´ê´€í•œ ì•„í‚¤í…ì²˜ë¥¼ ê°€ì§€ë ¤ë©´ delivery ë§¤ì»¤ë‹ˆì¦˜ê³¼ ë¬´ê´€í•œ use caseë¡œ ì‹œì‘í•´ì•¼ í•œë‹¤
	- Use caseì˜ ì‘ë‹µë„ë¥¼ ì£¼ëª©
		- orider-idëŠ” ì™„ì „í•˜ê²Œ delivery ë©”ì»¤ë‹ˆì¦˜ê³¼ ë¬´ê´€ 
		- human clerkì€ order-idë¥¼ ë³¼ í•„ìš”ê°€ ì—†ë‹¤
		- ë°˜ë©´ delivery ë§¤ì»¤ë‹ˆì¦˜ì€ íŒì—…ì„ ë„ì›Œì„œ ì‚¬ìš©ìì—ê²Œ í•­ëª©ì„ ì£¼ë¬¸ì— ì¶”ê°€í•˜ë¼ê³  ìš”ì²­í•  ìˆ˜ ìˆë‹¤
- **Use CaseëŠ” ì…ë ¥ ë°ì´í„°ë¥¼ í•´ì„í•˜ì—¬ ì¶œë ¥ ë°ì´í„°ë¥¼ ìƒì„±í•˜ëŠ” í•„ìˆ˜ ì•Œê³ ë¦¬ì¦˜ì´ë‹¤**
	- Use Caseë¥¼ êµ¬í˜„í•˜ëŠ” ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸
	- ?? ì˜ˆì œ??


**Use Case ì•Œê³ ë¦¬ì¦˜**
- ë‹¤ë¥¸ ë¹„ì¦ˆë‹ˆìŠ¤ ê°ì²´ë“¤(Customer, Order)ì„ ì–¸ê¸‰
- ì•Œê³ ë¦¬ì¦˜: use case ì •ì˜, ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì„ ë‚´í¬
- í•˜ì§€ë§Œ ì´ëŸ° ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì€ Customer, Order ê°ì²´ì— ì†í•˜ì§€ ì•ŠëŠ”ë‹¤
	- ğŸ‘€ ì¸í„°í˜ì´ìŠ¤ë¡œ ì •ì˜í•˜ê³  íŠ¹ì • ë ˆì´ì–´ì—ì„œ ì¡°í•©í•˜ëŠ”ê²Œ ì•„ë‹ê¹Œ
- ê·¸ëŸ¼ ì–´ë””ì— ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì„ ë‚´í¬ ì‹œí‚¬ ê²ƒì¸ê°€? 
- ì–´ë–¤ ê°ì²´ì— ìœ„ì¹˜ì‹œí‚¬ ê²ƒì´ë©° Use Case ê°ì²´ë¥¼ ì•„í‚¤í…ì²˜ì˜ ì–´ë””ì— ìœ„ì¹˜ì‹œí‚¬ ê²ƒì¸ê°€?
- ì–´ë–»ê²Œ ìš°ë¦¬ì˜ ì‹œìŠ¤í…œì„ partitioní•´ì„œ use caseê°€ central organizing principleì´ ë˜ê²Œ í•  ê²ƒì¸ê°€?


**Partitioning**
- ì•¼ì½¥ìŠ¨: ì•„í‚¤í…ì²˜ëŠ” 3ê°œì˜ fundamental kinds of objectë“¤ì„ ê°–ëŠ”ë‹¤ 
	- ë¹„ì¦ˆë‹ˆìŠ¤ ê°ì²´ : `ì—”í‹°í‹°`
	- UI ê°ì²´ : `Boundaries`
	- Use Case ê°ì²´: Controller ë˜ëŠ” MVCì™€ í˜¼ë™ì„ í”¼í•˜ê¸° ìœ„í•´ `Interactors`ë¼ê³  ë¶€ë¦„
- ì—”í‹°í‹° have
	- Application ë…ë¦½ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 
	- ë‹¤ë¥¸ applicationì—ì„œë„ ì—”í‹°í‹°ë“¤ì€ ì‚¬ìš©ë¨
	- íŠ¹ì • applicationì— íŠ¹í™”ëœ ë©”ì†Œë“œë¥¼ ê°–ìœ¼ë©´ ì•ˆë¨ 
		- ì´ëŸ° ë©”ì†Œë“œë“¤ì€ Interactorë¡œ ì˜®ê²¨ì•¼ í•œë‹¤ ğŸ“Œ
- Interactor have
	- applicationì— ì¢…ì†ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ 
	- íŠ¹ì • applicationì— íŠ¹í™”ëœ ë©”ì†Œë“œë“¤ì€ Interactor ê°ì²´ì— êµ¬í˜„
- InteractorsëŠ” applicationì— íŠ¹í™”ëœ ë¡œì§ì„ í†µí•´ ëª©ì ì„ ë‹¬ì„±
	- applicationê³¼ ë¬´ê´€í•œ entity ë¡œì§ì„ í˜¸ì¶œ 
	- Use Case ëª©ì ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•´ entityì˜ ë©”ì„œë“œë“¤ì„ ì–´ë–»ê²Œ í˜¸ì¶œí•˜ëŠ”ì§€ ì•„ëŠ” ê²ƒì´ Interactorì˜ ì±…ì„ì´ë‹¤

> Interactorê°€ ì„œë¹„ìŠ¤ê°€ ë ìˆ˜ë„ ìˆê³ , ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë  ìˆ˜ ìˆì–´ ë³´ì´ë„¤ ğŸ‘€

- Use Caseì˜ ì±…ì„ì¤‘ í•˜ë‚˜ëŠ” ì‚¬ìš©ìë¡œë¶€í„° ì…ë ¥ì„ ë°›ê³ , ê²°ê³¼ë¥¼ ë‹¤ì‹œ ì‚¬ìš©ìì—ê²Œ ë°˜í™˜í•˜ëŠ” ê²ƒ
- ì´ë¥¼ ìœ„í•´ ë˜ ë‹¤ë¥¸ ê°ì²´ê°€ ì¡´ì¬ 
	- **boundary object** (ex. dto)
		- Use caseë¥¼ delivery ë§¤ì»¤ë‹ˆì¦˜ìœ¼ë¡œë¶€í„° ê²©ë¦¬
		- Use caseë¥¼ delivery ë§¤ì»¤ë‹ˆì¦˜ ê°„ì˜ í†µì‹  ìˆ˜ë‹¨ ì œê³µ
		- MVC / Console / Thick Client ë“±ì€ Boundaryì˜ ë°˜ëŒ€í¸ì— ì¡´ì¬
		- Use caseëŠ” ì´ëŸ¬í•œ Delivery ë§¤ì»¤ë‹ˆì¦˜ì— ëŒ€í•´ ëª¨ë¥¸ì²´ Boundaryì˜ ë˜ ë‹¤ë¥¸ ë°˜ëŒ€í¸ì— ì¡´ì¬

**Partitioning - Flow**
- Delivery ë§¤ì»¤ë‹ˆì¦˜
	- ì‚¬ìš©ì ìš”ì²­ ìˆ˜ì§‘ 
	- ìš”ì²­ì„ í‘œì¤€ì ì¸ í˜•ì‹(RequestModel)ìœ¼ë¡œ í‘œí˜„ 
	- Boundaryë¥¼ í†µí•´ RequestModelì„ Interactorì— ì „ë‹¬
- Interactors 
	- applications íŠ¹í™”ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰
	- entityë¥¼ ì¡°ì‘í•˜ì—¬ application ë…ë¦½ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰
	- ê²°ê³¼ë¥¼ ìˆ˜ì§‘
	- í‘œì¤€ì ì¸ í˜•ì‹(ResultModel) ìƒì„±
	- Boundaryë¥¼ í†µí•´ ë‹¤ì‹œ Delivery ë§¤ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ì „ë‹¬


**Use Cases and Partitioning**
- ìš°ë¦¬ëŠ” ì‹œìŠ¤í…œì˜ í–‰ìœ„ë¥¼ use caseë¡œ ê¸°ìˆ í•œë‹¤
	- Use caseì—ì„œ application íŠ¹í™”ëœ í–‰ìœ„ë¥¼ interactor ê°ì²´ë¡œ ìº¡ì³í•œë‹¤
	- application ë¬´ê´€í•œ í–‰ìœ„ë¥¼ entity ê°ì²´ë¡œ ìº¡ì³í•˜ê³  interactorë¡œ ì œì–´í•œë‹¤
	- UI ì¢…ì†ì ì¸ í–‰ìœ„ëŠ” Boundary ê°ì²´ë¡œ ìº¡ì³í•˜ì—¬ intractorì™€ ì»¤ë®¤ë‹ˆì»¤ì—ì‹œë…€í•œë‹¤. 

ì˜ì¡´ì„±ì€ ë‹¨ë°©í–¥, ë°ì´í„°ë² ì´ìŠ¤ë„ ê²©ë¦¬ì™€ DIP ì ìš©


**Case Study**
- ğŸ“š "Agile Software Development - Principles, Patterns and Practices" - SOLID, Design Patterns, Agile Practices
- ğŸ“š Payroll System 
	- https://www.amazon.com/Software-Development-Principles-Patterns-Practices/dp/0135974445
	- https://github.com/FreekPaans/PPPPayrollCaseStudy


ìœ ìŠ¤ì¼€ì´ìŠ¤ ì„¤ê³„, Delivery ë©”ì»¤ë‹ˆì¦˜ì€ ì´ëƒã„´ ë¬´ì‹œ


**Conclusion**
- ğŸ“š "Agile Software Development - Principles, Patterns and Practices" - SOLID, Design Patterns, Agile Practices
- ArchitecturesëŠ” íˆ´ì´ë‚˜ í”„ë ˆì„ì›Œí¬ì— ê¸°ë°˜í•˜ì§€ ì•ŠëŠ”ë‹¤
- ì¢‹ì€ ArchitecturesëŠ”
	- íˆ´ì´ë‚˜ í”„ë ˆì„ì›Œí¬ì— ëŒ€í•œ ê²°ì •ì„ ì•„ì£¼ ì˜¤ë«ë™ì•ˆ ë¯¸ë£¸
	- ì´í–‰ë˜ì§€ ì•ŠëŠ” ê²°ì •ì˜ ê°¯ìˆ˜ë¥¼ ìµœëŒ€í™” 
	- delivery ë§¤ì»¤ë‹ˆì¦˜ì— ì˜ì¡´í•˜ì§€ ì•Šê³ , ë…¸ì¶œì‹œí‚¤ì§€ ì•Šê³  ìˆ¨ê¹€
- ì‹œìŠ¤í…œì˜ ëª¨ì–‘ì„ ë³´ë©´ ì›¹ ì‹œìŠ¤í…œì¸ì§€ ì—¬ë¶€ë¥¼ ì•Œ ìˆ˜ ì—†ì–´ì•¼ í•¨
- ì‹œìŠ¤í…œì˜ use caseëŠ” ì£¼ìš”í•œ ì¶”ìƒí™”(primary abstraction)ì´ê³  ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ êµ¬ì„±í•˜ëŠ” í•µì‹¬ì ì¸ ì›ì¹™
- ì•„í‚¤í…ì³ë¥¼ ë³´ë©´ UIê°€ ì•„ë‹ˆë¼ ì‹œìŠ¤í…œì˜ ì˜ë„ë¥¼ ë³¼ ìˆ˜ ìˆì–´ì•¼ í•¨
- Use case ì§€í–¥ ì•„í‚¤í…ì³ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ì•¼ì½¥ìŠ¨ì˜ Boundary, Interactor, Entity partitionì„ ë°°ì› ë‹¤.
- Interactorê°€ use caseë¥¼ ìº¡ìŠí™”í•˜ê³  entityëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ê°ì²´ë¥¼ ìº¡ìŠí™”í•˜ê³ , boundaryëŠ” UIì™€ ê²©ë¦¬ë¥¼ ì œê³µ
- ê²©ë¦¬ë¥¼ ì–»ê¸° ìœ„í•´ applicationì„ delivery ì¸¡ê³¼ ë¶„ë¦¬í•˜ëŠ” boundary ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±


**Who is the Architect?**
- ìƒëµ..

---

## 12. SOLID Foundation

> ëŒ€ë¶€ë¶„ ì´ë¡ ì ì¸ ì„¤ëª…

**The Source Code is Design**
- ì†Œí”„íŠ¸ì›¨ì–´
	- ì €ë ´í•œ êµ¬ì¶• ë¹„ìš© (ì»´íŒŒì¼, ë¹Œë“œ)
	- ë¹„ì‹¼ ì„¤ê³„ ë¹„ìš©(ì†ŒìŠ¤ ì½”ë“œ ì‘ì„±)
- ë°˜ë©´, ê±´ë¬¼/íšŒë¡œ/ê¸°ê³„
	- ì €ë ´í•œ ì„¤ê³„ ë¹„ìš©
	- ë¹„ì‹¼ ìˆ˜ì • ë¹„ìš©


**Design Smells**
- `Rigidity` (ê°•ì§ì„±, ê²¬ê³ í•¨)
- `Fragility` (ì·¨ì•½ì„±)
- `Immobility` (ë¶€ë™ì„±)
- `Viscosity` (ì ì„±)

`Rigidity`
- ì‹œìŠ¤í…œ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•´ ë³€ê²½í•˜ê¸° ì–´ë ¤ì›Œì§€ëŠ” ê²ƒ 
		- ê²°í•©ë„ê°€ ë†’ì•„ì„œ ë³€ê²½ì‹œ ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ, ìˆ˜ì •í•  ê³³ì´ ë§ì•„ì§„ë‹¤ëŠ”ê±°ë„¤
- Rigidí•˜ê²Œ í•˜ëŠ” ì›ì¸
	- ë§ì€ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” í…ŒìŠ¤íŠ¸ì™€ ë¹Œë“œ
	- ì „ì²´ ë¦¬ë¹Œë“œë¥¼ ìœ ë°œí•˜ëŠ” ì•„ì£¼ ì‘ì€ ë³€í™”
- í…ŒìŠ¤íŠ¸ì™€ ë¦¬ë¹Œë“œ ì‹œê°„ì„ ì¤„ì´ë©´
	- Rigidityë¥¼ ì¤„ì´ê³ 
	- ìˆ˜ì •ì´ ìš©ì´í•´ì§

`Fragility`
- í•œ ëª¨ë“ˆì˜ ìˆ˜ì •ì´ ë‹¤ë¥¸ ëª¨ë“ˆì— ì˜í–¥ì„ ë¯¸ì¹  ë•Œ
- ex. ìë™ì°¨ë¥¼ swë¡œ ì œì–´
	- ë¼ë””ì˜¤ ë²„íŠ¼ì„ ìˆ˜ì •í•˜ëŠ”ë° ìë™ ì°½ë¬¸ì´ ì˜í–¥ì„ ë°›ëŠ”ë‹¤
- í•´ê²°ì±…
	- ëª¨ë“ˆê°„ì˜ ì˜ì¡´ì„±ì„ ì œê±°í•œë‹¤

`Immobility`
- ëª¨ë“ˆì´ ì‰½ê²Œ ì¶”ì¶œë˜ì§€ ì•Šê³  ì¬ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê²½ìš°
- ex. ë¡œê·¸ì¸ ëª¨ë“ˆì´ íŠ¹ì • DBì˜ Schemaë¥¼ ì‚¬ìš©í•˜ê³ , íŠ¹ì • UI Skinì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
	- ì´ ë¡œê·¸ì¸ ëª¨ë“ˆì€ ë‹¤ë¥¸ ì‹œìŠ¤í…œì—ì„œ ì¬ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê²ƒ 
	- ì´ ë¡œê·¸ì¸ ëª¨ë“ˆì€ Immobileí•˜ë‹¤ë¼ê³  í‘œí˜„ 
- í•´ê²°ì±…
	- DB, UI, Framework ë“±ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ê²ƒ

`Viscosity`
- ë¹Œë“œ/í…ŒìŠ¤íŠ¸ ê°™ì€ í•„ìˆ˜ ì˜¤í¼ë ˆì´ì…˜ë“¤ì´ ì˜¤ë˜ ê±¸ë ¤ ìˆ˜í–‰ì´ ì–´ë µë‹¤ë©´ ê·¸ ì‹œìŠ¤í…œì€ ì—­ê²¨ìš´ (disgust) ê²ƒ
	- ì²´í¬ì¸, ì²´í¬ì•„ì›ƒ, ë¨¸ì§€ ë“±ì€ ë¹„ìš©ì´ í¬ê³  ì—­ê²¨ì›€ 
	- ì—¬ëŸ¬ ë ˆì´ì–´ë¥¼ ê°€ë¡œì§ˆëŸ¬ ì˜ì¡´ì„±ì„ ê°–ëŠ” ê²ƒì€ ì—­ê²¨ì›€
- í•­ìƒ ê°™ì€ ì—­ê²¨ì›€ì˜ ì›ì¸ 
	- Irresponsible tolerance (**ë¬´ì±…ì„í•œ ìš©ì¸**) â¡ï¸ ê°œì¸ì ìœ¼ë¡œ ì¢‹ì€ ë¶€ë¶„
		- ë‚˜ë¹ ì§ˆê±°ë¼ëŠ” ê±¸ ì•„ëŠ”ë° ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ ğŸ’©
		- ë°”ì˜ë‹ˆê¹ .. ì–´ì©”ìˆ˜ì—†ìœ¼ë‹ˆê¹ .. íƒ€í˜‘í•˜ê³  ì“°ë ˆê¸° ì½”ë“œë¥¼ ì‘ì„±
		- ê²°êµ­ ë¶€ì±„ê°€ ìŒ“ì„
- ê°•í•˜ê²Œ ouplingëœ ì‹œìŠ¤í…œì€ í…ŒìŠ¤íŠ¸, ë¹Œë“œ, ìˆ˜ì •ì„ ì–´ë µê²Œ í•œë‹¤
- í•´ê²°ì±…
	- dependencyëŠ” ìœ ì§€í•œì±„, decoupling í•˜ëŠ” ê²ƒ ğŸ¤”


**Needless Complexity** (ë¶ˆí•„ìš”í•œ ë³µì¡ì„±âœ¨)
- SW ì„¤ê³„ì˜ ì´ìŠˆ 
	- ë¯¸ë˜ë¥¼ ì–´ë–»ê²Œ ë‹¤ë£¨ë‚˜ 
- í˜„ì¬ ìš”êµ¬ì‚¬í•­ë§Œ êµ¬í˜„ vs ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•˜ì—¬ êµ¬í˜„ 
	- ì•ìœ¼ë¡œì˜ í™•ì¥ì„ ê³ ë ¤í•˜ì—¬ ì„¤ê³„?
		- ë¶ˆí•„ìš”í•˜ê²Œ ì‹œìŠ¤í…œ ë³µì¡ë„ ğŸ†™
		- ê°œë°œìëŠ” í˜„ì¬ë¥¼ ì œì–´í•  ìˆ˜ ì—†ìŒ
- ë¶ˆí•„ìš”í•œ ë³µì¡í•¨ì€ ê°•í•œ ì»¤í”Œë§ì„ ìœ ë°œ 
- í•´ê²° ë°©ë²•
	- **í˜„ì¬ ìš”êµ¬ ì‚¬í•­ì— ì§‘ì¤‘**í•œë‹¤ğŸ‘


> Code Rot , í‚¤ë³´ë“œ ì…ë ¥ì— ëŒ€í•œ ì˜ˆì œ (ìƒëµ)
> - ì¥ì¹˜ ì¶”ê°€ì— ë”°ë¥¸ ë³€ê²½ì´ ë°œìƒ
> - OOP êµ¬í˜„


**OOP**
- High Level dont depend on Low level
	- êµ¬í˜„ì²´ëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´ (ìº¡ìŠí™”)
	- ì…ì¶œë ¥ ê¸°ê¸°ê°€ ì¶œë ¥ë˜ë”ë¼ë„ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë§Œ ë³€ê²½í•˜ë©´ ë¨
- Dependency Inverted, ì˜ì¡´ì„± ì—­ì „ ë°œìƒ


**What is OO?**
- Dynamic polymorphism
	- ì¸í„°í˜ì´ìŠ¤ê°€ ìš”êµ¬í•˜ëŠ” ë¬´ì—‡ì¸ê°€ ì „ë‹¬í•˜ë©´ ë‚´ê°€ ì›í•˜ëŠ” ëŒ€ë¡œ ì˜ ë™ì‘í• ê±°ë‹¤
- OOëŠ” ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒğŸ“¬
	- ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ëª¨ë¥´ê³ 
	- ë¬´ì—‡ì„ ì›í•˜ëŠ”ì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒ
- `Dependency Inversion`ì´ OOì˜ ì •ìˆ˜
- OOëŠ” ì‹¤ì„¸ê³„ë¥¼ ë˜‘ê°™ì´ ëª¨ë¸ë§ í•˜ëŠ” ê²ƒì´ë‹¤ 
	- Inheritance(ìƒì†), Encapsulation(ìº¡ìŠí™”), Polymorphism(ë‹¤í˜•ì„±)
	- ì´ê²ƒì€ OOì˜ í•µì‹¬ì´ ì•„ë‹ˆë¼ ë©”ì»¤ë‹ˆì¦˜
- OOì˜ í•µì‹¬ì€
	- **IoCë¥¼ í†µí•´ ìƒìœ„ ë ˆë²¨ì˜ ëª¨ë“ˆì„ í•˜ìœ„ ë ˆë²¨ì˜ ëª¨ë“ˆë¡œë¶€í„° ë³´í˜¸í•˜ëŠ” ê²ƒ** âœ¨
	- Inverted structure tends not to rot
- OOD
	- Dependency Management
	- `Inversion of key dependencies that isolate the high level policies from low level details`

> Dependency Management, ì˜ì¡´ì„± ê´€ë¦¬ë¥¼ ìœ„í•´ ì¤‘ìš”í•œ ê·œì¹™ì´ **SOLID**ì´ë‹¤


## 13. SRP(Single Responsibility Principle)

> Actorê°€ í¬ì¸íŠ¸

- í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ì„ ê°€ì ¸ì•¼ í•œë‹¤
- ì±…ì„ì€ ë¬´ì—‡ì¸ê°€? 
	- **ë¶€ë¥˜**ë¡œ êµ¬ë¶„
		- ë©”ì†Œë“œì˜ Clientì— ì˜í•´ ê²°ì •
		- ëˆ„ê°€ í•´ë‹¹ ë©”ì†Œë“œì˜ ë³€ê²½ì„ ìœ ë°œí•˜ëŠ” **ì‚¬ìš©ì**ì¸ê°€ âœ…
			- ì´ëŸ°ê±¸ë¡œ ë©”ì†Œë“œë¥¼ **ê·¸ë£¹í•‘** í•  ìˆ˜ ìˆë‹¤

**It's About Users** 
- SRPëŠ” ì‚¬ìš©ì(Actor)ì— ê´€í•œ ê²ƒì´ë‹¤ 
- ì±…ì„ 
	- `ë³€ê²½ì˜ ê·¼ì›`ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤
	- SWì˜ ë³€ê²½ì„ ìš”ì²­í•˜ëŠ” íŠ¹ì • ì‚¬ìš©ìë“¤ì— ëŒ€í•´ í´ë˜ìŠ¤/í•¨ìˆ˜ê°€ ê°–ëŠ” ê²ƒ
- ì˜ˆì œ. Employee í´ë˜ìŠ¤ì˜ ë³€ê²½ì„ ìš”êµ¬í•˜ëŠ” ì‚¬ìš©ìë“¤
	- Actor: ì„œë¡œ ë‹¤ë¥¸ Needs, Expectation(ê¸°ëŒ€ì¹˜)ì„ ê°€ì§
	- 3ê°œì˜ ì•¡í„°ê°€ ìˆë‹¤
		- Policy, Architect, Operations 
- Userë“¤ì€ ê·¸ë“¤ì´ ìˆ˜í–‰í•˜ëŠ” Roleì— ë”°ë¼ ë‚˜ë‰¨
- Userê°€ íŠ¹ì • Roleì„ ìˆ˜í–‰í•  ë•Œ Actorë¼ê³  ë¶€ë¥¸ë‹¤
	- ì±…ì„ì€ ê°œì¸ì´ ì•„ë‹ˆë¼ ì•¡í„°ì™€ ì—°ê²° 


> [!note] Responsibility (ì±…ì„) 
> - íŠ¹ì • ì•¡í„°ì˜ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±ì‹œí‚¤ê¸° ìœ„í•œ ì¼ë ¨ì˜ í•¨ìˆ˜ì˜ ì§‘í•©
> - Actorì˜ ìš”êµ¬ì‚¬í•­ ë³€ê²½ì´ ì¼ë ¨ì˜ í•¨ìˆ˜ë“¤ì˜ ë³€ê²½ì˜ ê·¼ì›ì´ ëœë‹¤


**SWì˜ ë‘ê°€ì§€ ê°€ì¹˜**
- Primary and Secondary Valueë¡œ êµ¬ë¶„ 
- ë³´í†µ Secondary Valueë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í•œë‹¤ 
	- `Secondary Value of SW is it's behavior`
	- í˜„ì¬ì˜ SWê°€ í˜„ì¬ ì‚¬ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ëŠ”ê°€?
- ì‹¤ì œë¡œ ì¤‘ìš”í•œê±´ Primary Value of SW ì´ë‹¤
	- ì§€ì†ì ìœ¼ë¡œ ë³€í™”í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì„ ìˆ˜ìš©(tolerate, facilitate)í•˜ëŠ” ê²ƒ 
	- ëŒ€ë¶€ë¶„ì˜ SWì˜ ê²½ìš° í˜„ì¬ì˜ ìš”êµ¬ì‚¬í•­ì„ ì˜ ë§Œì¡±í•˜ì§€ë§Œ ë³€ê²½í•˜ê¸´ ì–´ë µë‹¤

**Collision**(ì¶©ëŒ)
- Primary Value ì €í•˜
- Actorë“¤ì˜ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ì˜ì¡´í•˜ê³  ìˆëŠ” ë™ì¼ ëª¨ë“ˆì˜ ë³€ê²½ì´ ë°œìƒ 
	- Merge ì¶©ëŒ, Source Repo ì¶©ëŒì´ë¼ê³ ë„ í‘œí˜„

**Fan Out ë¬¸ì œ**
- í•˜ë‚˜ì˜ í´ë˜ìŠ¤ê°€ ë„ˆë¬´ ë§ì€ ì±…ì„ì„ ê°€ì§
- Empolyee í´ë˜ìŠ¤ì— ê±°ëŒ€í•œ Fan Outì´ ì¡´ì¬ (ì˜ˆì œ. í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ )
	- ë³€ê²½ì— ë¯¼ê°
- Fan Outì€ ì œí•œí•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ 
	- **ì¢‹ì€ ë°©ë²•ì€ ì±…ì„ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ë‹¤**âœ¨

**Collocation is Coupling**
- Operations Actor ê°€ ìƒˆë¡œìš´ ë¦¬í¬íŠ¸ ê¸°ëŠ¥ì„ í•„ìš”ë¡œ í•  ë•Œ
	- ìƒˆë¡œìš´ ë¦¬í¬íŠ¸ ê¸°ëŠ¥ë„ Employee í´ë˜ìŠ¤ì— ì¶”ê°€í•œë‹¤ 
	- ê¸°ì¡´ ì±…ì„(Policy, Architecure = í´ë¼ì´ì–¸íŠ¸, ì•¡í„°)ì—ëŠ” ë³€ê²½ì´ ì—†ìŒì—ë„ ìƒˆë¡œìš´ ë¦¬í¬íŠ¸ê°€ ì¶”ê°€ë˜ì–´ Employee í´ë˜ìŠ¤ê°€ ë³€ê²½ëœë‹¤
	- ìƒˆë¡œìš´ ë¦¬í¬íŠ¸ ê¸°ëŠ¥ì´ Employee í´ë˜ìŠ¤ì— ì¶”ê°€ë˜ë©´ ì´ ê¸°ëŠ¥ì„ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ” Employee í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  í´ë˜ìŠ¤ë“¤ì´ ë‹¤ì‹œ ì»´íŒŒì¼/ë°°í¬ë˜ì–´ì•¼ í•œë‹¤
	- ê²°ê³¼ì ìœ¼ë¡œ ëª¨ë“  ì•¡í„°ë“¤ì´ ì˜í–¥ì„ ë°›ê²Œ ëœë‹¤ (ë¦¬í¬íŠ¸ ê¸°ëŠ¥ë§Œ ì¶”ê°€í–ˆëŠ”ë° .. )
- `Collocation of responsibilities coules the actors`

**SRP**
- í•˜ë‚˜ì˜ ëª¨ë“ˆì€ ë°˜ë“œì‹œ í•˜ë‚˜ì˜ ë³€ê²½ ì‚¬ìœ ë¥¼ ê°€ì ¸ì•¼ í•œë‹¤
- `í•˜ë‚˜ì˜ ëª¨ë“ˆì€ í•˜ë‚˜ì˜ í´ë¼ì´ì–¸íŠ¸, ì•¡í„°ì—ê²Œë§Œ ì„œë¹™í•´ì•¼ í•œë‹¤`
- `One and only one responsibility`
	- ë™ì¼í•œ ì´ìœ ë¡œ ë³€ê²½ë˜ì–´ì•¼ í•˜ëŠ” ê²ƒë“¤ì€ ë™ì¼ ëª¨ë“ˆì—
	- ë‹¤ë¥¸ ì´ìœ ë¡œ ë³€ê²½ë˜ì–´ì•¼ í•˜ëŠ” ê²ƒë“¤ì€ ë‹¤ë¥¸ ëª¨ë“ˆì—

**SRPëŠ” ì‹œìŠ¤í…œ ì„¤ê³„í•  ë•Œ ì‹ë³„í•˜ê¸° ì¢‹ë‹¤**
- Actor íŒŒì•…ì— ì£¼ì˜í•´ì•¼ í•¨ 
- Actor ë“¤ì€ serveí•˜ëŠ” ì±…ì„ë“¤ì„ ì‹ë³„ 
- ì±…ì„ì„ ëª¨ë“ˆì— í• ë‹¹ 
	- ê° ëª¨ë“ˆì´ ë°˜ë“œì‹œ í•˜ë‚˜ì˜ ì±…ì„ì„ ê°–ë„ë¡ ìœ ì§€
- ë¶„ë¦¬ì˜ ì´ìœ 
	- ë‹¤ë¥¸ ì´ìœ ë¡œ ì¸í•´ ë³€ê²½ë˜ê³ , ë‹¤ë¥¸ ì‹œì ì— ë³€ê²½ë˜ê¸° ë•Œë¬¸


> **í•´ê²°ì±…**
> 1. ì¸í„°í˜ì´ìŠ¤ë¥¼ í•˜ë‚˜ ë¹¼ì„œ Inverted Dependencise í•œë‹¤. (ê°€ì¥ ê°„ë‹¨)
> 2. Extract Classes í•˜ì—¬ 3ê°œë¡œ ë¶„ë¦¬ 
>    â¡ï¸ ì´ë•Œ ë¬¸ì œì ì€ Empolyee ê°œë…ì´ 3ê°œì˜ ì¡°ê°ìœ¼ë¡œ ë¶„ë¦¬ë¨ (ë³µì¡ë„ ìƒìŠ¹)
> 
> `1,2` ë‘ í•´ê²°ì±…ì„ í•©ì³ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤
> 
> 3. Facade : ì–´ë””ì— êµ¬í˜„ë˜ì—ˆëŠ”ì§€ ì°¾ê¸° ì‰½ë‹¤, ë‹¨ì ì€ Actorë“¤ì´ ì—¬ì „íˆ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ì˜ì¡´
> 4. Interface Segregation (ì´ê²Œ ì œì¼ ì¢‹ì§€ë§Œ ë³µì¡ë„ ìƒìŠ¹)
>    ì¥ì : Actorë“¤ì€ ì™„ì „íˆ decoupled
>    ë‹¨ì : ì–´ë””ì— êµ¬í˜„ë˜ì—ˆëŠ”ì§€ ì°¾ê¸° ì–´ë µë‹¤, í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— êµ¬í˜„ë˜ì–´ êµ¬í˜„ì€ coupled
>    
> ì •ë‹µì€ ì—†ë‹¤. ìƒí™©ì— ë§ëŠ” ìµœì„ ì˜ ì„ íƒì„ ë°˜ë³µí•  ë¿ ğŸ‘


**Case Study - Architecture**
- ê° íŒ¨í‚¤ì§€ëŠ” ê° ì•¡í„°ë“¤ì„ ìœ„í•œ ì±…ì„ì„ êµ¬í˜„ 
- íŒ¨í‚¤ì§€ ê°„ì˜ ì˜ì¡´ì„± ë°©í–¥ì— ì£¼ì˜ 
- ì´ ì„¤ê³„ëŠ” ì¢‹ì€ ì•„í‚¤í…ì²˜ì´ë‹¤ (ê²Œì„ ê´€ë ¨ ì˜ˆì œì¸ë°, í´ë˜ìŠ¤/íŒ¨í‚¤ì§€ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œë§Œ ì„¤ëª…)
- ê° í´ë˜ìŠ¤/íŒ¨í‚¤ì§€ëŠ” í•˜ë‚˜ì˜ ì•¡í„°ë§Œì„ ìœ„í•œ ê¸°ëŠ¥ì„ ì œê³µ
	- íŒ¨í‚¤ì§€ëŠ” ì§‘í•©ì¸ ë“¯í•˜ë‹¤

**ì‹¤ì œë¡œ í•œ ê²ƒ(ì„¤ëª…ë§Œ)**
- ì œì¼ ë¨¼ì € í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê³  í†µê³¼í•˜ë„ë¡ í•¨
- ìŠ¤ì½”ì–´ë¥¼ ê³„ì‚°í•˜ëŠ” ë™ì‘ í•¨ìˆ˜ë¥¼ í•˜ë‚˜ ë§Œë“¦
- ì¶”ì¸¡í•˜ëŠ” ë¡œì§ì„ ìœ„í•œ ë™ì‘ í•¨ìˆ˜ë¥¼ ë§Œë“¦
- ì„¤ê³„ê°€ ë“œëŸ¬ë‚  ë•Œê¹Œì§€ í•¨ìˆ˜ë¥¼ ë¦¬íŒ©í„°ë§í•œë‹¤ 
- ë™ì‘í•˜ëŠ” ì „ì²´ ê²Œì„ì„ ì–»ì„ë•Œê¹Œì§€ ëª¨ë“  ë™ì‘ë“¤ì´ í…ŒìŠ¤íŠ¸ì— ì„±ê³µí•˜ë„ë¡ ì„¤ê³„ë¥¼ ì ìš©
- ê·¸ë¦¬ê³  ì•„í‚¤í…ì²˜ë¥¼ ì‚´íˆë‹¤. 
	- í…ŒìŠ¤íŠ¸ê°€ ë‹¹ì‹ ë“¤ì—ê²Œ ë³´ì—¬ì¤€ ì„¤ê³„ì˜ 80%ë¥¼ ìœ ë„í–ˆë‹¤
- ê·¸ë¦¬ê³  í…ŒìŠ¤íŠ¸ê°€ 3ê°œì˜ ì±…ì„ì„ ì‹ë³„í•˜ëŠ” ê²ƒì„ ë„ì™”ë‹¤
- Unit Testê°€ í™•ë³´ëœ í›„ì— ë¬´ì°¨ë³„ì ì¸ ë¦¬íŒ©í„°ë§ì„ ìˆ˜í–‰í•œë‹¤
	- ë””ìì¸ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´ì„œ
- ì´ëŸ° í›„ì—ë§Œ 3ê°œì˜ ì•¡í„°ë“¤ì´ ì‹ë³„ëœë‹¤ âœ¨
	- ê·¸ëŸ¬ë©´ í´ë˜ìŠ¤ë“¤ì„ 3ê°œì˜ íŒ¨í‚¤ì§€ë¡œ ë¶„ë¦¬ì‹œí‚¨ë‹¤
- ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ìœ ë‹¤ì´ì–´ê·¸ë¨ë“¤ì„ ê·¸ë¦°ë‹¤
	- ì´ìœ ë‹¤ì´ì–´ê·¸ë¨ì„ ê·¸ë¦¬ê¸° ê°€ì¥ ì¢‹ì€ ë•ŒëŠ” ì™„ë£Œëœ í›„ì´ë‹¤
		- ì²˜ìŒì—ëŠ” í™”ì´íŠ¸ë³´ë“œì— ê°€ë³ê²Œ ë¸Œë ˆì¸ ìŠ¤í† ë°ì„ í•˜ê³  ì§€ìš´ë‹¤


## 14.1 OCP(Open-Closed Principle)

> OCPì— ëŒ€í•´ ì„¤ëª…í•˜ë©´ì„œ í˜„ì‹¤ì ì¸ ì„¤ê³„ ë°©ë²•ì— ëŒ€í•´ ì ì§„ì ìœ¼ë¡œ ì„¤ëª…í•œë‹¤

- í™•ì¥ì—ëŠ” ì—´ë ¤ìˆê³ , ë³€ê²½ì—ëŠ” ì—´ë ¤ìˆë‹¤ 
	- **í™•ì¥**: ìƒˆë¡œìš´ íƒ€ì…ì„ ì¶”ê°€í•˜ì—¬ ê¸°ëŠ¥ì„ ì¶”ê°€
- But Closed For modification
	- `High Level Policy shouldnt be modified`
	- ìƒìœ„ ë ˆë²¨ ì •ì±…ì€ ë³€ê²½ë˜ë©´ ì•ˆëœë‹¤


**Copy Example**
- Abstraction and Inversion
	- insert abstract interface between copy and device
	- cause the inverted dependencies
- ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ê³  êµ¬í˜„ì²´ë¥¼ ëŸ°íƒ€ì„ì— ìœ ì—°í•˜ê²Œ ê°ˆì•„ ë¼ìš´ë‹¤
- í™•ì¥ì´ í•„ìš”í•œ í–‰ìœ„ë¥¼ `Abstraction` í•œë‹¤
	- ë””ë°”ì´ìŠ¤ê°€ ì¶”ê°€ë˜ë©´ í•´ë‹¹ ë””ë°”ì´ìŠ¤ë¥¼ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•œë‹¤ 
	- `open for extension`
- í•˜ì§€ë§Œ copyë¡œì§ì˜ ìˆ˜ì •ì„ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤ 
	- `closed for modification`

> ì½”ë“œ ë ˆë²¨ ì˜ˆì‹œëŠ” ìˆì§€ë§Œ í•˜ì§€ ì•ŠìŒ .
> Copy í´ë˜ìŠ¤ì— êµ¬í˜„ëœ ë©”ì„œë“œë¥¼ ì¶”ìƒ ì¸í„°í˜ì´ìŠ¤ë¡œ ì¶”ì¶œí•´ì„œ ì¸ìë¡œ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•œë‹¤ (OCP)


**POS Example**
- ë¶€ë¶„ ì½”ë“œ ì˜ˆì‹œ ì£¼ì–´ì§ 
- í˜„ì°°ì„ ë°›ëŠ” ê²½ìš°ëŠ” ì˜ ë™ì‘í•˜ì§€ë§Œ, ì‹ ìš©ì¹´ë“œë¥¼ ë°›ê³ ì í•  ë•ŒëŠ” í™•ì¥ì„ í•´ì•¼ í•œë‹¤
	- í™•ì¥ì„ ìœ„í•´ ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì€ OCP ìœ„ë°˜ğŸ’©
	- í•´ê²°ì±…ì€ í™•ì¥ì´ í•„ìš”í•œ í–‰ìœ„ë¥¼ **Abstraction** í•œë‹¤

**Is This Possible?**
- OCPë¥¼ ì¤€ìˆ˜í•˜ë©´ Modificationì„ ì™„ë²½í•˜ê²Œ ì œê±°í•  ìˆ˜ ìˆë‚˜?
	- ì´ë¡ ì ìœ¼ë¡œ OKì´ë‚˜ But ë¹„ì‹¤ìš©ì ì´ë‹¤
- 2ê°€ì§€ ë¬¸ì œ ìˆë‹¤
	- main partition
	- Crystal ball problem

> A Smelly Desin - ë¹„ìš© ì¶œë ¥ ì˜ˆì œê°€ ê¹ƒí—ˆë¸Œì— ìˆë‹¤ê³  í•¨ (`printReport()`)

**De-Orderizing the Design** (ì§ì ‘ í•´ë³´ê¸°âœ¨)
- ì›ë³¸ ì˜ˆì œ: https://github.com/unclebob/Episode-10-ExpenseReport
- ê°•ì˜: https://github.com/msbaek/expense
	- ì›ë³¸  ì˜ˆì œì—ì„œ ë¦¬íŒ©í„°ë§ ì „ ì½”ë“œë¥¼ ì¹´í”¼í•œ í›„ ê°•ì˜ ì €ì¥ì†Œ ë³´ë©´ì„œ ë¦¬íŒ©í„°ë§ ìˆ˜í–‰

**The Lie (ê±°ì§“ë§)**
- ê³ ê°ì´ ì£¼ë§(ë‚ ì§œ ê°œë…), Transportation ê´€ë ¨ëœ **ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ìš”êµ¬í•˜ë©´ ëŒ€ì±…ì´ ì—†ë‹¤**
- ì•„ë¬´ë„ ì´ëŸ° ì–˜ê¸¸ í•´ì£¼ì§€ ì•Šì•„ì„œë‹¤. **ë§Œì¼ ë¯¸ë¦¬ ì–˜ê¸°í•´ ì¤¬ë‹¤ë©´** ì´ëŸ° ìš”êµ¬ì‚¬í•­ì„ ìˆ˜ìš©í•  ìˆ˜ ìˆë„ë¡ **Abstractionì„ ì ìš©í–ˆì„ ê²ƒ**ì´ë‹¤.
- ë‚´ê°€ **ì•Œì•˜ë”ë¼ë©´ OCPë¥¼ ì¤€ìˆ˜í•˜ë„ë¡ í–ˆì„í…ë°**. ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ìˆ˜ì •ì—†ì´ í™•ì¥í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ í–ˆì„ ê²ƒì´ë€ ë§ì´ë‹¤. `ë‚´ê°€ ë¯¸ë¦¬ ì•Œì•˜ë”ë¼ë©´ ë§ì´ë‹¤`
- ê·¸ëŸ¼ **OCPëŠ” ì•ìœ¼ë¡œ ì–´ë–¤ í™•ì¥ì´ í•„ìš”í•  ì§€ ì•Œì•„ì•¼ë§Œ ì œëŒ€ë¡œ í•  ìˆ˜ ìˆë‹¤ëŠ” ë§ì¸ê°€?**

> [!note] ê³ ê°ì€ ìê¸°ê°€ ë§Œì ¸ë³´ê¸° ì „ì— ìê¸°ê°€ ì›í•˜ëŠ”ê²Œ ë¬´ì—‡ì¸ì§€ ëª¨ë¥¸ë‹¤ (fact)

- ë‹¹ì‹ ì´ ì•„ë¬´ë¦¬ ì˜ ì°¾ê³ , ì˜ ì˜ˆì¸¡í•´ë„ ê³ ê°ì€ **ë°˜ë“œì‹œ ë‹¹ì‹ ì´ ì¤€ë¹„í•˜ì§€ ëª»í•œ ê²ƒì— ëŒ€í•œ ê¸°ëŠ¥ ì¶”ê°€/ë³€ê²½ì„ ìš”êµ¬**í•œë‹¤. (`Unknown Unknowns`)
- ë¯¸ë˜ì˜ ë³€ê²½ìœ¼ë¡œë¶€í„° ë³´í˜¸ ë°›ë„ë¡ Abstractionì„ ì ìš©í•˜ì—¬ ì„¤ê³„í•˜ëŠ” ê²ƒì€ ì‰½ë‹¤. ë§Œì¼ ë¯¸ë˜ì— ì–´ë–¤ ë³€ê²½ì´ ìˆì„ì§€ ì•Œ ìˆ˜ ìˆë‹¤ë©´ ë§ì´ë‹¤. í•˜ì§€ë§Œ ìš°ë¦° ê·¸ëŸ° ë¯¸ë˜ë¥¼ ì•Œ ìˆ˜ ìˆëŠ” **Crystal ball**ì´ ì—†ë‹¤ (ì˜ˆì–¸í•˜ëŠ” êµ¬ìŠ¬)
- ê³ ê°ì€ ìš°ë¦¬ê°€ ë†“ì¹˜ê³  ì¤€ë¹„í•˜ì§€ ì•Šì€ ë¶€ë¶„ì— ëŒ€í•´ì„œ ë³€ê²½ì„ ìš”êµ¬í•˜ëŠ” ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆë‹¤. ğŸ˜‚ğŸ˜‚
- ì´ê²ƒì´ ì‚¬ëŒë“¤ì´ **ë§í•˜ê¸°ë¥¼ êº¼ë¦¬ëŠ” OCP, OODì— ëŒ€í•œ í•˜ë‚˜ì˜ ë”ëŸ¬ìš´ ë¹„ë°€**ì´ë‹¤
	- **OCP, OODëŠ” ë‹¹ì‹ ì´ ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆì„ ë•Œë§Œ í•´ë‹¹ ê¸°ëŠ¥ì„ ë³´í˜¸í•  ìˆ˜ ìˆë‹¤.**
- ê·¸ëŸ¼ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜?
	- ì§€ë‚œ 30ë…„ê°„ SW ì‚°ì—…ì€ ì´ ë¬¸ì œì™€ íˆ¬ìŸí•´ ì™”ë‹¤
	- ì´ëŸ¬í•œ ë…¸ë ¥ì˜ ì¼í™˜ìœ¼ë¡œ **Crystal Ballì˜ í•„ìš”ì„±ì„ ì œê±°í•˜ê¸° ìœ„í•œ 2ê°€ì§€ ì£¼ìš”í•œ ì ‘ê·¼ë²•ì„ ì‹ë³„**í–ˆë‹¤.


**ë°©ë²•1. Big Design Up Front(BDUF)**
- ë¯¸ë¦¬ ìµœëŒ€í•œì˜ ì„¤ê³„ë¥¼ í•œë‹¤ 
- ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ê³ ê°ê³¼ ë¬¸ì œ ì˜ì—­ì„ ê³ ì°°í•œë‹¤ 
- ê³ ê°ì˜ ìš”êµ¬ì‚¬í•­ì„ **ì˜ˆì¸¡í•˜ì—¬** ë„ë©”ì¸ ëª¨ë¸ì„ ë§Œë“ ë‹¤
- OCPê°€ ê°€ëŠ¥í•˜ë„ë¡ ë„ë©”ì¸ ëª¨ë¸ì— ì¶”ìƒí™”ë¥¼ ì ìš©í•œë‹¤
- ë³€ê²½ë  ê°€ëŠ¥ì„±ì´ ìˆëŠ” ëª¨ë“  ê²ƒë“¤ì— ëŒ€í•œ ì²­ì‚¬ì§„ì„ ì–»ì„ ë•Œê¹Œì§€ í—›ëœ ì§“ì„ ê³„ì†í•œë‹¤ 
- ë¬¸ì œ ğŸ’£
	- ëŒ€ë¶€ë¶„ì˜ ê²½ìš° í•„ìš”ì¹˜ ì•Šì€ ì¶”ìƒí™”ë¡œ ë„ë°°ëœ ë§¤ìš° í¬ê³ , ë¬´ê²ê³  ë³µì¡í•œ ì“°ë ˆê¸° ì„¤ê³„ë¥¼ ë§Œë“ ë‹¤
	- ì¶”ìƒí™”ëŠ” ìœ ìš©í•˜ê³  ê°•ë ¥í•œ ë§Œí¼ ë¹„ìš©ë„ í¬ë‹¤



> ì´ ë°©ë²•ì˜ ë‹¨ì ì€ êµ¬ì²´í™”ê°€ ë˜ê°€ë©´ ê³ ê°ì˜ ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ì´ ì¼ì–´ë‚˜ê²Œ ë˜ê³ , ê·¸ëŸ¼ ì¶”ìƒí™”, ì„¤ê³„ëŠ” ì“¸ëª¨ì—†ì–´ì§ ğŸ¤”


**ë°©ë²•2. Agile Design** (âœ¨í˜„ì‹¤ì  ë°©ë²•, ì¢‹ì€ë“¯)
- ì‹¤ìš©ì ì´ê³ , ë°˜ì‘ì„ í•˜ëŠ” ë°©ë²•
- ê°€ì¥ ì¢‹ì€ ì˜ˆì‹œë²•ì€ `ì€ìœ ë²•(ë©”íƒ€í¬)`ì´ë‹¤
- ì€ìœ ë²•
	- ì¼ë ¨ì˜ ë³‘ì‚¬ë“¤ì´ ì êµ°ì˜ ì‚¬ê²©ì— í¬ìœ„ëë‹¤ 
	- ì´íƒ„ì´ ë‚œë°œí•˜ê³  ìˆëŠ” ê°€ìš´ë° ì°¸í˜¸ì— ìˆ¨ì–´ìˆë‹¤
	- ì ì„ í–¥í•´ ì§‘ì¤‘ ì‚¬ê²©í•  ìˆ˜ ìˆìœ¼ë©´ ì „íˆ¬ì—ì„œ ìŠ¹ë¦¬í•œë‹¤ 
	- ë¬¸ì œëŠ” ì–´ë””ì— ì ì´ ìˆëŠ”ì§€ ëª¨ë¥¸ë‹¤ëŠ” ê²ƒì´ë‹¤ 
	- ì–´ë–¤ ë°©í–¥ì—ì„œ ì ë“¤ì´ ì´ì„ ì˜ëŠ”ì§€ ëª¨ë¥¸ë‹¤. ë§Œì¼ ì¼ì–´ë‚˜ì„œ ë°©í–¥ì„ ì‚´í´ë³´ë ¤ê³  í•œë‹¤ë©´ ì ì„ ì°¾ê³  ê²¨ëƒ¥í•˜ì§€ ì „ì— ì´ì— ë§ì„ ê²ƒì´ë‹¤.
	- How? Agile Design
		- ê·¸ë˜ì„œ ìƒì‚¬ê°€ ì‹¤í–‰ ê°€ëŠ¥í•œ ê²°ì •ì„ ë‚´ë¦°ë‹¤ 
		- "ì¡´ìŠ¨ ì¼ì–´ë‚˜". íƒ•íƒ•íƒ• ì´ì œ ì´ì•Œì´ ë‚ ì•„ì˜¨ ë°©í–¥ì„ ì•ˆë‹¤ 
- Agile Designì€ ì´ëŸ° ê²ƒì´ë‹¤ 
- **ìµœëŒ€í•œ ë¹¨ë¦¬ ê³ ê°ì˜ ìš”êµ¬ì‚¬í•­ì„ ëŒì–´ë‚¼ ìˆ˜ ìˆëŠ” ê°€ì¥ ë‹¨ìˆœí•œ ì¼ì„ í•œë‹¤**
- ê·¸ëŸ¼ **ê³ ê°ì€ ê·¸ ê²°ê³¼ë¬¼ì— ëŒ€í•´ ìš”êµ¬ì‚¬í•­ ë³€ê²½(ì‚¬ê²©)ì„ ì‹œì‘**í•œë‹¤
- ê·¸ëŸ¼ **ì–´ë–¤ ë³€ê²½ì´ ìš”êµ¬ë˜ëŠ”ì§€ ì•Œê²Œ ëœë‹¤.**

> ë³€ê²½ì„ ì˜ˆìƒ, ì¤€ë¹„í•˜ì§€ ë§ê³ 

- **ë³€í™”ì— ëŒ€í•œ ê°€ì¥ ì¢‹ì€ ì˜ˆì¸¡ì€ ë³€í™”ë¥¼ ê²½í—˜í•˜ëŠ” ê²ƒ**
- ë°œìƒí•  ê²ƒ ê°™ì€ ë³€í™”ë¥¼ ë°œê²¬í•œë‹¤ë©´ í–¥í›„ í•´ë‹¹ ë³€í™”ì™€ ê°™ì€ ì¢…ë¥˜ì˜ ë³€í™”ë¡œë¶€í„° ì½”ë“œë¥¼ ë³´í˜¸í•  ìˆ˜ ìˆë‹¤
- ê³ ê°ì´ ìš”êµ¬í•  **ëª¨ë“  ì¢…ë¥˜ì˜ ë³€ê²½ì„ ì™„ë²½í•˜ê²Œ ì˜ˆì¸¡**í•˜ê³ , ì´ì— ëŒ€í•œ ë³€ê²½ì— ëŒ€ì‘í•˜ê¸° ìœ„í•´ Abstractionì„ ì ìš©í•˜ëŠ” ëŒ€ì‹ 
- ê³ ê°ì´ **ë³€ê²½ì„ ìš”êµ¬í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê³ ** Abstractionì„ ë§Œë“¤ì–´ì„œ í–¥í›„ ì¶”ê°€ì ìœ¼ë¡œ ì¬ë°œí•˜ëŠ” ë³€í™”ë¡œë¶€í„° ë³´í˜¸ë  ìˆ˜ ìˆë„ë¡ í•˜ë¼.
- Agile DesignerëŠ” **ì£¼ë‹¨ìœ„ ì •ë„ë¡œ ê°„ë‹¨í•œ ë­”ê°€ë¥¼ Deliverí•œë‹¤**
- ê³ ê°ì´ ë³€ê²½ì„ ìš”êµ¬í•˜ë©´ Agile DesignerëŠ” ì½”ë“œë¥¼ **ë¦¬íŒ©í„°ë§**í•´ì„œ ê·¸ëŸ° ì¢…ë¥˜ì˜ ë³€ê²½ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆë„ë¡ Abstractionì„ ì¶”ê°€í•œë‹¤. OCPë¥¼ ì¤€ìˆ˜í•˜ë„ë¡


**Agile Design in Practice**
- ë¬¼ë¡  ìš°ë¦¬ëŠ” ì‹¤ì œë¡œ BDUFì™€ Agile ë‘ ê·¹ë‹¨ ì‚¬ì´ì— ì‚´ê³  ìˆë‹¤
	- **BDUFë¥¼ í”¼í•´ì•¼ í•˜ì§€ë§Œ No DUFë„ í”¼í•´ì•¼ í•œë‹¤**
- ì‹œìŠ¤í…œì— ëŒ€í•´ì„œ ì‚¬ê³ í•˜ê³  Decoupled ëª¨ë¸ì„ **ì‚¬ì „ ì„¤ê³„** í•˜ëŠ” ê²ƒì€ ê°€ì¹˜ìˆëŠ” ì¼ì´ë‹¤.
- í•˜ì§€ë§Œ **ê°„ë‹¨í•˜ê³  ì ì€ ë©´**ì— ìˆë‹¤
- ìš°ë¦¬ì˜ ëª©ì ì€ ì‹œìŠ¤í…œì˜ **ê¸°ë³¸ ëª¨ì–‘ì„ ìˆ˜ë¦½**í•˜ëŠ” ê²ƒì´ì§€ ëª¨ë“  **ì‘ì€ ìƒì„¸**ê¹Œì§€ ìˆ˜ë¦½í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤ğŸ‘
	- ëŸ¬í”„í•˜ê²Œ
- ë¬¸ì œì— ëŒ€í•´ì„œ ê³¼í•˜ê²Œ ìƒê°í•˜ë©´ ìœ ì§€ë³´ìˆ˜ ë¹„ìš©ì´ ë†’ì€ ë§ì€ **ë¶ˆí•„ìš”í•œ ì¶”ìƒí™”**ë¥¼ ë§Œë“¤ê²Œ ëœë‹¤
- ê°€ì¥ ì¢‹ì€ ê²ƒì€ 
	- **ë¹¨ë¦¬ ìì£¼ Delivery**í•˜ê³ , **ê³ ê°ì˜ ìš”êµ¬ì‚¬í•­ ë³€í™”ì— ê¸°ë°˜í•˜ì—¬ ë¦¬íŒ©í„°ë§** í•˜ëŠ” ê²ƒì´ ë§¤ìš° ê°€ì¹˜ìˆë‹¤
	- ì´ëŸ´ë•Œ **OCPê°€ ì§„ê°€**ë¥¼ ë°œíœ˜í•œë‹¤ âœ…
	- í•˜ì§€ë§Œ **ê°„ë‹¨í•œ ë„ë©”ì¸ ëª¨ë¸ì—†ì´ ì´ë ‡ê²Œ ì§„í–‰í•˜ë©´ ë°©í–¥ì„± ì—†ëŠ” í˜¼ë€í•œ êµ¬ì¡°**ë¥¼ ìœ ë°œí•œë‹¤

**Example**
- íŒ€ ê´€ë ¨í•´ì„œ ì–´ë–»ê²Œ ì ìš©í• ì§€ .. (í•„ìš”ì‹œ ì°¾ì•„ë³´ì)


**Reprise**
- ë§ˆìˆ ì´ ì•„ë‹ˆë¼ ê³µí•™ì´ë‹¤ 
- OCPì„ ì™„ë²½í•˜ê²Œ ì¤€ìˆ˜í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ëª¨ë“  ê²ƒì„ ìƒê°í•´ ë‚¼ ìˆ˜ëŠ” ì—†ë‹¤
- ì•„ë¬´ë¦¬ ì² ì €íˆ ê·œì¹™ì„ ì¤€ìˆ˜í•˜ê³  ì¡°ì‹¬í•´ë„ ê²°êµ­ ê³ ê°ì€ ì‹œìŠ¤í…œ ì „ë°˜ì— ê±¸ì¹œ ëŒ€ëŒ€ì ì¸ ìˆ˜ì •ì´ í•„ìš”í•œ ë³€ê²½ì„ ìƒê°í•´ ë‚¼ ê²ƒì´ë‹¤ ğŸ˜‚ (ê¸°ê°€ ë§‰íŒ ê¸°ëŠ¥ ë³´ìœ )
- ë‹¹ì‹ ì˜ ëª©ì ì€ **ë³€ê²½ì˜ ê³ í†µì„ ì™„ì „íˆ ì œê±°í•˜ëŠ” ê²ƒ**ì´ ì•„ë‹ˆë‹¤. 
- ì´ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤
- ë‹¹ì‹ ì˜ ëª©ì ì€ **ë³€ê²½ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒ**ì´ë‹¤
- ì´ê²Œ **OCPë¥¼ ì¤€ìˆ˜í•˜ëŠ” ë””ìì¸**ì´ ë‹¹ì‹ ì—ê²Œ ì£¼ëŠ” ì´ì ì´ë‹¤
- OCPëŠ” ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ì˜ í•µì‹¬ì´ë‹¤
- ì™„ë²½í•œ ë³´í˜¸(ë³€ê²½ìœ¼ë¡œë¶€í„°ì˜)ë¥¼ ì–»ì„ ìˆ˜ëŠ” ì—†ì§€ë§Œ, ì–»ê¸° ìœ„í•´ íˆ¬ìŸí•  í•„ìš”ëŠ” ìˆë‹¤

**Appendix**
- [Is Design Dead? - ë§ˆí‹´ íŒŒìš¸ëŸ¬](https://www.martinfowler.com/articles/designDead.html)


## 14.2 LSP (Liskov Substitution Principle)
> ê°•ì˜ ì‹œê°„ ì•½ 7ë¶„

**OCP vs LSP**
- OCPëŠ” 
	- abstraction, polymorphism(inheritance)ë¥¼ ì´ìš©í•´ì„œ êµ¬í˜„
- LSPëŠ” 
	- OCPë¥¼ ë°›ì³ì£¼ëŠ” polymorphismì— ê´€í•œ ì›ì¹™ì„ ì œê³µ
	- LSPê°€ ìœ„ë°˜ë˜ë©´ OCPë„ ìœ„ë°˜ë¨
	- LSPë¥¼ ìœ„ë°˜í•˜ë©´ subtypeì´ ì¶”ê°€ë  ë•Œë§ˆë‹¤ í´ë¼ì´ì–¸íŠ¸ë“¤ì´ ìˆ˜ì •ë˜ì–´ì•¼ í•¨
	- `instanceof / downcasting`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì „í˜•ì ì¸ LSP ìœ„ë°˜ì˜ ì§•ì¡° ğŸ’©


**Rectangle ì˜ˆì œ**
- `Square`(ì •ì‚¬ê°í˜•, subtype)ì—ì„œ LSP ìœ„ë°˜ ì„¤ëª…

**The Representative Rule**
- ëŒ€ë¦¬ì¸ì€ ìì‹ ì´ ëŒ€ë¦¬í•˜ëŠ” ì–´ë–¤ ê²ƒë“¤ì— ëŒ€í•œ ê´€ê³„ê¹Œì§€ ëŒ€ë¦¬(ê³µìœ )í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤
- ì´í˜¼ ì†Œì†¡ ë³€í˜¸ì‚¬ë“¤(ëŒ€ë¦¬ì¸)ì´ ì´í˜¼í•˜ëŠ” ë¶€ë¶€ë“¤ì˜ ê´€ê³„(ë¶€ë¶€)ë¥¼ ëŒ€ë¦¬(ê³µìœ )í•˜ì§€ ì•ŠëŠ” ê²ƒ ì²˜ëŸ¼
- ë”°ë¼ì„œ ê¸°í•˜í•™ì— ë”°ë¥´ë©´ Square Is-A Rectangle ì´ì§€ë§Œ 
- ì´ë“¤ì„ í‘œí˜„/ëŒ€ë¦¬(represent)í•˜ëŠ” SWëŠ” ê·¸ë“¤ì˜ ê´€ê³„ (IS-A)ë¥¼ ê³µíœ´í•˜ì§€ ì•ŠëŠ”ë‹¤

## 14.3 ISP (Interface Segregation Principle)
> ê°•ì˜ ì‹œê°„ ì•½ 7ë¶„

**Interface Segregation Principle**
- `Don't depend on things that you don't need`
	- **í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì—ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ë¼ëŠ” ì›ì¹™**
- ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ ì˜ì¡´ì„±ì„ ê°€ì§€ê³  ìˆë‹¤ë©´
	- ê·¸ ì¸í„°í˜ì´ìŠ¤ê°€ ë³€ê²½ë˜ë©´ ì¬ì»´íŒŒì¼/ë¹Œë“œ/ë°°í¬ë˜ì•¼ í•œë‹¤
	- ë…ë¦½ì ì¸ ê°œë°œ/ë°°í¬ê°€ ë¶ˆê°€í•˜ë‹¤ëŠ” ì˜ë¯¸
- SPRì™€ë„ ì—°ê´€
	- í•œ ê¸°ëŠ¥ì— ë³€ê²½ì´ ë°œìƒí•˜ë©´ ë‹¤ë¥¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë“¤ì—ë„ ì˜í–¥ì„ ë¯¸ì¹¨
- **ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ë§Œ ì œê³µí•˜ë„ë¡ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ í•œ ê¸°ëŠ¥ì— ëŒ€í•œ ë³€ê²½ì˜ ì—¬íŒŒë¥¼ ìµœì†Œí™”**í•¨

**Switch ì˜ˆì œ** 
- í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ê¸°ë°˜ ì„¤ëª…í•˜ì—¬ ìƒëµ 

**Fat class ì˜ˆì œ**
- ë§ˆì°¬ê°€ì§€ë¡œ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ê¸°ë°˜ ì„¤ëª…
- í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— í´ë¼ì´ì–¸íŠ¸ê°€ ì—¬ëŸ¬ëª…
- ì œì¼ ì‰¬ìš´ í•´ê²°ì±… 
	- `One Interface for a sub system`
		- ìƒˆë¡œìš´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë³´ë„ë¡ ìˆ˜ì •ì´ í¬ì§€ë§Œ, Jobì˜ ë³€ê²½ ì˜í–¥ ì „íŒŒê°€ ìµœì†Œí™”ë¨
	- Fat classë¥¼ ë§Œë‚œë‹¤ë©´ 
		- Interfaceë¥¼ ìƒì„±í•˜ì—¬ Fat classë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° isolate ì‹œì¼œì•¼í•¨
		- Fat classì—ì„œ ë‹¤ìˆ˜ì˜ Interfaceë¥¼ êµ¬í˜„
		- InterfaceëŠ” êµ¬í˜„ì²´ë³´ë‹¤ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ë…¼ë¦¬ì ìœ¼ë¡œ ê²°í•©ë˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ë©”ì†Œë“œë§Œ Interfaceì— ì •ì˜ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ í™•ì‹ í•  ìˆ˜ ìˆìŒ 
		- ê²°ê³¼ì ìœ¼ë¡œ **ISP ì¤€ìˆ˜**


## 15.1 DIP (Dependency Inversion Principle)

> ì˜ˆì œ ì½”ë“œëŠ” ì—†ë‹¤. ëŒ€ë¶€ë¶„ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ìœ„ì£¼

**Dependency Inversion Principle**
- `High Level Policy should not depend on Low Level Details`
- êµ¬í˜„ì²´(ì €ìˆ˜ì¤€ ëª¨ë“ˆ, êµ¬í˜„ì²´)ëŠ” Abstract Type(ê³ ìˆ˜ì¤€ ëª¨ë“ˆ, ì¸í„°í˜ì´ìŠ¤/ì¶”ìƒ í´ë˜ìŠ¤)ì— ì˜ì¡´í•´ì•¼ í•œë‹¤

**OOì˜ í•µì‹¬**âœ¨
- Inheritance(ìƒì†), Encapsulation(ìº¡ìŠí™”), Polymorphism(ë‹¤í˜•ì„±)
	- ì´ê²ƒì€ OOì˜ í•µì‹¬ì´ ì•„ë‹ˆë¼ ë©”ì»¤ë‹ˆì¦˜
- OOì˜ í•µì‹¬ì€
	- **IoCë¥¼ í†µí•´ ìƒìœ„ ë ˆë²¨ì˜ ëª¨ë“ˆì„ í•˜ìœ„ ë ˆë²¨ì˜ ëª¨ë“ˆë¡œë¶€í„° ë³´í˜¸í•˜ëŠ” ê²ƒ** âœ¨
	- Inverted structure tends not to rot
	- ex. OCPë¥¼ í†µí•´ ìƒˆë¡œìš´ íƒ€ì…(ìš”êµ¬ì‚¬í•­)ì„ ë°˜ì˜í•  ìˆ˜ ìˆìŒ

**Structured Design(êµ¬ì¡°ì  ë””ìì¸)**
- Top-down ë°©ë²•ë¡ 
	- `ì†ŒìŠ¤ ì½”ë“œ ì˜ì¡´ì„±ì˜ ë°©í–¥ = ëŸ°íƒ€ì„ ì˜ì¡´ì„±ì˜ ë°©í–¥`
	- ìœ„ì—ì„œ ì•„ë˜ë¡œ â¡ï¸ êµ‰ì¥íˆ ìœ„í—˜í•´ì§ğŸ’£

**Plugins ì•„í‚¤í…ì²˜**
- Boundaryë¥¼ Plugin Interfaceë¡œ ë‹¤ë£¬ë‹¤.
- ì˜ì¡´ì„± ì—­ì „ì´ SW ëª¨ë“ˆê°„ì˜ ê²½ê³„ë¥¼ ë§Œë“œëŠ” ìˆ˜ë‹¨ì´ ëœë‹¤
	- í˜¸ì¶œìê°€ ì–´ë–¤ ê²ƒì´ í˜¸ì¶œë ì§€ ëª¨ë¥¸ì±„ í˜¸ì¶œí•˜ëŠ” ëª¨ë“ˆì„ `plugin`ì´ë¼ í•¨
	- pluginë„ êµ¬í˜„ì²´ì´ê³ , í´ë¼ì´ì–¸íŠ¸ì™€ plugin ë‘˜ ë‹¤ ì¸í„°í˜ì´ìŠ¤ ì˜ì¡´
- `Main should be a plugin to the rest of the applications`
	- Main íŒŒí‹°ì…˜ :  í”ŒëŸ¬ê·¸ì¸ ì˜ì—­ (ex. ìŠ¤í”„ë§ì—ì„œ App íŒŒí‹°ì…˜ì— ì˜ì¡´ì„± ì£¼ì…)
	- App íŒŒí‹°ì…˜ : ì‚¬ìš©ì ì •ì˜ ì˜ì—­

> ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë ˆì„ì›Œí¬ (A Reusable Framework)


**The Furnace Example(ìš©ê´‘ë¡œ ì˜ˆì œ)**
- DIP ìœ„ë°˜ 
	- ì•Œê³ ë¦¬ì¦˜ì´ low level detailì— ì˜ì¡´ 
- `HVAC`ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¤‘ì•™ì— ë§Œë“¤ì–´ì„œ í•„ìš”í•œ í•¨ìˆ˜ë¥¼ ì¬ì •ì˜ 
	- ì˜ì¡´ì„± ë°©í–¥ì´ ì¸í„°í˜ì´ìŠ¤ë¡œ í–¥í•¨


## 15.2 SOLID Case Study

**Requirements and Use Cases**
- ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•˜ë©´ì„œ Use Case/Entity List ì‘ì„±
- Use Case List
	- AddEmployee
	- DeleteEmployee
	- ChangeEmployee
	- AddTimeCard
	- PayEmployees
	- AddSalesReceipt
- Entity(Data Element) List
	- Employee
		- CommissionedEmployee
		- HourlyEmployee
	- TimeCard
	- SalesReceipt


> Data Entityë“¤ì€ ë‚´ë¶€ì— ë°ì´í„°ë¥¼ ê°–ëŠ”ë‹¤

> [!note] use caseê°€ ë³µì¡í•´ì§€ëŠ” ê²ƒì€ ë°ì´í„°ê°€ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì´ë‹¤. (ì˜¤í¼ë ˆì´ì…˜ì´ ë³€í•´ì„œê°€ ì•„ë‹˜)

**SRP ì‹œì‘**
- ëˆ„ê°€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì•¡í„°ì¸ê°€? ê·¸ë“¤ì˜ ê´€ì‹¬ì‚¬ëŠ” ?
- Operations
	- ì‹œìŠ¤í…œì„ ìš´ì˜ UIë¥¼ í†µí•´ Use Caseë¥¼ ì‚¬ìš©
- Payroll (`Use Case`)
	- AddEmployee
	- DeleteEmployee
	- ChangeEmployee
	- AddTimeCard
	- PayEmployees
	- AddSalesReceipt
- Union (`Actor`)
	- ì–´ë–»ê²Œ ì¡°í•©ë¹„ë¥¼ ë¶€ê³¼í•˜ë‚˜ ì¡°í•©ë¹„ë¥¼ ì–¸ì œ ê³µì œí•˜ë‚˜ ì¡°í•© íšŒì›ì— ê´€ë ¨ëœ ëª¨ë“  ì´ìŠˆ
- Policy (`Actor`)
	- ì§ì›ì´ ì–¼ë§ˆë¥¼ ìˆ˜ë ¹í•˜ë‚˜, ì–¸ì œ ìˆ˜ë ¹í•˜ë‚˜
- ì´ ë‹¨ê³„ì˜ ëª©ì ì€ 
	- **ëª¨ë“ˆë“¤ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒ**
	- ê° **ëª¨ë“ˆì€ ë°˜ë“œì‹œ í•˜ë‚˜ì˜ ì•¡í„°ë§Œ** ë‹´ë‹¹í•´ì•¼ í•œë‹¤
- ì–´ë ¤ìš´ ë¬¸ì œ 
	- operationsëŠ” ì‚¬ìš©í•˜ëŠ” UIë¥¼ ê°€ì§€ê³  
	- ì—¬ëŸ¬ ì•¡í„°ë“¤ê³¼ ì—°ê´€ëœ ë°ì´í„°ê°€ ì¡´ì¬ 
- Use Caseë“¤ì„ ë¶„í•´í•´ì„œ SRPë¥¼ ì¤€ìˆ˜í•˜ëŠ” ëª¨ë“ˆë¡œ isolate

**AddEmployee Use Case**
- ë‹¤ì´ì–´ê·¸ë¨ ê¸°ë°˜ ì„¤ëª…
- ì´í•´ê°€ ì˜ ì•ˆë¨.. ì•¡í„°..

**Diagrams and YAGNI**
- ë‹¤ì´ì–´ê·¸ë¨ ì‘ì„±ì€ ì‹œê°„ ë‚­ë¹„ 
- ì‘ì„±í•˜ëŠ” ì´ìœ 
	- ìƒê°í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ì„œ
	- ìƒê°í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ìƒì„¸í•¨ì„ ë‹¤ë¥¸ì´ë“¤ì—ê²Œ ì „ë‹¬í•  ë•Œ
- í° ê·œëª¨ì˜ í”„ë¡œì íŠ¸ë¥¼ íŒ€ì›ë“¤ê³¼ ìˆ˜í–‰í•œë‹¤ë©´
	- ì¼ë ¨ì˜ ë‹¤ì´ì–´ê·¸ë¨ì„ í™”ì´íŠ¸ë³´ë“œì— ê·¸ë¦´ ê²ƒ
- ë‹¤ì´ì–´ê·¸ë¨ì„ ìƒì„¸í•˜ê²Œ ì‘ì„±í•˜ëŠ” ê²ƒì´ í›„ì— ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ì‹œìŠ¤í…œì„ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ë˜ì§€ ì•Šì„ê¹Œ?
	- **ì§€ì†ì ìœ¼ë¡œ ê°±ì‹ í•  ë•Œë§Œ ì˜ë¯¸ë¥¼ ê°€ì§** 
	- ì„¤ê³„ ë‹¨ê³„ì—ì„œëŠ” ì ë‹¹íˆ í•˜ê³  ã…‹ã…‹

**SRPì˜ ì˜ë¯¸** 
- í•œ Moduleì´ í•˜ë‚˜ì˜ Actorë¥¼ ìœ„í•œ Responsibilityë¥¼ ê°–ë„ë¡ ë¶„ë¦¬í•˜ëŠ” ì„¤ê³„ë¥¼ í•œë‹¤ëŠ” ì˜ë¯¸
	- Architectural Frameworkë¥¼ ë§Œë“  ê²ƒ
- `ëŠ˜ Actorë¥¼ ì°¾ê³  ì´ì— ê¸°ë°˜í•˜ì—¬ Moduleì„ ë¶„ë¦¬`í•œë‹¤

**OCP**
- ì´ë¯¸ì§€ì—ì„œ Controllerê°€ DS(ë°ì´í„° êµ¬ì¡°)ë¥¼ UC(ìœ ì¦ˆ ì¼€ì´ìŠ¤)ë¡œ ë„˜ê¸´ë‹¤
- DSì™€ UCì˜ detailì— ì˜ì¡´ì„±ì„ ê°–ëŠ”ë‹¤
- DSë‚˜ UCì˜ ë³€í™”ê°€ ìƒê¸°ë©´ Controllerë„ ì¬ë°°í¬í•´ì•¼ í•¨ ğŸ’©
- í•´ê²°ì±…
	- DSë‚˜ UCì—ì„œ Controllerë¥¼ decoupling 
	- ì¸í„°í˜ì´ìŠ¤ë¥¼ ì—„ì²­ ë½‘ì•„ì„œ ì˜ì¡´ì‹œí‚¤ë„¤ 
		- êµ¬í˜„ì²´ ë³€ê²½ ë°œìƒì‹œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ê²Œ ë³€ê²½ ì „íŒŒê°€ ë˜ì§€ ì•ŠìŒ
		- í•˜ì§€ë§Œ, ì½”ë“œ ë³µì¡ë„ê°€ ëŠ˜ì–´ë‚˜ê² ì§€ 
		
**LSP**
- AddTimeCardUseCase ê¸°ì¤€ ì„¤ëª…
	- ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë“œí•´ì„œ OCP ìœ„ë°˜ì„ í•´ì†Œ (TimeCardì— ëŒ€í•´ì„œë§Œ)
	- í•˜ì§€ë§Œ Salary, Commissionedì—ì„œëŠ” ì•„ë¬´ê²ƒë„ ì•ˆí•˜ë„ë¡ override í•˜ëŠ” ê²ƒì€ LSP ìœ„ë°˜
	- Interfaceì— ëª¨ë“  íŒŒìƒí´ë˜ìŠ¤ì— ì ìš©í•  ìˆ˜ ì—†ëŠ” ë©”ì†Œë“œë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì€ LSP ìœ„ë°˜
		- ë‹¤ë¥¸ ì„œë¸Œ íƒ€ì…ì— êµ¬í˜„í•˜ì§€ ì•Šì„ ë©”ì†Œë“œë¥¼ ì¶”ê°€í•œë‹¤ëŠ” ê±°ë„¤ğŸ‘€
	- ì½”ë“œì˜ ë¬¸ì œ 
		- Hourlyë¥¼ ì‚¬ìš©í•  ë•Œ down cast  (???)
		- LSP ì¤€ìˆ˜ ìœ„í•´ down castë¥¼ í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì 
		- ì£¼ì–´ì§„ íŒŒìƒí´ë˜ìŠ¤ê°€ ì–´ë–¤ íƒ€ì…ì¸ì§€ ì •í™•íˆ ì•ˆë‹¤ë©´ down castë¡œ ì¸í•œ í”¼í•´ëŠ” ì—†ë‹¤

**ISP**
- í•´ê²°ì±…1.
	- Dynamic interface
	- íŒŒë¼ë¯¸í„°ëª…ìœ¼ë¡œ ì²˜ë¦¬í•˜ë‹¤ë³´ë‹ˆ type ì •ë³´ ìœ ì‹¤
- í•´ê²°ì±…2.
	- íŠ¹ì • Controllerê°€ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œë§Œì„ ê°–ëŠ” ë§ì€ Interfaceë¥¼ ì¶”ê°€ 
	- Type Safe ì´ìŠˆ í•´ì†Œ 

**DIP**
- `High Level policy should be independent of low level detail`
- E18. Component Case Study 
	- ğŸ“š í•´ì™¸ ê°œë°œ ë„ì„œë¥¼ ì°¸ê³ í•œ ë“¯í•¨
- ë³µì¡í•´ë³´ì§€ë§Œ, ë³€ê²½ì— ëŒ€í•œ ì•ˆì •ì„±/ììœ ë¥¼ ì œê³µí•œë‹¤í•¨

---
## ë ˆê±°ì‹œ ì½”ë“œì— í…ŒìŠ¤íŠ¸ ì¶”ê°€ë¥¼ ìœ„í•œ 3ê°€ì§€ ê¸°ë²•

> GildRose ì˜ˆì œ ì‚¬ìš© â¡ï¸ Lift up conditionals ì—ë„ ìˆìŒ

ğŸ”— [ì›ë³¸ ì˜ˆì œ ì €ì¥ì†Œ](https://github.com/emilybache/GildedRose-Refactoring-Kata)
- [í•œê¸€ ë§ˆí¬ë‹¤ìš´](https://github.com/emilybache/GildedRose-Refactoring-Kata/blob/main/GildedRoseRequirements_kr.md)

```java
class GildedRose {
    Item[] items;

    public GildedRose(Item[] items) {
        this.items = items;
    }

    public void updateQuality() {
        for (int i = 0; i < items.length; i++) {
            if (!items[i].name.equals("Aged Brie")
                    && !items[i].name.equals("Backstage passes to a TAFKAL80ETC concert")) {
                if (items[i].quality > 0) {
                    if (!items[i].name.equals("Sulfuras, Hand of Ragnaros")) {
                        items[i].quality = items[i].quality - 1;
                    }
                }
            } else {
                if (items[i].quality < 50) {
                    items[i].quality = items[i].quality + 1;

                    if (items[i].name.equals("Backstage passes to a TAFKAL80ETC concert")) {
                        if (items[i].sellIn < 11) {
                            if (items[i].quality < 50) {
                                items[i].quality = items[i].quality + 1;
                            }
                        }

                        if (items[i].sellIn < 6) {
                            if (items[i].quality < 50) {
                                items[i].quality = items[i].quality + 1;
                            }
                        }
                    }
                }
            }

            if (!items[i].name.equals("Sulfuras, Hand of Ragnaros")) {
                items[i].sellIn = items[i].sellIn - 1;
            }

            if (items[i].sellIn < 0) {
                if (!items[i].name.equals("Aged Brie")) {
                    if (!items[i].name.equals("Backstage passes to a TAFKAL80ETC concert")) {
                        if (items[i].quality > 0) {
                            if (!items[i].name.equals("Sulfuras, Hand of Ragnaros")) {
                                items[i].quality = items[i].quality - 1;
                            }
                        }
                    } else {
                        items[i].quality = items[i].quality - items[i].quality;
                    }
                } else {
                    if (items[i].quality < 50) {
                        items[i].quality = items[i].quality + 1;
                    }
                }
            }
        }
    }
}

```

### Characterization Test
- ìˆ˜ë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ” ê¸°ë²•


### Approval test
- Characterization Testë¥¼ ë‹¤ì–‘í•œ ì¸ìì˜ ì¡°í•©ìœ¼ë¡œ ì‘ì„±ì„ ë•ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- https://approvaltests.com
- ê²°ê³¼ì˜ ìŠ¤ëƒ…ìƒ·ì„ ë§Œë“¤ê³ , ë³€ê²½ë˜ì§€ ì•Šì•˜ìŒì„ ê²€ì¦í•˜ì—¬ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì—ì„œ ê²€ì¦ì„ ë‹¨ìˆœí™”í•¨
- ì¸í…”ë¦¬ì œì´ ì„¤ì • ìˆ˜ì •í•˜ì—¬ ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ìƒ‰ê¹”ë¡œ ì˜†ì— í‘œì‹œë˜ë„ë¡ í•¨
- ì´ í›„ ì˜ì¡´ì„± ì¶”ê°€ â¡ï¸ í…ŒìŠ¤íŠ¸ ìƒì„± â¡ï¸ íŒŒì¼ëª…ì„ ìˆ˜ì •í•´ì„œ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸

### Mutation test
- 100%ì˜ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ê°–ëŠ” ì½”ë“œë„ ì™„ì „íˆ ë²„ê·¸ê°€ ì—†ëŠ” ê²ƒì„ ë³´ì¥í•˜ì§€ ëª»í•œë‹¤
- ê³ ì˜ë¡œ ë²„ê·¸ë¥¼ ìœ ë°œ(í”„ë¡œë•ì…˜ ì½”ë“œë¥¼ ì•½ê°„ ìˆ˜ì •)í•˜ê³  í…ŒìŠ¤íŠ¸ê°€ ê·¸ ë²„ê·¸ë¥¼ ì¡ì•„ë‚´ëŠ”ì§€(ì‹¤íŒ¨í•˜ëŠ”ì§€)ë¥¼ í™•ì¸í•˜ì—¬ í…ŒìŠ¤íŠ¸ì˜ ì™„ì „ì„±ì„ ê²€ì¦í•˜ëŠ” ê¸°ë²•
	- ì´ë ‡ê²Œ í”„ë¡œë•ì…˜ ì½”ë“œë¥¼ ì•½ê°„ ë³€ê²½í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ `ëŒì—°ë³€ì´ í…ŒìŠ¤íŠ¸(mutation test)`ë¼ê³  í•¨
	- 100% ì»¤ë²„ë¦¬ì§€ë¥¼ ê°–ëŠ” ê²½ìš°ë„ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ì§€ ì•Šê³  ì„±ê³µí•˜ëŠ” ê²½ìš°ê°€ ìˆìŒ 
	- ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒê³¼ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²ƒì€ ë™ì¼í•œ ê²ƒì´ ì•„ë‹ˆì–´ì„œ **PIT**ë¥¼ ì´ìš©í•´ì„œ ìˆ˜í–‰ 
	- **PIT**ì€ ëŸ°íƒ€ì„ì— í”„ë¡œë•ì…˜ ì½”ë“œì— ì½”ë“œë¥¼ ì‚½ì…(ìë™ ìƒì„±)í•˜ì—¬ ëŒì—°ë³€ì´ í…ŒìŠ¤íŠ¸ë¥¼ ë°œìƒì‹œí‚´
	- ì‚´ì•„ë‚¨ì€ ëŒì—°ë³€ì´ í…ŒìŠ¤íŠ¸ê°€ ìˆë‹¤ëŠ” ê²ƒì€ 100% ì»¤ë²„ë¦¬ì§€ë¥¼ ê°–ëŠ” í…ŒìŠ¤íŠ¸ê°€ ìˆë‹¤ê³  í•˜ë”ë¼ë„ ê²°í•¨(defect)ì„ ì™„ì „íˆ ë°©ì§€í•˜ì§€ëŠ” ëª»í•˜ëŠ” ê²ƒì„ ì˜ë¯¸
	- ì´ëŸ° ê²°í•¨ì„ ìœ ë°œí•˜ëŠ” ì½”ë“œ íŒ¨ìŠ¤ë¥¼ ê°–ëŠ” í…ŒìŠ¤íŠ¸ê°€ ì—†ìŒì„ ì˜ë¯¸
- **ì˜ì¡´ì„±**ê³¼ **ë¹Œë“œ í”ŒëŸ¬ê·¸ì¸**ì„ ì¶”ê°€í•´ì•¼ í•¨
- ë¹Œë“œ ê²°ê³¼ë¬¼ì— ë³´ë©´ `index.html` ìƒì„±ë˜ì„œ í™•ì¸ ê°€ëŠ¥




---
## Refactoring - Lift Up Conditionals

> [!note] Lift Up Conditionals
> ê¸¸ê³  ë³µì¡í•œ ì¡°ê±´ë¬¸ì„ ì¡°ì‘í•˜ì—¬ íŠ¹ì • ì¡°ê±´ê³¼ ê´€ë ¨ëœ ì½”ë“œ ë¸”ë¡ì„ ê·¸ë£¹í•‘í•˜ëŠ” ê¸°ë²•

ğŸ”— [ì›ë³¸ ì˜ˆì œ ì €ì¥ì†Œ](https://github.com/emilybache/GildedRose-Refactoring-Kata)
- [í•œê¸€ ë§ˆí¬ë‹¤ìš´](https://github.com/emilybache/GildedRose-Refactoring-Kata/blob/main/GildedRoseRequirements_kr.md)

```java

class GildedRose {
    Item[] items;

    public GildedRose(Item[] items) {
        this.items = items;
    }

    public void updateQuality() {
        for (int i = 0; i < items.length; i++) {
            if (!items[i].name.equals("Aged Brie")
                    && !items[i].name.equals("Backstage passes to a TAFKAL80ETC concert")) {
                if (items[i].quality > 0) {
                    if (!items[i].name.equals("Sulfuras, Hand of Ragnaros")) {
                        items[i].quality = items[i].quality - 1;
                    }
                }
            } else {
                if (items[i].quality < 50) {
                    items[i].quality = items[i].quality + 1;

                    if (items[i].name.equals("Backstage passes to a TAFKAL80ETC concert")) {
                        if (items[i].sellIn < 11) {
                            if (items[i].quality < 50) {
                                items[i].quality = items[i].quality + 1;
                            }
                        }

                        if (items[i].sellIn < 6) {
                            if (items[i].quality < 50) {
                                items[i].quality = items[i].quality + 1;
                            }
                        }
                    }
                }
            }

            if (!items[i].name.equals("Sulfuras, Hand of Ragnaros")) {
                items[i].sellIn = items[i].sellIn - 1;
            }

            if (items[i].sellIn < 0) {
                if (!items[i].name.equals("Aged Brie")) {
                    if (!items[i].name.equals("Backstage passes to a TAFKAL80ETC concert")) {
                        if (items[i].quality > 0) {
                            if (!items[i].name.equals("Sulfuras, Hand of Ragnaros")) {
                                items[i].quality = items[i].quality - 1;
                            }
                        }
                    } else {
                        items[i].quality = items[i].quality - items[i].quality;
                    }
                } else {
                    if (items[i].quality < 50) {
                        items[i].quality = items[i].quality + 1;
                    }
                }
            }
        }
    }
}

```

- `alt + enter` ë‹¨ì¶•í‚¤ ì˜ í™œìš©í•˜ê¸°
- ë©”ì†Œë“œ ì¶”ì¶œì„ 2ë²ˆ í•´ì„œ ì¡°ê±´ë¬¸ìœ¼ë¡œ ê°ì‹¼ ë‹¤ìŒ ì¸ë¼ì¸í•´ì„œ ì¤‘ë³µ ë¶ˆí•„ìš”í•œ ì¡°ê±´ì„ ì²˜ë¦¬í•´ê°„ë‹¤
- ìŠ¤ìœ„ì¹˜ë¬¸ì„ ë‹¤í˜•ì„±ì„ ë§Œë“¤ ë•Œ 
	- `push down members`ë¡œ ì‚¬ìš©í•´ì„œ ë©”ì„œë“œë¥¼ í•˜ìœ„ ìì‹ í´ë˜ìŠ¤ì— ëª¨ë‘ ë³µì‚¬ ë‚´ë¦¼



## Refactoring - Split Phase
> ë¦¬íŒ©í„°ë§ ì˜ˆì œë¥¼ ì‚¬ìš© 
- [ë¦¬íŒ©í„°ë§.com](https://refactoring.com/catalog/splitPhase.html)
	- `6.11 Split Phase`

ì˜ˆì œ ì½”ë“œ ì—†ì–´ì„œ ì§ì ‘ íƒ€ì´í•‘
```java
record Product(double basePrice, double discountThreshold, double discountRate) {}  
  
record ShippingMethod(double discountThreshold, double discountedFee, Double feePerCase) {}  
  
public class Orders {  
    double priceOrder(Product product, int quantity, ShippingMethod shippingMethod) {  
        double basePrice = product.basePrice() * quantity;  
        double discount = Math.max(quantity - product.discountThreshold(), 0)  
                * product.basePrice() * product.discountRate();  
        double shippingPerCase = (basePrice > shippingMethod.discountThreshold())  
                ? shippingMethod.discountedFee() : shippingMethod.feePerCase();  
        double shippingCost = quantity * shippingPerCase;  
        double price = basePrice - discount * shippingCost;  
        return price;  
    }}

```
- shift ë‘ë²ˆ ëˆ„ë¥¸ í›„ change signatureë¡œ ì¤‘ê°„ êµ¬ì¡°ì²´ PricingDataë¥¼ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ë¡œ ì¶”ê°€
- PricingData (ì¤‘ê°„ ë°ì´í„° ê°ì²´)ì— ì´ì „ ë©”ì„œë“œì—ì„œ ìƒì„±í•˜ê±°ë‚˜ ì „ë‹¬í•˜ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì–´ ì „ë‹¬

**ë¦¬íŒ©í„°ë§ í›„**
```java
record Product(double basePrice, double discountThreshold, double discountRate) {}  
  
record ShippingMethod(double discountThreshold, double discountedFee, Double feePerCase) {}  
  
record PricingData(double basePrice, double discount, int quantity) {}  
  
public class Orders {  
    double priceOrder(Product product, int quantity, ShippingMethod shippingMethod) {  
        PricingData pricingData = calculatePricingData(product, quantity);  
        return applyShippingCost(shippingMethod, pricingData);  
    }  
    private static PricingData calculatePricingData(Product product, int quantity) {  
        double basePrice = product.basePrice() * quantity;  
        double discount = Math.max(quantity - product.discountThreshold(), 0)  
                * product.basePrice() * product.discountRate();  
  
        return new PricingData(basePrice, discount, quantity);  
    }  
    private static double applyShippingCost(ShippingMethod shippingMethod, PricingData pricingData) {  
        double shippingPerCase = (pricingData.basePrice() > shippingMethod.discountThreshold())  
                ? shippingMethod.discountedFee() : shippingMethod.feePerCase();  
        double shippingCost = pricingData.quantity() * shippingPerCase;  
        return pricingData.basePrice() - pricingData.discount() * shippingCost;  
    }}

```


ë¦¬íŒ©í„°ë§ 6.11 Split Phase
```java
public class App {  
    public static void main(String[] args) {  
        try {  
            if(args.length == 0) throw new RuntimeException("íŒŒì¼ëª…ì„ ì…ë ¥í•˜ì„¸ìš”");  
  
            String fileName = args[args.length - 1];  
            File input = Paths.get(fileName).toFile();  
            ObjectMapper mapper = new ObjectMapper();  
            Order[] orders = mapper.readValue(input, Order[].class);  
            if(Stream.of(args).anyMatch(arg -> "-r".equals(arg))) {  
                System.out.println(Stream.of(orders)  
                        .filter(o -> "ready".equals(o.status()))  
                        .count()  
                );            } else {  
                System.out.println(orders.length);  
            }        } catch (Exception e) {  
            System.err.println(e.getMessage());  
        }    }}
```
- CommandLine ì¤‘ê°„ êµ¬ì¡°ì²´ë¥¼ ë§Œë“œëŠ”ê²Œ í¬ì¸íŠ¸

**ë¦¬íŒ©í„°ë§ í›„**
```java
public class App {  
    public static void main(String[] args) {  
        try {  
            System.out.println(run(args));  
        } catch (Exception e) {  
            System.err.println(e.getMessage());  
        }    }  
    record CommandLine(String fileName, boolean onlyCountReady) {}  
  
    private static long run(String[] args) throws IOException {  
        CommandLine commandLine = parseCommandLine(args);  
        return countOrder(args, commandLine);  
    }  
    private static CommandLine parseCommandLine(String[] args) {  
        if(args.length == 0) throw new RuntimeException("íŒŒì¼ëª…ì„ ì…ë ¥í•˜ì„¸ìš”");  
  
        String fileName = args[args.length - 1];  
        boolean onlyCountReady = Stream.of(args).anyMatch(arg -> "-r".equals(arg));  
        return new CommandLine(fileName, onlyCountReady);  
    }  
    private static long countOrder(String[] args, CommandLine commandLine) throws IOException {  
        File input = Paths.get(commandLine.fileName).toFile();  
        ObjectMapper mapper = new ObjectMapper();  
        Order[] orders = mapper.readValue(input, Order[].class);  
        if(commandLine.onlyCountReady()) {  
            return Stream.of(orders)  
                    .filter(o -> "ready".equals(o.status()))  
                    .count();  
        } else {  
            return orders.length;  
        }    }}
```

## ë ˆê±°ì‹œ ì½”ë“œì— í…ŒìŠ¤íŠ¸ ì¶”ê°€í•˜ëŠ” ë˜ í•˜ë‚˜ì˜ ë°©ë²•- Subclass and Override Method 

ğŸ”— [ê°•ì˜ ìë£Œ](https://github.com/msbaek/refactoring-tools/blob/master/src/main/java/com/example/refactorings/splitphase/AuditManager.java)

**ë¦¬íŒ©í„°ë§ ì „**
```java
  
class Directory {  
    public static String[] getFiles(String directoryName) {  
        throw new IllegalStateException("Directory#getFiles is not implemented yet");  
    }}  
  
class Sorted {  
    public final int index;  
    public final String path;  
  
    Sorted(int index, String path) {  
        this.index = index;  
        this.path = path;  
    }}  
  
class File {  
    public static void writeAllText(String newFile, String newRecord) {  
        throw new IllegalStateException("File#writeAllText is not implemented yet");  
    }  
    public static String [] readAllLines(String currentFilePath) {  
        throw new IllegalStateException("File#readAllLines is not implemented yet");  
    }}  
  
class Path {  
    public static String combine(String directoryName, String fileName) {  
        return directoryName + java.io.File.pathSeparator + fileName;  
    }}  
  
public class AuditManager {  
    private final int maxEntriesPerFile;  
    private final String directoryName;  
  
    public AuditManager(int maxEntriesPerFile, String directoryName) {  
        this.maxEntriesPerFile = maxEntriesPerFile;  
        this.directoryName = directoryName;  
    }  
    public void addRecord(String visitorName, LocalDateTime timeOfVisit) {  
        String[] filePaths = Directory.getFiles(directoryName);  
        Sorted[] sorted = sortByIndex(filePaths);  
  
        String newRecord = visitorName + ';' + timeOfVisit;  
  
        if (sorted.length == 0) {  
            String newFile = Path.combine(directoryName, "audit_1.txt");  
            File.writeAllText(newFile, newRecord);  
            return;  
        }  
        int currentFileIndex = sorted[sorted.length - 1].index;  
        String currentFilePath = sorted[sorted.length - 1].path;  
        List<String> lines = new ArrayList<>(Arrays.asList(File.readAllLines(currentFilePath)));  
  
        if (lines.size() < maxEntriesPerFile) {  
            lines.add(newRecord);  
            String newContent = String.join("\n", lines);  
            File.writeAllText(currentFilePath, newContent);  
        } else {  
            int newIndex = currentFileIndex + 1;  
            String newName = "audit_" + newIndex + ".txt";  
            String newFile = Path.combine(directoryName, newName);  
            File.writeAllText(newFile, newRecord);  
        }    }  
    private Sorted[] sortByIndex(String[] filePaths) {  
        final Integer[] idx = {0};  
        return Arrays.stream(filePaths)  
                .map(s -> new Sorted(idx[0]++, s))  
                .toArray(Sorted[]::new);  
    }}
```
- ê³¼ê±° ì´ë ¥ì—ì„œ ì°¾ìŒ
- ì²˜ìŒë¶€í„° í…ŒìŠ¤íŠ¸ ì‘ì„±í•¨
- File ì‹œìŠ¤í…œê³¼ ê°™ì€ ì™¸ë¶€ ì˜ì¡´ì„±ì€ í…ŒìŠ¤íŠ¸ í•˜ê¸° í˜ë“œë‹ˆê¹ ë©”ì†Œë“œ ì¶”ì¶œ í›„ ì•„ë˜ì™€ ê°™ì´ ì˜¤ë²„ë¼ì´ë”©í•´ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì´ ìˆìŒ 
	- ì´ê²ƒë³´ë‹¤ ì¸í„°í˜ì´ìŠ¤ë¡œ ì¶”ì¶œí•˜ëŠ”ê²Œ ì¢€ ë” ë‚˜ì€ ë°©ì‹ì´ë¼ í•¨

```java
class AuditManagerTest {  
  class TestAuditManager extends AuditManager {  
      private String[] files;  
      private String[] lines;  
      private String record;  
      private String filePath;  
  
      public TestAuditManager(int maxEntriesPerFile, String directoryName) {  
          super(maxEntriesPerFile, directoryName);  
      }  
      @Override  
      protected String[] getFiles() {  
          return this.files;  
      }  
      @Override  
      protected String[] readAllLines(String currentFilePath) {  
          return this.lines;  
      }  
      @Override  
      protected void writeAllText(String filePath, String record) {  
          this.filePath = filePath;  
          this.record = record;  
      }  }  
  
  @Test  
  void addRecordWithNormalCase() {  
      String directoryName = "audits";  
      String[] files = {  
              directoryName + "\\audit_1.txt",  
              directoryName + "\\audit_2.txt"  
      };  
      String[] lines = {  
              "Peter; 2019-04-06T16:30:00",  
              "Jane; 2019-04-06T16:40:00",  
              "Jack; 2019-04-06T17:00:00"  
      };  
      LocalDateTime dateTime = LocalDateTime.of(2022, 3, 25, 14, 0);  
      String visitorName = "Alice";  
  
      TestAuditManager auditManager = new TestAuditManager(3, directoryName);  
      auditManager.files = files;  
      auditManager.lines = lines; // given (stubbing)  
  
      auditManager.addRecord(visitorName, dateTime);  
  
      // characterize test  
      assertThat(auditManager.record).isEqualTo(visitorName + ";" + dateTime.toString());  
      assertThat(auditManager.filePath).isEqualTo("audits:audit_2.txt");  
  }}
```


## Repeated Switchedë¥¼ Polymorphicí•˜ê²Œ ë¦¬íŒ©í„°ë§ í•˜ê¸°

> ë¦¬íŒ©í„°ë§ 2íŒ ì˜ˆì œë¥¼ ì‚¬ìš©
> ë‹¨ì¶•í‚¤ì™€ ì¸í…”ë¦¬ì œì´ì—ì„œ ì§€ì›í•˜ëŠ” ë¦¬íŒ©í„°ë§ ê¸°ëŠ¥ì„ ì—°ìŠµí•˜ê¸° ì¢‹ë‹¤
> shift + shift, alt + enter, alt + shift + 7 (ì‚¬ìš© ìœ„ì¹˜ ì°¾ê¸°)

ğŸ”— [ì˜ˆì œ ì €ì¥ì†Œ](https://github.com/msbaek/refactoring-cases)
ğŸ”— [Parrot í´ë˜ìŠ¤](https://github.com/msbaek/refactoring-cases/blob/parrot/src/main/java/pe/msbaek/rfcases/repeating_switch/Parrot.java)
ğŸ”— [ê°•ì˜ì—ì„œ ì–¸ê¸‰í•œ ì‚¬ì´íŠ¸](https://sammancoaching.org/code_smells/repeated_switches.html)

**ë¦¬íŒ©í„°ë§ ì „**
```java
public class Parrot {  
    private final ParrotTypeEnum type;  
    private final int numberOfCoconuts;  
    private final double voltage;  
    private final boolean isNailed;  
  
    public Parrot(ParrotTypeEnum type, int numberOfCoconuts, double voltage, boolean isNailed) {  
        this.type = type;  
        this.numberOfCoconuts = numberOfCoconuts;  
        this.voltage = voltage;  
        this.isNailed = isNailed;  
    }  
    
    public double getSpeed() {  
        return switch (type) {  
            case EUROPEAN -> getBaseSpeed();  
            case AFRICAN -> Math.max(0, getBaseSpeed() - getLoadFactor() * numberOfCoconuts);  
            case NORWEGIAN_BLUE -> (isNailed) ? 0 : getBaseSpeed(voltage);  
        };    
	}  
        
    private double getBaseSpeed(double voltage) {  
        return Math.min(24.0, voltage * getBaseSpeed());  
    }  
    
    private double getLoadFactor() {  
        return 9.0;  
    }  
    
    private double getBaseSpeed() {  
        return 12.0;  
    }  
    
    public String getCry() {  
        return switch (type) {  
            case EUROPEAN -> "Sqoork!";  
            case AFRICAN -> "Sqaark!";  
            case NORWEGIAN_BLUE -> voltage > 0 ? "Bzzzzzz" : "...";  
        };    
	}
}
```
- shift ë‘ ë²ˆ ëˆŒëŸ¬ì„œ `Replace constructor with factory method` ìƒì„± í•˜ëŠ”ê±¸ë¡œ ì‹œì‘
- ì ì§„ì ìœ¼ë¡œ ë¦¬íŒ©í„°ë§ í•˜ëŠ” ê³¼ì •ì´ ì¸ìƒì ì´ë‹¤
- ì„œë¸Œ í´ë˜ìŠ¤ ìƒì„± í›„ íƒ€ì…ì´ í•„ìš”í•œ ë©”ì„œë“œëŠ” `push member down`ì…ë ¥í•˜ì—¬ ì„œë¸Œ í´ë˜ìŠ¤ ì „ì²´ì— ë³µì‚¬ ë¶™ì—¬ë„£ê¸° í•œë‹¤
	- ì´ë•Œ ì ‘ê·¼ì œì–´ìê°€ privateì¸ ê²½ìš° ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ ì ‘ê·¼ ëª»í•˜ë‹ˆ protectedë¡œ ë¦¬íŒ©í„°ë§í•¨
- íƒ€ì…ë³„ë¡œ ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì„ ì œê±°í•œë‹¤ 
	- switchì— íƒ€ì…ì„ ì§€ì •í•˜ë©´ ì¸í…”ë¦¬ì œì´ê°€ ë„ë‹¬í•  ìˆ˜ ì—†ëŠ” ë¸Œëœì¹˜ë¥¼ ì‚­ì œí•´ì¤€ë‹¤
		- `remove unreachable branch`
- Parrot ì¶”ìƒ í´ë˜ìŠ¤ì—ì„œ `numberOfCoconuts`, `voltage` , `isNailed`ë©¤ë²„ì˜ ì‚¬ìš©ì²˜ë¥¼ í™•ì¸ 
	- `alt + shift + 7`
	- `push member down` í†µí•´ ì‚¬ìš©í•˜ëŠ” ì„œë¸Œ í´ë˜ìŠ¤ë¡œ ì´ë™
	- ê·¸ë¦¬ê³  ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì œê±°

```java
public enum ParrotTypeEnum {  
    EUROPEAN,  
    AFRICAN,  
    NORWEGIAN_BLUE  
}
```


**ë¦¬íŒ©í„°ë§ í›„**
```java
public abstract class Parrot {  
    protected final ParrotTypeEnum type;  
  
    protected Parrot(ParrotTypeEnum type) {  
        this.type = type;  
    }  
    public static Parrot of(ParrotTypeEnum type, int numberOfCoconuts, double voltage, boolean isNailed) {  
        return switch (type) {  
            case EUROPEAN -> new EuropeanParrot();  
            case AFRICAN -> new AfricanParrot(numberOfCoconuts);  
            case NORWEGIAN_BLUE -> new NorwegianBlueParrot(voltage, isNailed);  
        };    }  
    protected double getBaseSpeed(double voltage) {  
        return Math.min(24.0, voltage * getBaseSpeed());  
    }  
    protected double getLoadFactor() {  
        return 9.0;  
    }  
    protected double getBaseSpeed() {  
        return 12.0;  
    }  
    public abstract double getSpeed();  
    public abstract String getCry();  
}
```
- ì„œë¸Œ í´ë˜ìŠ¤(íƒ€ì…) 3ê°œëŠ” ìƒëµ 


---

Use Caseë€ 
Actor
OOì˜ í•µì‹¬

[Uncle Bob - Clean Coders](https://cleancoders.com/)
- ìœ ë£Œ ê°•ì˜ì˜€êµ¬ë‚˜

[ocp ë‹¤ë¥¸ ì˜ˆì œ](https://github.com/msbaek/practical-refactoring-cases)

[ë¦¬íŒ©í„°ë§ tools ì˜ˆì œ](https://github.com/msbaek/refactoring-tools)
- ì—°ìŠµí•˜ê¸° ì¢‹ì„ë“¯í•˜ë‹¤

[ê¸°ìˆ ë¸”ë¡œê·¸](https://junuuu.tistory.com/764)


