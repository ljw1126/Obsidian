## 1장. 단위 테스트의 기초

**예제 자료**  
https://github.com/gilbutITbook/080410/tree/master

**마틴 파울러 블로그**
https://martinfowler.com/

**xunitpatterns**
http://xunitpatterns.com/index.html

### 1.2 단위 테스트의 정의

>[!info] 1.9절에서 단위 테스트의 최종 정의를 완성 시킨다 


>[!note] 위키백과
>단위 테스트는(unit test)는 컴퓨터 프로그래밍에서 예저 코드의 특정 모듈이 의도된 대로 정확히 작동하는지 검증하는 절차다. 즉, 모든 함수와 메서드에 대한 테스트 케이스(test case)를 작성하는 절차를 말한다. 이를 통해서 언제라도 코드 변경으로 인해 문제가 발생할 경우, 단시간 내에 이를 파악하고 바로 잡을 수 있도록 해준다. 이상적으로, 각 테스트 케이스는 서로 분리되어야 한다. 


**테스트를 작성할 대상**
- 주제(subject)
- 시스템(system)
- 테스트 대상 (Suite Under Test, SUT)


>[!note] SUT 정의
>SUT는 테스트 중인 주제, 시스템, 테스트의 모음(suite)을 의미하며, 일부 사람들은 테스트 중인 컴포넌트(component), 클래스(class), 코드(code)를 의미하는 CUT(Component, class, code Under Test)라는 용어를 사용하기도 한다. 무언가를 테스트할 때, 테스트하고자 하는 주요 대상을 SUT라고 한다


**작업 단위**
- 진입점의 호출부터 하나 이상의 종료점까지, 눈에 띄는 결과가 나타날 떄까지 발생하는 모든 작업을 의미한다
- 어떤 동작을 하는 **함수**가 있을 때
	- body : 작업 단위 전체나 일부를 의미
	- 입력 : 선언과 서명은 body로의 진입점
	- 출력 : 실행 결과, 함수의 종료점


65-66 진입점과 종료점
72-73 코드의 설계 방향
76-78 서드파티 호출, 의존성 정의

>[!tip] (한 함수에) 종료점이 여러 개인 경우 종료점마다 테스트를 만들어 분리하면 각 테스트끼리 영향을 주지 않고, 더 읽기 쉬우며, 디버깅하기도 쉽다

p80
**단위 테스트**는 작업 단위를 호출하고, 그 작업 단위의 최종 결과로서 하나의 특정 종료점을 테스트 검증 목표로 사용한다. 최종 결과가 테스트가 검증하고자하는 바와 다르면 단위 테스트는 실패한다. 단위 테스트 범위는 진입점과 종료점 사이

### 1.5 다른 종료점, 다른 기법
p83
서드 파티를 호출하는 종료점이 가장 다루기 꺼림
mock을 사용해야 하고

p94
**helper** 메서드
테스트 프레임워크 없이 테스트 작성 예제
Node.js assert : https://nodejs.org/api/assert.html


### 1.7 좋은 단위 테스트의 특징

테스트를 포기하게 되는 이유 (경험단)


#### 1.7.1 좋은 단위 테스트란
- 테스트 작성자 의도를 이해하기 쉬워야 한다
- 읽고 쓰기 쉬워야 한다
- 테스트를 자동화할 수 있어야 한다
- 같은 조건에서 실행 결과는 항상 같아야 한다
- 의미 있는 테스트여아 하고, 구체적인 결과를 제공하여 문제를 쉽게 파악하고 해결할 수 있어야 한다
- 누구나 쉽게 실행할 수 있어야 한다
- 실패할 경우 무엇이 잘못되었는지 쉽게 알 수 있어야 한다

**좋은 단위 테스트의 특징**
- 빠르게 실행되어야 한다
- 테스트 환경을 일관되게 유지하고, 테스트 결과가 항상 예측 가능해야 한다
- 다른 테스트와 완전히 독립적으로 실행되어 한다
- 시스템 파일, 네트워크, 데이터베이스가 없어도 메모리 내에서 실행되어야 한다
- 가능한 동기적인 흐름으로 실행되어야 한다(가능하다면 병렬 스레드 사용x)

>[!note] p97
>모든 테스트가 좋은 단위 테스트의 특성을 전부 만족하는 것은 사실 불가능에 가깝다.
>그렇기에 항상 모든 조건을 만족할 필요는 없다.
>단위 테스트 조건을 만족하기 까다로운 테스트는 적당한 리팩토링을 거쳐 보다 많은 조건을 충족하도록 만들 수도 있지만, 통합 테스트로 만드는 것도 하나의 방법이다


**데이터베이스나 다른 의존성을 스텁으로 대체하기**
- **Stub** : 간단히 말해 실제 의존성을 흉내내는 가짜 의존성
- 실제 의존성에 접근하지 않고도 테스트를 수행할 수 있어 테스트가 더 예측 가능하고 안정적으로 진행된다

//데이터베이스, dom 관련 
### 1.8 통합 테스트
p103 
