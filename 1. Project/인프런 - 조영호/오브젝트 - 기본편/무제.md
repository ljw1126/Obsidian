
## 섹션4. 객체 지향 기본 원칙 
### 객체 지향 설계 원칙 
`설계(design)`
- 코드를 배치하는 방식
	- 수행하는 기능은 동일하지만 구조가 다른 
- 설계가 필요한 이유 
	- 요구사항이 변경될 때 코드를 쉽고 안전하게 수정하기 위해
		- 객체 지향 설계가 필요한 이유와 같다

✅ `객체 지향 설계 원칙(수정하기 위한 코드 설계를 만들 수 있는 원칙)`
- 1. 객체의 `행동`을 `먼저` 구현하고 행동에 필요한 `데이터`를 `나중에` 선택하다
	- 객체 사이의 협력이 설계 된다
- 2. 협력에 필요한 `행동`을 `먼저` 결정하고 행동에 적합한 `객체`를 `나중에` 선택하라
	- 클래스의 내부 구조가 완성된다
	- 협력하는 객체가 데이터에 의존하지 않도록 만든다.

절차적인 설계는 사용될 문맥과 독립적으로 데이터 설계
- 이 경우 getter/setter를 통해 데이터의 내부 구조가 그대로 외부에 노출
- 데이터가 변경이 되면 데이터를 사용하는 프로세스도 변경된다
	- 사이드 이팩트

개선방법
- 데이터를 책임지는 로직을 데이터로 이동
- 데이터, 로직을 한 모듈에 담는다
	- 변경의 영향을 지역화
	- 이를 `책임의 이동`이라 부른다

설계 개선 
- 코드를 배치하는 방식을 변경했다
- 왜? 코드를 더 쉽게 수정하기 위해서 

> 데이터 대신 행동에 의존

>외부 객체가 데이터가 아니라 행동에 의존하도록 만든다.
>데이터 보다 행동을 먼저 만든다는게 이런 의미

> 데이터가 아닌 행동에 초점 

외부 객체의 요청에 응답하기 위해 (객체의 행동이) 필요

고립된 상태에서 클래스의 행동을 결정하는 것은 불가능 
- 문맥을 고려하지 않고 설계한 고립된 상태는 절차적인 설계가 만들어진다 

> - 협력에 필요한 요청에서 행동을 결정
> - 행동을 수행하는데 적합한 객체를 결정

> ✅ 결론적으로 행동에 초점을 두고, 그 이후에 행동을 구현하는데 적합한 데이터를 결정한다

객체가 다른 객체에게 도움을 요청하도록 하는 과정을 `협력(Collaboration)`이라고 한다

>[!note] 진정한 객체 지향 설계는 제한된 문맥 안에서 설계 된다
- 절차지향은 문맥을 고려하지 않는다. 
- 코드의 품질에 영향을 미친다. 


> [!note] 객체들의 협력 관계를 기반으로 어플리케이션을 설계하는 것을 책임 주도 설계라고 부른다 (Responsibility0-Driven Design)


### 책임 주도 설계 

**객체지향 설계 흐름**
1. `협력`을 위한 문맥 결정
2. 필요한 `책임`을 식별
3. 책임을 수행할 `객체`를 선택
4. `책임(메서드)` 구현
5. `데이터(필드)` 결정

**책임(Responsibility)**
- 협력에 참여하기 위해 객체가 수행하는 행동
	- DiscountPolicy의 책임 : "할인 요금을 계산하라"
	- DiscountCondiition의 책임 : "할인 여부를 판단하라"

객체가 수행할 책임을 기반으로 객체 사이의 관계를 설계 하는 것을 `책임 주도 설계(Responsibility-Driven Design)`

책임은 `행동` 관점이다
- `하는 것 (Doing)`
	-   객체를 생성하거나 계산을 하는 등의 스스로 하는 것
	- 다른 객체(협력자)의 행동을 시작시키는 것
	- 다른 객체(협력자)의 활동을 제어하고 조절하는 것
- `아는 것 (Knowing)`
	- private로 캡슐화된 상태(데이터)에 관해 아는 것
	- 관련된 객체(협력자)에 관하여 아는 것
	- 자신이 유도하거나 계산할 수 있는 것(상태와 협력자)에 관하여 아는 것

> 정보에 대해 답할 수 있어야 한다


✅ 책임이 중요한 이유
- 객체 내부의 세부사항과 관련된 결정을 뒤로 미루고 (외부) 객체들의 협력 구조에 초점을 두게 됨
- 협력이 책임을 설계하는 문맥을 제공한다
	- 그럼 협력을 설계하는데 필요한 문맥은 어디서?
		- 결론은, 시스템 외부에 제공해야 하는 기능이 협력을 위한 문맥으로 제공 (`애플리케이)

영화 예매 기능을 객체 지향적으로 설계한다는 의미는 
영화 예매 기능을 객체들 사이의 협력으로 구현하고
협력에 필요한 행동을 수행하는데 필요한 객체들을 선택하는 것을 의미 

✅ 시스템이 제공해야 하는 기능을 시스템에 전달된 요청으로 간주한다
- 영화 예매 기능을 수행하는데 필요한 객체들의 협력을 설계한다
- 여기서 핵심은!
	- `애플리케이션 기능을 기반으로 객체의 협력을 설계 하는 것이다`


**책임주도 설계 살펴보기**
- 애플리케이션이 제공할 기능 파악 
- 애플리케이션의 기능 요구사항을 시스템의 책임으로 변환 
- 시스템의 책임을 객체의 책임으로 변환
- 책임을 담당할 적절한 객체 선택
- 객체의 책임 일부를 수행하기 위해 외부의 도움이 필요하다면 다른 객체에게 도움을 요청
- 이 요청을 또 다른 객체의 책임으로 변환
- 책임을 담당할 적절할 객체 선택


**핵심은 책임 할당(이게 어려움)**
- 어떤 객체에게 책임을 할당할 것인가?


**객체 지향 설계 순서**
- (런타임에 수행할) 객체 협력에서 (컴파일 타임의) 클래스 구조의 순서로 진행
	- 런타임에 객체의 책임과 협력을 설계


**책임 주도 설계의 문맥**
- 애플리케이션의 기능이 협력을 위한 문맥을 제공한다
- 협력이 책임을 위한 문맥 제공한다

> ✅ 문맥을 제한하면 수정하고 유지보수하기 쉬운 객체를 얻게 된다



### 표현적 차이 줄이기
