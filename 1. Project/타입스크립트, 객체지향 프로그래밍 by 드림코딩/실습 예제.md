- [ì €ì¥ì†Œ](https://github.com/dream-coding-academy/typescript_motion) 
- npm ìœ¼ë¡œ tsc , live-server ì„¤ì¹˜
- [ì˜¨ë¼ì¸ - í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ íˆ´](https://plantuml.com/ko/class-diagram)
- ëˆˆì— ë„ëŠ” ë¶€ë¶„
	- 14.17ì— Composable ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€ 
	- 14.18 ì•„ì´í…œ ì‚­ì œì—ì„œ Component ì¸í„°í˜ì´ìŠ¤ì— ë©”ì„œë“œ ì¶”ê°€

**14.4 ~ 5. ë ˆì´ì•„ì›ƒê³¼ ì²«ë²ˆì§¸ Page ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°** 

<img src="./images/class-diagram1.png"/>

ğŸ“ src/app.ts
```typescript
import { PageComponent } from './components/page.js';

class App {
	private readonly page: PageComponent;

	constructor(appRoot: HTMLElement) {
		this.page = new PageComponent();
		this.page.attachTo(appRoot);
	}
}

new App(document.querySelector('.document')! as HTMLElement);
```

ğŸ“ src/components/page.ts
```typescript
export class PageComponent {
	private element: HTMLUListElement;

	constructor() {
		this.element = document.createElement('ul');
		this.element.setAttribute('class', 'page');
		this.element.textContent = 'This is PageComponent';
	}

	attachTo(parent: HTMLElement, position: InsertPosition = 'afterbegin') {
		parent.insertAdjacentElement(position, this.element);	
	}
}
```



**14.6 DOMì„ ì˜ ëª¨ë¥´ëŠ” ..**
- HTML DOMì€ `tag`
- JavaScriptì—ì„œëŠ” `node`ë¼ê³  ë¶€ë¦„
- `Node -> EventTarget`ì„ ìƒì† ë°›ìŒ
	- Node í•˜ìœ„ì—ëŠ” Document, Element, Textê°€ ìˆê³ , ìƒì† ë°›ìŒ

**14.7 ~ 8 ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°**

<img src="./images/class-diagram2.png"/>

ğŸ“ src/components/page.ts â¡ï¸ src/components/page/page.ts

ğŸ“ src/components/page/item/image.ts
```typescript 
export class ImageComponent {

	private element: HTMLElement;
	
	constructor(title: string, url: string) {
		const template = document.createElement('template');
		
		template.innerHTML = `
			<section class="image">
				<div class="image__holder">
					<img class="image__thumbnail">
				</div>
				<p class="image__title"></p>
			</section>
		`;
		
		this.element = template.content.firstElementChild! as HTMLElement;
		
		const imageElement = this.element.querySelector('.image__thumbnail')! as HTMLImageElement;
	
		imageElement.src = url;
		imageElement.alt = title;
		
		const titleElement = this.element.querySelector('.image__title')! as HTMLParagraphElement;
		
		titleElement.textContent = title;
	
	}
	
	attachTo(parent: HTMLElement, position: InsertPosition = 'afterbegin') {
		parent.insertAdjacentElement(position, this.element);
	}

}
```
- `<template>` íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?
- `app.ts`ì— ì¶”ê°€

```typescript 
import { PageComponent } from './components/page.js';
import { ImageComponent } from './components/page/item/image.js';

class App {
	private readonly page: PageComponent;
	
	constructor(appRoot: HTMLElement) {
		this.page = new PageComponent();
		this.page.attachTo(appRoot);
	
		const image = new ImageComponent('Image Title', 'https://picsum.photos/600/300');
		image.attachTo(appRoot, 'beforeend');
	}

}

new App(document.querySelector('.document')! as HTMLElement);
```

```shell
$ tsc -w 
```
- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì»´íŒŒì¼í•´ì„œ `dist`  ë””ë ‰í„°ë¦¬ì— ìƒì„±
- `dist/*.js` íŒŒì¼ì„ index.htmlì—ì„œ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©


**14.9 ~ 14.10 ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í„°ë§** 
- imageì™€ pageëŠ” ê³µí†µì ì¸ ì¼ì„ í•˜ê³  ìˆë‹¤
- ì¤‘ë³µ ë¡œì§ì„ í´ë˜ìŠ¤ì— ì˜¬ë¦°ë‹¤
	- ì¸í„°í˜ì´ìŠ¤ : ì—­í• , êµ¬í˜„ì²´ : ì •ì±…

<img src="./images/class-diagram3.png"/>

```typescript 
export interface Component {
	attachTo(parent: HTMLElement, position?: InsertPosition): void;
}

class BaseComponent<T extends HTMLElement> implements Component {
	protected readonly element: T;
	
	constructor(htmlString: string) {
		const template = document.createElement('template');
		template.innerHTML = htmlString;
		this.element = template.content.firstElementChild! as T;
	}

	attachTo(parent: HTMLElement, position: InsertPosition = 'afterbegin') {
		parent.insertAdjacentElement(position, this.element);
	}

}
```
- `image.ts` , `page.ts`ë¥¼ ë¦¬íŒ©í„°ë§í•œë‹¤ 
- ì œë„¤ë¦­ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ”ë‹¤
- template íƒœê·¸ì— ìš”ì†Œë¥¼ í•œë²ˆ ê°ì‹¼ í›„ this.element í• ë‹¹í•˜ëŠ” í–‰ìœ„ë¥¼ BaseComponentì—ì„œ í•œë‹¤

ğŸ“ src/components/page/page.ts
```typescript 
import { BaseComponent } from "./component.js";

export class PageComponent extends BaseComponent<HTMLUListElement> {
	constructor() {
		super('<ul class="page">This is PageComponent</ul>');
	}
}
```

ğŸ“ src/components/page/item/image.ts
```typescript

import { BaseComponent } from "../../component.js";

export class ImageComponent extends BaseComponent<HTMLElement>{
	constructor(title: string, url: string) {
		super(`
		<section class="image">
			<div class="image__holder">
				<img class="image__thumbnail">
			</div>
			<p class="image__title"></p>
		</section>`);

	const imageElement = this.element.querySelector('.image__thumbnail')! as HTMLImageElement;

	imageElement.src = url;
	imageElement.alt = title;

	const titleElement = this.element.querySelector('.image__title')! as HTMLParagraphElement;
	
	titleElement.textContent = title;
	}
}

```

**ëª¨ë“  ì„¹ì…˜ êµ¬í˜„í•˜ê¸°** 

<img src="./images/class-diagram4.png"/>

> [!info]
> **HTMLHeadElement**: HTMLì˜ head íƒœê·¸ë¥¼ ëŒ€í‘œí•˜ëŠ” ìš”ì†Œ
> **HTMLHeadingElement**: h1ê³¼ ê°™ì€ heading íƒœê·¸ë¥¼ ëŒ€í‘œí•˜ëŠ” ìš”ì†Œ

ğŸ“ src/components/page/item/note.ts
```typescript
import { BaseComponent } from "../../component.js";

export class NoteComponent extends BaseComponent<HTMLElement> {
	constructor(title: string, body: string) {
		super(`<section class="note">
		<h2 class="note__title"></h2>
		<p class="note__body"></p>
		</section>`);
		
		const titleElement = this.element.querySelector('.note__title')! as HTMLHeadElement;
		
		titleElement.textContent = title;
		
		const bodyElement = this.element.querySelector('.note__body')! as HTMLParagraphElement;
		
		bodyElement.textContent = body;
		
	}
}
```

ğŸ“ src/components/page/item/todo.ts
```typescript
import { BaseComponent } from "../../component.js";

export class TodoComponent extends BaseComponent<HTMLElement> {
	constructor(title: string, todo: string) {
		super(`<section class="todo">
		<h2 class="todo__title"></h2>
		<input type="checkbox" class="todo-checkbox">
		</section>`);
		
		const titleElement = this.element.querySelector('.todo__title')! as HTMLHeadElement;
		titleElement.textContent = title;
	
		const todoElement = this.element.querySelector('.todo-checkbox')! as HTMLInputElement;
		todoElement.insertAdjacentText('afterend', todo);
	}

}

```

ğŸ“ src/components/page/item/video.ts
```typescript
import { BaseComponent } from "../../component.js";

export class VideoComponent extends BaseComponent<HTMLElement> {

	constructor(title: string, url: string) {
		super(`
		<section class="video">
		<div class="video__player">
		<iframe frameborder="0" class="video__iframe"></iframe>
		</div>
		<h3 class="video__title"></h3>
		</section>`);
		
		const iframe = this.element.querySelector('.video__iframe')! as HTMLIFrameElement;
		
		iframe.src = this.convertToEmbeddedURL(url);
		
		const titleElement = this.element.querySelector('.video__title')! as HTMLHeadingElement;
		
		titleElement.textContent = title;
	}

	private convertToEmbeddedURL(url: string): string {
		const regExp = /^(?:https?:\/\/)?(?:www\.)?(?:(?:youtube.com\/(?:(?:watch\?v=)|(?:embed\/))([a-zA-Z0-9-]{11}))|(?:youtu.be\/([a-zA-Z0-9-]{11})))/;
		const match = url.match(regExp);
		const videoId = match ? match[1] || match[2] : undefined;
		
		if(videoId) {
			return `https://www.youtube.com/embed/${videoId}`;
		}
		
		return url;	
	}

}

```


```typescript
import { PageComponent } from './components/page.js';
import { ImageComponent } from './components/page/item/image.js';
import { NoteComponent } from './components/page/item/note.js';
import { TodoComponent } from './components/page/item/todo.js';
import { VideoComponent } from './components/page/item/video.js';

class App {
	private readonly page: PageComponent;

	constructor(appRoot: HTMLElement) {
		this.page = new PageComponent();
		this.page.attachTo(appRoot);
		
		const image = new ImageComponent('Image Title', 'https://picsum.photos/600/300');
		image.attachTo(appRoot, 'beforeend');
		
		const note = new NoteComponent('Note Title', 'Note Body');
		note.attachTo(appRoot, 'beforeend');
		
		const todo = new TodoComponent('Todo Title', 'Todo Item');
		todo.attachTo(appRoot, 'beforeend');
		
		const video = new VideoComponent('Video Title', 'https://youtu.be/eti78d9CL4I');
		video.attachTo(appRoot, 'beforeend');
	}
}

new App(document.querySelector('.document')! as HTMLElement);
```


**14.16 ~ 20 PageItemComponent (ì»¨í…Œì´ë„ˆ) ë§Œë“¤ê¸°, ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€**
- ê³µí†µì ì¸ ì‚­ì œ ë²„íŠ¼ ê°™ì€ ê±¸ ë„£ê¸° ìœ„í•´ í•œë²ˆ ë” ê°ì‹¼ë‹¤
- Composal ì¸í„°í˜ì´ìŠ¤ë‚˜ Component ì¸í„°í˜ì´ìŠ¤ì— ì‹ ê·œ ë©”ì„œë“œ ì¶”ê°€

<img src="./images/class-diagram5.png"/>

```typescript

import { BaseComponent, Component } from "./component.js";

export interface Composable {
	addChild(child: Component): void;
}

type OnCloseListener = () => void;

class PageItemComponent extends BaseComponent<HTMLElement> implements Composable {

	private closeListener?: OnCloseListener;
	
	constructor() {
		super(`<li class="page-item">
		<section class="page-item__body"></section>
		<div class="page-item__controls">
		<button class="close">&times;</button>
		</div>
		</li>`);
		
		const closeBtn = this.element.querySelector('.close')! as HTMLButtonElement;
		
		closeBtn.onclick = () => {
			this.closeListener && this.closeListener(); // nullì´ ì•„ë‹ˆë¼ë©´ í˜¸ì¶œ
		}
	}
	
	addChild(child: Component) { // image,  video, todo, note 
		const container = this.element.querySelector('.page-item__body')! as HTMLElement;
		child.attachTo(container); // containerì— childë¥¼ ìš”ì†Œ ì¶”ê°€
	}
	
	setOnCloseListener(listener:OnCloseListener) { // ì‚­ì œìš© ì½œë°±ì„ ë°›ì•„ì„œ ì €ì¥
		this.closeListener = listener;
	}

}

  

export class PageComponent extends BaseComponent<HTMLUListElement> implements Composable {
	constructor() {
		super('<ul class="page"</ul>');
	}

	addChild(section: Component) { // video, note, todo, image
			const item = new PageItemComponent();
			item.addChild(section); // PageItemComponent ì•ˆì— section ì¶”ê°€
			item.attachTo(this.element, 'beforeend'); // this.element == page
			item.setOnCloseListener(() => {
				item.removeFrom(this.element);
			});
	}
}

```
- âœ… Composable ì¸í„°í˜ì´ìŠ¤ì— addChild(..) ì •ì˜
- âœ… Component ì¸í„°í˜ì´ìŠ¤ì— removeFrom(..) ì •ì˜ 
	- BaseComponentì—ì„œ ê³µí†µ êµ¬í˜„
	- ë¶€ëª¨ ìš”ì†Œì—ì„œ itemì„ ì‚­ì œ

>[!info] ì‚­ì œ ê¸°ëŠ¥ì„ ì½œë°± í•¨ìˆ˜ë¡œ ì •ì˜í•œ ì´ìœ ì— ëŒ€í•´ 
>ì €ëŠ” ëª¨ë“  í˜ì´ì§€ì˜ ì•„ì´í…œë“¤ì€ í˜ì´ì§€ì— ì¢…ì†ë˜ì–´ì ¸ ìˆìœ¼ë¯€ë¡œ,Â **í˜ì´ì§€ì—ì„œ ë‚´ ì•ˆì— ì–´ë–¤ í˜ì´ì§€ ì•„ì´í…œë“¤ì´ ìˆëŠ”ì§€ ì•Œê³  ì‹¶ì„ë•Œ,**Â ì¡´ì¬í•˜ëŠ” ëª¨ë“  í˜ì´ì§€ ì•„ì´í…œë“¤ì— ëŒ€í•´Â **ê´€ë¦¬ í•´ì•¼ í•˜ëŠ” ê²½ìš°**,Â **í˜ì´ì§€ê°€ ì‚­ì œë˜ì–´ì§€ëŠ” í˜ì´ì§€ ì•„ì´í…œì— ëŒ€í•´ì„œ í˜ì´ì§€ê°€ ì•Œê³  ìˆì–´ì•¼ í•˜ê² ì£ **?Â ê·¸ëŸ´ë•ŒëŠ” ëª¨ë“  í˜ì´ì§€ ì•„ì´í…œì„ ê°€ì§€ê³  ìˆëŠ” í˜ì´ì§€ í´ë˜ìŠ¤ì—ì„œ í•„ìš”í•œ ë¡œì§ë“¤ì„ ì²˜ë¦¬ í•´ì£¼ëŠ”ê²ƒì´ ì¢‹ì•„ìš”.
>â¡ï¸ ê´€ë¦¬ì˜ ì£¼ì²´ê°€ PageComponentê°€ ë˜ì—ˆìœ¼ë©´ ì‹¶ìœ¼ë‹ˆê¹ ì½œë°±ìœ¼ë¡œ ì„ ì–¸í•´ì„œ ì²˜ë¦¬í•œë‹¤ëŠ” ê±°êµ°..

>[!info] PageItemComponent ìƒì„±ìì—ì„œ ì‚­ì œ í•¨ìˆ˜ë¥¼ ë°›ì§€ ì•ŠëŠ” ì´ìœ  
>ì¢‹ì€ ì§ˆë¬¸ ì´ì˜ˆìš” ğŸ‘ ë³´í†µ ì´ë²¤íŠ¸ ê´€ë ¨ ë“±ë¡ í•¨ìˆ˜ë“¤ì€ ìƒì„±ì ë³´ë‹¤ëŠ” ë³„ë„ë¡œ ë“±ë¡í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  ìˆì–´ìš”. ìš°ë¦¬ê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ ë‹¤ë¥¸ ê°œë°œìë“¤ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ APIë¥¼ ë§Œë“œëŠ” ê²½ìš°ì—ë„, ê·¸ë¦¬ê³  ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë‚˜ ë…¸ë“œ ê·¸ ì™¸ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ë“¤ë„ ê·¸ë ‡ê²Œ ì œê³µí•˜ê³  ìˆì§€ìš” :)
>
>ì´ìœ ëŠ” "ë“±ë¡í•˜ë‹¤"ëŠ” í•„ìš”ì— ì˜í•´ì„œ, ì¶”í›„ì— ë“±ë¡ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì‹œì  ë³´ë‹¤ëŠ”, ê·¸ í›„ì— ìœ ë™ì„±ìˆê²Œ ì¶”ê°€ ë  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ê¸° ìœ„í•´ì„œì£ . **ìƒì„±ìëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ ì •ë§ ê¼­! í•„ìš”í•œ ìš”ì†Œë“¤ë§Œ ì¸ìë¡œ ë°›ì•„ì˜¤ëŠ” ê²ƒì´ ì¢‹ì•„ìš”.**


```typescript
export interface Component {
	attachTo(parent: HTMLElement, position?: InsertPosition): void;
	removeFrom(parent: HTMLElement): void;	 // âœ¨ ì‹ ê·œ ì¶”ê°€
}

// Encapsulate the HTML element creation
export class BaseComponent<T extends HTMLElement> implements Component {
	protected readonly element: T;
	
	constructor(htmlString: string) {
		const template = document.createElement('template');
		template.innerHTML = htmlString;
		this.element = template.content.firstElementChild! as T;
	}

	attachTo(parent: HTMLElement, position: InsertPosition = 'afterbegin') {
		parent.insertAdjacentElement(position, this.element);	
	}
	
	removeFrom(parent: HTMLElement) { // âœ¨ ê³µí†µ êµ¬í˜„
		if(parent !== this.element.parentElement) {
			throw new Error('parent mismatch.');
		}
		
		parent.removeChild(this.element);
	}

}

```

> [!info]
> **ê°ì²´ì§€í–¥ì´ë€, ë¬¸ì œë¥¼ ë°”ë¼ë³¼ë•Œ, ê¸°ëŠ¥ì„ ë°”ë¼ë³¼ë•Œ ê´€ë ¨ëœ ë¡œì§ë“¤ë¼ë¦¬ ë¬¶ì–´ì„œ ê°ì²´ë“¤ë¡œ ë°”ë¼ë³´ê³  ìƒê°í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ì˜ˆìš” :)**Â 
> ìš°ë¦¬ê°€ ì„¸ìƒì„ ë°”ë¼ë³´ë©´, í•™ìƒ, ê·¼ë¡œì, ê·¸ë¦¬ê³  íšŒì‚¬, ê·¼ë¡œìëŠ” ì¼ì„ í•˜ê³ , íšŒì‚¬ëŠ” ê·¼ë¡œìì—ê²Œ ì›”ê¸‰ì„ ì§€ë¶ˆí•˜ê³ , ì´ë ‡ê²Œ ê°ì²´ë“¤ ë‹¨ìœ„ë¡œ ì„œë¡œ ìœ ê¸°ì ìœ¼ë¡œ ì´ë£¨ì–´ ì§€ëŠ”ê²ƒì²˜ëŸ¼ìš”.
> **ê·¸ë˜ì„œ ë§ì€ ì—°ìŠµì´ í•„ìš”í•˜ë‹µë‹ˆë‹¤.**






ğŸ“‹ **Composal ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶„ë¦¬í•œ ì´ìœ ì— ëŒ€í•´**
```text
ì§ˆë¬¸ ì˜ ì •ë¦¬í•´ì„œ ì‘ì„±í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ ğŸ‘

ì‹œìŠ¤í…œ ë””ìì¸ì€ ì–´ë–»ê²Œ ì„¤ê³„ í•˜ëƒì— ë”°ë¼ì„œ, ê°œì¸ì´ ê°€ì§€ê³  ìˆëŠ” ì„ í˜¸ë„ì™€ ë¯¿ìŒì— ë”°ë¼ì„œ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.

ì•„í‚¤í…ì³ ì„¤ê³„ì—ëŠ” 100% ì •í•´ì§„ ì •ë‹µì´ ì—†ë‹µë‹ˆë‹¤.
ê·¸ë˜ì„œ ê¾¸ë¥´ë‹˜ì´ ìƒê°í•˜ì‹œëŠ”ëŒ€ë¡œ í•˜ì…”ë„ ê´œì°®ì•„ìš”.

ì œê°€ ê·¸ë ‡ê²Œ ë””ìì¸í•œ ë°°ê²½ì„ ì¡°ê¸ˆ ì„¤ëª…í•´ ë“œë ¤ë³´ë„ë¡ í• ê»˜ìš”.

ìš°ì„ ,Â **Composable ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ì„ Containerë¡œ ë³€ê²½**í•´ ë³´ë„ë¡ í• ê»˜ìš”. ì¡°í•©ì´ ê°€ëŠ¥í•œ ì¸í„°í˜ì´ìŠ¤ ë³´ë‹¤ëŠ” ì»¨í…Œì´ë„ˆë¡œ ì´ë¦„ì„ ë°”ê¾¸ëŠ”ê²Œ ì´í•´í•˜ê¸°ê°€ ì‰¬ìš¸ê²ƒ ê°™ì•„ìš”.

ì»´í¬ë„ŒíŠ¸(Component)ëŠ” HTML íƒœê·¸ë¥¼ ìš°ë¦¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” UIë¡œ í‘œí˜„í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ì˜ˆìš”.

ì´ë¯¸ì§€, ë…¸íŠ¸, íˆ¬ë‘, ë¹„ë””ì˜¤ ê°™ì€ ë¡œìš°ë ˆë²¨ UI ì»´í¬ë„ŒíŠ¸ë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ì„œì£ . ì»´í¬ë„ŒíŠ¸ ìì²´ì—ëŠ” ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ìê¸°ìì‹ ì—ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤(ê·œê²©)ì´ ì—†ì–´ìš”.Â **ì»´í¬ë„ŒíŠ¸ëŠ” UIë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°€ì¥ ìµœì†Œí•œì˜ ì‘ì€ ë‹¨ìœ„ì´ì£ .**

ì»´í¬ë„ŒíŠ¸ëŠ”Â **ì™¸ë¶€ì—ì„œë§Œ**Â "ì•¼, ì—¬ê¸° ì»¨í…Œì´ë„ˆ ë¶€ëª¨ê°€ ìˆìœ¼ë‹ˆ, ì—¬ê¸°ì— ë“¤ì–´ê°€ë©´ ë¼" ë¼ê³  ì„¤ì •í•  ìˆ˜ ìˆì–´ìš”.

component.attachTo(ë¶€ëª¨ì»¨í…Œì´ë„ˆ);

  

ì»¨í…Œì´ë„ˆ(Container, ì¦‰ Composable)ëŠ” ìš°ë¦¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì»¨í…Œì´ë„ˆë¡œ í‘œí˜„í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ì˜ˆìš”.Â **ê·¸ ìì²´ë§Œìœ¼ë¡œëŠ” ë³„ë„ì˜ UIê°€ ì—†ê³ , ë‹¤ë¥¸ ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì¡°í•©ë§Œ í•  ìˆ˜ ìˆëŠ” ë¶€ëª¨ ì»¨í…Œì´ë„ˆì£ .**Â Pageê°€ ëŒ€í‘œì ì´ê³ , ë‚˜ì¤‘ì— ListView ë“±ê³¼ ê°™ì´ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ìì‹ìœ¼ë¡œ ê°€ì§€ëŠ” ì»¨í…Œì´ë„ˆìš© ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.

**ì»¨í…Œì´ë„ˆ**ëŠ” ëª…ì‹œì ìœ¼ë¡œ "ë‚˜ëŠ” ë¶€ëª¨ ì»¨í…Œì´ë„ˆì´ê³ , ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë‚´ë¶€ì ìœ¼ë¡œ ê°€ì§ˆ ìˆ˜ ìˆì–´" ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆì–´ìš”.

**ì»´í¬ë„ŒíŠ¸**ëŠ” UIë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” ìœ ë‹›ì¼ë¿, ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥(ì¸í„°í˜ì´ìŠ¤, ê·œê²©)ì€ ì—†ì–´ìš”.

  

**Component**: UIë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì‘ì€ ë‹¨ìœ„

**Container**: ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ì»¨í…Œì´ë„ˆ (ë¡œì§€ì»¬í•˜ê²Œë§Œ ê°€ëŠ¥)

**Component & Container**: ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°í•©í•  ìˆ˜ ìˆëŠ” UI ì»´í¬ë„ŒíŠ¸

  

ìœ„ ì„¸ê°€ì§€ ì°¨ì´ì ì„ ë³´ì‹œë©´ ì§ˆë¬¸ì— ëŒ€í•œ ëª¨ë“  ë‹µì´ ë ê²ƒ ê°™ì€ë°, ì–´ë– ì‹ ê°€ìš”?

ê·¸ë˜ë„ "ì™œ ì´ë ‡ê²Œ ë‚˜ëˆ„ì—ˆëƒ?", "ê·¸ëƒ¥ Component ì¸í„°í˜ì´ìŠ¤ì— addChildë„ ë‘ë©´ ë˜ì§€ ì´ë ‡ê²Œ êµ¬ì§€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‘ê°œë¡œ ë‚˜ëˆ„ì—ˆëƒ?" ê³  ì§ˆë¬¸ì„ í•˜ì‹ ë‹¤ë©´:

**ì»´í¬ë„ŒíŠ¸ === ì‘ì€ ë‹¨ìœ„ì˜ UI**Â ë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ì„œ.

ì‘ì€ ë‹¨ìœ„ì˜ ì»´í¬ë„ŒíŠ¸ì™€ ê·¸ê²ƒë“¤ì„ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ì»¨í…Œì´ë„ˆì˜ ëª…í™•í•œ êµ¬ë¶„ê³¼ ê°ê°ì˜ ì œì•½ì‚¬í•­(ê°ê° í•  ìˆ˜ ìˆëŠ” ì—­í™œ)ì„ ë³„ë„ë¡œ ë§Œë“¤ê³  ì‹¶ì–´ì„œ.

```




**ğŸ‘€ app.ts ì˜ html í…Œê·¸ ìƒì„± ìˆœì„œ**

`PageComponent` ìƒì„±í•˜ê²Œ ë˜ë©´ .document í•˜ìœ„ì— ul íƒœê·¸ ì¶”ê°€ë¨
```html
<main class="document">
	<ul class="page"></ul>
</main>
```

`ImageComponent` ìƒì„±
```html
 <section class="image">
	<div class="image__holder">
		<img class="image__thumbnail">
	</div>
	<h2 class="image__title"></p>
</section>
```

PageComponentì˜ addChild(image) í˜¸ì¶œ 
```typescript
// PageComponent
addChild(section: Component) {
	const item = new PageItemComponent();
	item.addChild(section); 
	item.attachTo(this.element, 'beforeend');
	item.setOnCloseListener(() => {
		item.removeFrom(this.element);
	});
}
```

PageItemComponent ìƒì„± í›„ addChilld í˜¸ì¶œí•˜ê²Œ ë˜ë©´ .page-item__bodyì— section ì¶”ê°€ë¨
```html
<li class="page-item">
	<section class="page-item__body">
		// ì—¬ê¸° ì¶”ê°€
	</section>
	<div class="page-item__controls">
	  <button class="close">&times;</button>
	</div>
</li>
```

```html
<li class="page-item">
	<section class="page-item__body">
	    <section class="image"> // ì—¬ê¸° ì¶”ê°€
		<div class="image__holder">
		    <img class="image__thumbnail">
		</div>
		<h2 class="image__title"></p>
	    </section>
	</section>
	<div class="page-item__controls">
              <button class="close">&times;</button>
	</div>
</li>   
```

PageItemComponent ìƒì„±í•œ ê²ƒì„ PageComponentì˜ `this.element`ì— ì¶”ê°€ 
- `item.attachTo(this.element, 'beforeend');` 

âœ… ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸ê°€ ì¶”ê°€ëœ ê²°ê³¼
- ê²°êµ­ PageComponentì˜ this.elementê°€ ul íƒœê·¸ì´ë¯€ë¡œ ê·¸ ì•ˆì— ê³„ì† ìŒ“ì„

```html
<main class="document">
	<ul class="page"> // PageComponentì˜ this.element í•´ë‹¹
		<li class="page-item"> // ImageComponent ê²°ê³¼
			<section class="page-item__body">
			    <section class="image"> // ì—¬ê¸° ì¶”ê°€
				<div class="image__holder">
				    <img class="image__thumbnail">
				</div>
				<h2 class="image__title"></p>
			    </section>
			</section>
			<div class="page-item__controls">
			      <button class="close">&times;</button>
			</div>
		</li>
	</ul>
</main>
```


**14.20 DI ë¦¬íŒ©í† ë§**
```typescript
// PageComponent
addChild(section: Component) {  
    const item = new PageItemComponent();  // ğŸ’© êµ¬í˜„ì²´ì— ì§ì ‘ ì˜ì¡´ (coupling)
    item.addChild(section);  
    item.attachTo(this.element, 'beforeend');  
    item.setOnCloseListener(() => {  
        item.removeFrom(this.element);  
    });
}
```

âœ…ê·œê²© ì •ì˜
- `*ItemCompoment`ë¼ëŠ” Page í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì¶”ê°€ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì¶”ìƒí™” 
- `setOnCloseListener(..)`ì´ ê¼­ êµ¬í˜„ì´ ë˜ìˆì–´ì•¼ í•œë‹¤ê³  **ê·œê²© ëª…ì„¸** ì‘ì„±
```typescript 
interface SectionContainer extends Component, Composable {  
    setOnCloseListener(listener: OnCloseListener): void;  
}
```


```typescript
import { BaseComponent, Component } from "./component.js";  
  
export interface Composable {  
    addChild(child: Component): void;  
}  
  
type OnCloseListener = () => void;  

// âœ¨ ì‹ ê·œ ì •ì˜
interface SectionContainer extends Component, Composable {  
    setOnCloseListener(listener: OnCloseListener): void;  
}  

// âœ¨ ì‹ ê·œ ì •ì˜
type SectionContainerConstructor = {  
    new (): SectionContainer;  
}  
  
export class PageItemComponent extends BaseComponent<HTMLElement> implements SectionContainer {  
    private closeListener?: OnCloseListener;  
  
    constructor() {  
        super(`<li class="page-item">  
            <section class="page-item__body"></section>            
            <div class="page-item__controls">              
	            <button class="close">&times;</button>            
			</div>          
			</li>`);  
  
          const closeBtn = this.element.querySelector('.close')! as HTMLButtonElement;  
          closeBtn.onclick = () => {  
            this.closeListener && this.closeListener(); // nullì´ ì•„ë‹ˆë¼ë©´ í˜¸ì¶œ  
          }  
    }  
    
    addChild(child: Component) {  
        const container = this.element.querySelector('.page-item__body')! as HTMLElement;  
        child.attachTo(container);  
    }  
    
    setOnCloseListener(listener:OnCloseListener) {  
        this.closeListener = listener;  
    }
}  
  
export class PageComponent extends BaseComponent<HTMLUListElement> implements Composable {  
	// DI ì£¼ì… ë°›ìŒ
	constructor(private pageItemConstructor: SectionContainerConstructor) {  
        super('<ul class="page"></ul>');  
    }  
    
    addChild(section: Component) {  
        const item = new this.pageItemConstructor();  
        item.addChild(section);  
        item.attachTo(this.element, 'beforeend');  
        item.setOnCloseListener(() => {  
            item.removeFrom(this.element);  
        });    
	}
}
```


>[!tip] ì½”ë“œ ì§œê¸° ì „ì— êµ¬ì¡° ì„¤ê³„ë¥¼ í•˜ëŠ”ê°€?
>ë³µì¡í•˜ê³  í° ê·œëª¨ ì¼ìˆ˜ë¡, ë¯¸ë¦¬ ì†Œí”„íŠ¸ì›¨ì–´ ì‹œìŠ¤í…œ(ë””ìì¸) ì„¤ê³„ í•˜ê³  êµ¬í˜„ì— ë“¤ì–´ ê°„ë‹µë‹ˆë‹¤. ì§€ì‹(ê¸°ë³¸ êµ¬í˜„ ì§€ì‹, ì‹œìŠ¤í…œ ë””ìì¸, ë””ìì¸ íŒ¨í„´, ë¦¬íŒ©í† ë§ ë“±) ê³¼ ê²½í—˜ì´ ì •ë§ ì¤‘ìš”í•˜ì£ .

> **ì¢‹ì€ ê¸€** 
> https://academy.dream-coding.com/courses/player/typescript/lessons/578/discussions/4624

**ğŸ¤– Gemini**
`SectionContainerConstructor`ì˜ íƒ€ì… í‘œê¸°ë²•ì´ ì–´ìƒ‰í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” TypeScriptì—ì„œ **ìƒì„±ì í•¨ìˆ˜(Constructor Function)ì˜ íƒ€ì…**ì„ ì •ì˜í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

`new (): SectionContainer`ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì˜ë¯¸ë¥¼ ê°€ì§‘ë‹ˆë‹¤:
- **`new`**: ì´ íƒ€ì…ì´ **`new` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í˜¸ì¶œë  ìˆ˜ ìˆëŠ” ìƒì„±ì**ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- **`()`**: ìƒì„±ìê°€ **ì¸ì ì—†ì´ í˜¸ì¶œ**ë¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë§Œì•½ ì¸ìê°€ ìˆë‹¤ë©´ `new (name: string): SectionContainer` ì™€ ê°™ì´ í‘œí˜„í–ˆì„ ê²ë‹ˆë‹¤.
- **`: SectionContainer`**: ì´ ìƒì„±ìê°€ **`SectionContainer` íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜**í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
    
ë”°ë¼ì„œ `SectionContainerConstructor` íƒ€ì…ì€ **`SectionContainer` ì¸í„°í˜ì´ìŠ¤ì˜ ê·œê²©ì„ ì§€í‚¤ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ìƒì„±ì í•¨ìˆ˜**ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤. ì¢€ ë” í’€ì–´ì„œ ì„¤ëª…í•˜ë©´, ì´ íƒ€ì…ì€ "ì¸ì ì—†ì´ í˜¸ì¶œí•˜ë©´ `SectionContainer` íƒ€ì…ì˜ ê°ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ìƒì„±ì"ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
```typescript
class MySectionContainer implements SectionContainer {
    setOnCloseListener(listener: OnCloseListener): void {
        // ë¦¬ìŠ¤ë„ˆ ì„¤ì • ë¡œì§
    }

    // Componenent, Composable ì¸í„°í˜ì´ìŠ¤ì˜ ë©¤ë²„ êµ¬í˜„ ê°€ì •
    // ..
}

// MySectionContainerëŠ” SectionContainerConstructor íƒ€ì…ìœ¼ë¡œ í• ë‹¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
const SectionContainerFactory: SectionContainerConstructor = MySectionContainer;

// ì´ì œ SectionContainerFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ SectionContainer ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
const sectionInstance: SectionContainer = new SectionContainerFactory();
```


>[!info] ê¸°ì¡´ì— PageComponentëŠ” PageItemComponentì— ì»¤í”Œë§ì´ ê°•í•˜ê²Œ ë˜ì–´ ìˆì—ˆë‹¤. ê·¸ë˜ì„œ ìˆ˜ì •í•˜ê¸° ìœ„í•´ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ê³  ì»´íŒŒì¼ì„ ë‹¤ì‹œ í•´ì•¼ í–ˆë‹¤. ìƒì„±ì ì£¼ì… ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•œ ì´í›„ì—ëŠ” PageComponent ë§ˆë‹¤ ì„œë¡œ ë‹¤ë¥¸ SectionContainer êµ¬í˜„ì²´ë¥¼ ì£¼ì…í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. (loose coupling)


---

**14.22 ë‹¤ì´ì–¼ë¡œê·¸ ë§Œë“¤ê¸°**
- Image, Video, Note, Todo ë²„íŠ¼ í´ë¦­ì‹œ ë‹¤ì´ì–¼ë¡œê·¸ ì¶”ê°€
- `BaseComponent` ì´ìš©


> onclickê³¼ addEventListener ì°¨ì´ë¥¼ ì„¤ëª…í•˜ëŠ”ë° ëª¨ë¥´ê² ìŒ (14.23)
> - addEventListenerëŠ” ì´ë²¤íŠ¸ê°€ ìŒ“ì´ëŠ”ë° 
> - onclickì€ ì—¬ëŸ¬ ì´ë²¤íŠ¸ë¥¼ í•˜ë”ë¼ë„ ë®ì–´ì”Œì›Œì ¸ ë§ˆì§€ë§‰êº¼ë§Œ ë™ì‘í•œë‹¤


`app.ts`  **ë¦¬íŒ©í„°ë§ í›„**
```typescript 
import { Component } from './components/component.js';  
import { Composable, PageItemComponent, PageComponent } from './components/page.js';  
import { ImageComponent } from './components/page/item/image.js';  
import { NoteComponent } from './components/page/item/note.js';  
import { TodoComponent } from './components/page/item/todo.js';  
import { VideoComponent } from './components/page/item/video.js';  
import {InputDialog} from "./components/dialog/dialog.js";  
import {MediaSectionInput} from "./components/dialog/input/media-input.js";  
import {TextSectionInput} from "./components/dialog/input/text-input.js";  
  
export interface MediaData {  
    readonly title: string;  
    readonly url: string;  
}  
  
export interface TextData {  
    readonly title: string;  
    readonly body: string;  
}  
  
type InputComponentConstructor<T = (MediaData | TextData) & Component> = {  
    new () : T;  
}  
  
class App {  
    private readonly page: Component & Composable;  
    constructor(appRoot: HTMLElement, private dialogRoot: HTMLElement) {  
        this.page = new PageComponent(PageItemComponent);  
        this.page.attachTo(appRoot);  
  
        this.bindElementToDialog<MediaSectionInput>('#new-image',  
            MediaSectionInput,  
            (input: MediaSectionInput) => new ImageComponent(input.title, input.url));  
  
        this.bindElementToDialog<MediaSectionInput>('#new-video',  
            MediaSectionInput,  
            (input: MediaSectionInput) => new VideoComponent(input.title, input.url))  
  
        this.bindElementToDialog<TextSectionInput>('#new-note',  
            TextSectionInput,  
            (input: TextSectionInput) => new NoteComponent(input.title, input.body));  
  
        this.bindElementToDialog<TextSectionInput>('#new-todo',  
            TextSectionInput,  
            (input: TextSectionInput) => new TodoComponent(input.title, input.body));  
    }  
    private bindElementToDialog<T extends (MediaData | TextData) & Component>(  
        selector: string,  
        InputComponent: InputComponentConstructor<T>,  
        makeSection: (input: T) => Component  
    ) {  
        const element = document.querySelector(selector)! as HTMLButtonElement;  
        element.addEventListener('click', () => {  
            const dialog = new InputDialog();  
            const input = new InputComponent();  
            dialog.addChild(input);  
            dialog.attachTo(this.dialogRoot);  
  
            dialog.setOnCloseListener(() => {  
                dialog.removeFrom(this.dialogRoot);  
            });  
            dialog.setOnSubmitListener(() => {  
                const section = makeSection(input);  
                this.page.addChild(section);  
                dialog.removeFrom(this.dialogRoot);  
            });        
		})   
	 }
 }  
  
new App(document.querySelector('.document')! as HTMLElement, document.body);
```

ìœ íŠœë¸Œ 
- https://regexr.com/5l6nr
- `?:` ìº¡ì³ë§ì„ í•˜ì§€ ì•Šê² ë‹¤ (?)


**14.17 í˜ì´ì§€ ì•„ì´í…œ ì»¨í…Œì´ë„ˆ ë§Œë“¤ê¸°**

```typescript 
import { BaseComponent, Component } from "./component.js";

  

class PageItemComponent extends BaseComponent<HTMLElement> {

	constructor() {
		super(`<li class="page-item">
				<section class="page-item__body"></section>
				<div class="page-item__controls">
				<button class="close">&times;</button>
			</div>
		</li>`);
	}

	addChild(child: Component) {
		const container = this.element.querySelector('page-item__body')! as HTMLElement;
		child.attachTo(container);
	}

}

// .. 
}

```


```typescript 
class App {
	private readonly page: Component & Composable; // and
}
```

```

---

Drag and Drop API: https://developer.mozilla.org/ko/docs/Web/API/HTML_%EB%93%9C%EB%9E%98%EA%B7%B8_%EC%95%A4_%EB%93%9C%EB%A1%AD_API

html drag and drop example codepen* 

drag and dropì‹œ ë²„ê·¸ê°€ ìˆì–´ì„œ íƒœê·¸ì— í´ë˜ìŠ¤ ì¶”ê°€/ì‚­ì œí•˜ëŠ” í˜•íƒœë¡œ ì²˜ë¦¬ë¥¼ í•¨ 
- `pointer : none` ì²˜ë¦¬í•˜ë˜ë° .. ì˜ ëª¨ë¥´ê² ë”° 

**Decorator**
- https://www.typescriptlang.org/ko/docs/handbook/decorators.html
- angularì—ì„œ ë¬´ê²ê²Œ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆë”° 
	- ê³µì‹ ë¬¸ì„œì—ì„œ `Component` ê²€ìƒ‰í•´ë³´ê¸°
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í™•ì¥í•œë‹¤ëŠ” ê²Œ ë°ì½”ë ˆì´í„°ì´ë‹¤ë³´ë‹ˆ, ëˆ„ë½í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì„ ë°ì½”ë ˆì´í„°ì—ì„œ ì²˜ë¦¬í•˜ê³  ì‹¤ì œ app.ts ì½”ë“œì—ì„œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‘ì„±í•  ìˆ˜ ìˆê² ë„¤ 

**ìœ ìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬**
[https://sortablejs.github.io/Sortable/](https://sortablejs.github.io/Sortable/)
[https://github.com/haltu/muuri](https://github.com/haltu/muuri)
[https://codepen.io/retrofuturistic/pen/tlbHE](https://codepen.io/retrofuturistic/pen/tlbHE)
[https://github.com/atlassian/react-beautiful-dnd](https://github.com/atlassian/react-beautiful-dnd)
- ë¦¬ì•¡íŠ¸ì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ drag and drop ë¼ì´ë¸ŒëŸ¬ë¦¬


--- 

ì¸í„°í˜ì´ìŠ¤ë¥¼ ëŠ˜ë ¤ë‚˜ê°€ëŠ” ì‹œì ì´ë‚˜.. ì œë„¤ë¦­ì„ ì‚¬ìš©í–ˆì„ë•Œ êµ¬í˜„ì²´ê°€ ì•„ë‹Œ ì¸í„°í˜ì´ìŠ¤ë¡œ í•˜ê³ , 
êµ¬í˜„ì²´ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì—ì„œ ì§ì ‘ ìƒì„±í•˜ëŠ”ê²Œ ì•„ë‹Œ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•œë‹¤ëŠ” .. 
ë§ ì†ì— íŒíŠ¸ê°€ ìˆì§€ ì•Šì„ê¹Œ??
