- [ì €ì¥ì†Œ](https://github.com/dream-coding-academy/typescript_motion) 
- npm ìœ¼ë¡œ tsc , live-server ì„¤ì¹˜
- [ì˜¨ë¼ì¸ - í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ íˆ´](https://plantuml.com/ko/class-diagram)
- ëˆˆì— ë„ëŠ” ë¶€ë¶„
	- 14.17ì— Composable ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€ 
	- 14.18 ì•„ì´í…œ ì‚­ì œì—ì„œ Component ì¸í„°í˜ì´ìŠ¤ì— ë©”ì„œë“œ ì¶”ê°€
	- PageComponentì— í•˜ìœ„ íƒ€ì…ì„ ì •ì˜í•˜ëŠ” ë¶€ë¶„
		- Composable ì •ì˜ëŠ” `ì»´í¬ì§€íŠ¸ íŒ¨í„´`ì´ ì•„ë‹Œê°€ ì‹¶ë‹¤
	- PageComponentì— ìƒì„±ì ì£¼ì…ì‹œ íƒ€ì… ì •ì˜ ê²ƒì´ `ì „ëµ íŒ¨í„´`ìœ¼ë¡œ ë³´ì¸ë‹¤
	- app.tsì— dialog ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì¸í„°í˜ì´ìŠ¤ ì •ì˜í•˜ëŠ” ë¶€ë¶„
	- drag and dropì„ ì‚¬ìš©í•  ë•Œ `ì˜µì €ë²„ íŒ¨í„´` ì‚¬ìš©í•˜ëŠ”ê²Œ ì•„ë‹Œê°€ ì‹¶ë‹¤
	- ë§ˆì§€ë§‰ì— `ë°ì½”ë ˆì´í„° íŒ¨í„´`ì¸ë“¯ í•˜ë‹¤

**14.4 ~ 5. ë ˆì´ì•„ì›ƒê³¼ ì²«ë²ˆì§¸ Page ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°** 

<img src="./images/class-diagram1.png"/>

ğŸ“ src/app.ts
```typescript
import { PageComponent } from './components/page.js';

class App {
	private readonly page: PageComponent;

	constructor(appRoot: HTMLElement) {
		this.page = new PageComponent();
		this.page.attachTo(appRoot);
	}
}

new App(document.querySelector('.document')! as HTMLElement);
```

ğŸ“ src/components/page.ts
```typescript
export class PageComponent {
	private element: HTMLUListElement;

	constructor() {
		this.element = document.createElement('ul');
		this.element.setAttribute('class', 'page');
		this.element.textContent = 'This is PageComponent';
	}

	attachTo(parent: HTMLElement, position: InsertPosition = 'afterbegin') {
		parent.insertAdjacentElement(position, this.element);	
	}
}
```


- [tsconfig](https://www.typescriptlang.org/tsconfig/)

**13.5 í”„ë¡œì íŠ¸ ê³„íšì„ ì„¸ìš°ëŠ” í…Œí¬ë‹‰**
- 1. What are the features ? 
- 2. What is the roadmap ?
	- 2-1. must have 
		- âœ… [User Story](https://www.justinmind.com/blog/examples-user-story-best-practices/) ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±
	- 2-2. good to have
	- 2-3. nice to have

> actors(í´ë˜ìŠ¤ë“¤), interactions (í´ë˜ìŠ¤ê°„ ìƒí˜¸ì‘ìš©)

**14.6 DOMì„ ì˜ ëª¨ë¥´ëŠ” ..**
- HTML DOMì€ `tag`
- JavaScriptì—ì„œëŠ” `node`ë¼ê³  ë¶€ë¦„
- `Node -> EventTarget`ì„ ìƒì† ë°›ìŒ
	- Node í•˜ìœ„ì—ëŠ” Document, Element, Textê°€ ìˆê³ , ìƒì† ë°›ìŒ

**14.7 ~ 8 ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°**

<img src="./images/class-diagram2.png"/>

ğŸ“ src/components/page.ts â¡ï¸ src/components/page/page.ts

ğŸ“ src/components/page/item/image.ts
```typescript 
export class ImageComponent {

	private element: HTMLElement;
	
	constructor(title: string, url: string) {
		const template = document.createElement('template');
		
		template.innerHTML = `
			<section class="image">
				<div class="image__holder">
					<img class="image__thumbnail">
				</div>
				<p class="image__title"></p>
			</section>
		`;
		
		this.element = template.content.firstElementChild! as HTMLElement;
		
		const imageElement = this.element.querySelector('.image__thumbnail')! as HTMLImageElement;
	
		imageElement.src = url;
		imageElement.alt = title;
		
		const titleElement = this.element.querySelector('.image__title')! as HTMLParagraphElement;
		
		titleElement.textContent = title;
	
	}
	
	attachTo(parent: HTMLElement, position: InsertPosition = 'afterbegin') {
		parent.insertAdjacentElement(position, this.element);
	}

}
```
- `<template>` íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?
- `app.ts`ì— ì¶”ê°€

```typescript 
import { PageComponent } from './components/page.js';
import { ImageComponent } from './components/page/item/image.js';

class App {
	private readonly page: PageComponent;
	
	constructor(appRoot: HTMLElement) {
		this.page = new PageComponent();
		this.page.attachTo(appRoot);
	
		const image = new ImageComponent('Image Title', 'https://picsum.photos/600/300');
		image.attachTo(appRoot, 'beforeend');
	}

}

new App(document.querySelector('.document')! as HTMLElement);
```

```shell
$ tsc -w 
```
- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì»´íŒŒì¼í•´ì„œ `dist`  ë””ë ‰í„°ë¦¬ì— ìƒì„±
- `dist/*.js` íŒŒì¼ì„ index.htmlì—ì„œ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©


**14.9 ~ 14.10 ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í„°ë§** 
- imageì™€ pageëŠ” ê³µí†µì ì¸ ì¼ì„ í•˜ê³  ìˆë‹¤
- ì¤‘ë³µ ë¡œì§ì„ í´ë˜ìŠ¤ì— ì˜¬ë¦°ë‹¤
	- ì¸í„°í˜ì´ìŠ¤ : ì—­í• , êµ¬í˜„ì²´ : ì •ì±…

<img src="./images/class-diagram3.png"/>

```typescript 
export interface Component {
	attachTo(parent: HTMLElement, position?: InsertPosition): void;
}

class BaseComponent<T extends HTMLElement> implements Component {
	protected readonly element: T;
	
	constructor(htmlString: string) {
		const template = document.createElement('template');
		template.innerHTML = htmlString;
		this.element = template.content.firstElementChild! as T;
	}

	attachTo(parent: HTMLElement, position: InsertPosition = 'afterbegin') {
		parent.insertAdjacentElement(position, this.element);
	}

}
```
- `image.ts` , `page.ts`ë¥¼ ë¦¬íŒ©í„°ë§í•œë‹¤ 
- ì œë„¤ë¦­ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ”ë‹¤
- template íƒœê·¸ì— ìš”ì†Œë¥¼ í•œë²ˆ ê°ì‹¼ í›„ this.element í• ë‹¹í•˜ëŠ” í–‰ìœ„ë¥¼ BaseComponentì—ì„œ í•œë‹¤

ğŸ“ src/components/page/page.ts
```typescript 
import { BaseComponent } from "./component.js";

export class PageComponent extends BaseComponent<HTMLUListElement> {
	constructor() {
		super('<ul class="page">This is PageComponent</ul>');
	}
}
```

ğŸ“ src/components/page/item/image.ts
```typescript

import { BaseComponent } from "../../component.js";

export class ImageComponent extends BaseComponent<HTMLElement>{
	constructor(title: string, url: string) {
		super(`
		<section class="image">
			<div class="image__holder">
				<img class="image__thumbnail">
			</div>
			<p class="image__title"></p>
		</section>`);

	const imageElement = this.element.querySelector('.image__thumbnail')! as HTMLImageElement;

	imageElement.src = url;
	imageElement.alt = title;

	const titleElement = this.element.querySelector('.image__title')! as HTMLParagraphElement;
	
	titleElement.textContent = title;
	}
}

```

**ëª¨ë“  ì„¹ì…˜ êµ¬í˜„í•˜ê¸°** 

<img src="./images/class-diagram4.png"/>

> [!info]
> **HTMLHeadElement**: HTMLì˜ head íƒœê·¸ë¥¼ ëŒ€í‘œí•˜ëŠ” ìš”ì†Œ
> **HTMLHeadingElement**: h1ê³¼ ê°™ì€ heading íƒœê·¸ë¥¼ ëŒ€í‘œí•˜ëŠ” ìš”ì†Œ

ğŸ“ src/components/page/item/note.ts
```typescript
import { BaseComponent } from "../../component.js";

export class NoteComponent extends BaseComponent<HTMLElement> {
	constructor(title: string, body: string) {
		super(`<section class="note">
		<h2 class="note__title"></h2>
		<p class="note__body"></p>
		</section>`);
		
		const titleElement = this.element.querySelector('.note__title')! as HTMLHeadElement;
		
		titleElement.textContent = title;
		
		const bodyElement = this.element.querySelector('.note__body')! as HTMLParagraphElement;
		
		bodyElement.textContent = body;
		
	}
}
```

ğŸ“ src/components/page/item/todo.ts
```typescript
import { BaseComponent } from "../../component.js";

export class TodoComponent extends BaseComponent<HTMLElement> {
	constructor(title: string, todo: string) {
		super(`<section class="todo">
		<h2 class="todo__title"></h2>
		<input type="checkbox" class="todo-checkbox">
		</section>`);
		
		const titleElement = this.element.querySelector('.todo__title')! as HTMLHeadElement;
		titleElement.textContent = title;
	
		const todoElement = this.element.querySelector('.todo-checkbox')! as HTMLInputElement;
		todoElement.insertAdjacentText('afterend', todo);
	}

}

```

ğŸ“ src/components/page/item/video.ts
```typescript
import { BaseComponent } from "../../component.js";

export class VideoComponent extends BaseComponent<HTMLElement> {

	constructor(title: string, url: string) {
		super(`
		<section class="video">
		<div class="video__player">
		<iframe frameborder="0" class="video__iframe"></iframe>
		</div>
		<h3 class="video__title"></h3>
		</section>`);
		
		const iframe = this.element.querySelector('.video__iframe')! as HTMLIFrameElement;
		
		iframe.src = this.convertToEmbeddedURL(url);
		
		const titleElement = this.element.querySelector('.video__title')! as HTMLHeadingElement;
		
		titleElement.textContent = title;
	}

	private convertToEmbeddedURL(url: string): string {
		const regExp = /^(?:https?:\/\/)?(?:www\.)?(?:(?:youtube.com\/(?:(?:watch\?v=)|(?:embed\/))([a-zA-Z0-9-]{11}))|(?:youtu.be\/([a-zA-Z0-9-]{11})))/;
		const match = url.match(regExp);
		const videoId = match ? match[1] || match[2] : undefined;
		
		if(videoId) {
			return `https://www.youtube.com/embed/${videoId}`;
		}
		
		return url;	
	}

}

```


```typescript
import { PageComponent } from './components/page.js';
import { ImageComponent } from './components/page/item/image.js';
import { NoteComponent } from './components/page/item/note.js';
import { TodoComponent } from './components/page/item/todo.js';
import { VideoComponent } from './components/page/item/video.js';

class App {
	private readonly page: PageComponent;

	constructor(appRoot: HTMLElement) {
		this.page = new PageComponent();
		this.page.attachTo(appRoot);
		
		const image = new ImageComponent('Image Title', 'https://picsum.photos/600/300');
		image.attachTo(appRoot, 'beforeend');
		
		const note = new NoteComponent('Note Title', 'Note Body');
		note.attachTo(appRoot, 'beforeend');
		
		const todo = new TodoComponent('Todo Title', 'Todo Item');
		todo.attachTo(appRoot, 'beforeend');
		
		const video = new VideoComponent('Video Title', 'https://youtu.be/eti78d9CL4I');
		video.attachTo(appRoot, 'beforeend');
	}
}

new App(document.querySelector('.document')! as HTMLElement);
```


**14.16 ~ 20 PageItemComponent (ì»¨í…Œì´ë„ˆ) ë§Œë“¤ê¸°, ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€**
- ê³µí†µì ì¸ ì‚­ì œ ë²„íŠ¼ ê°™ì€ ê±¸ ë„£ê¸° ìœ„í•´ í•œë²ˆ ë” ê°ì‹¼ë‹¤
- Composal ì¸í„°í˜ì´ìŠ¤ë‚˜ Component ì¸í„°í˜ì´ìŠ¤ì— ì‹ ê·œ ë©”ì„œë“œ ì¶”ê°€

<img src="./images/class-diagram5.png"/>

```typescript

import { BaseComponent, Component } from "./component.js";

export interface Composable {
	addChild(child: Component): void;
}

type OnCloseListener = () => void;

class PageItemComponent extends BaseComponent<HTMLElement> implements Composable {

	private closeListener?: OnCloseListener;
	
	constructor() {
		super(`<li class="page-item">
		<section class="page-item__body"></section>
		<div class="page-item__controls">
		<button class="close">&times;</button>
		</div>
		</li>`);
		
		const closeBtn = this.element.querySelector('.close')! as HTMLButtonElement;
		
		closeBtn.onclick = () => {
			this.closeListener && this.closeListener(); // nullì´ ì•„ë‹ˆë¼ë©´ í˜¸ì¶œ
		}
	}
	
	addChild(child: Component) { // image,  video, todo, note 
		const container = this.element.querySelector('.page-item__body')! as HTMLElement;
		child.attachTo(container); // containerì— childë¥¼ ìš”ì†Œ ì¶”ê°€
	}
	
	setOnCloseListener(listener:OnCloseListener) { // ì‚­ì œìš© ì½œë°±ì„ ë°›ì•„ì„œ ì €ì¥
		this.closeListener = listener;
	}

}

  

export class PageComponent extends BaseComponent<HTMLUListElement> implements Composable {
	constructor() {
		super('<ul class="page"</ul>');
	}

	addChild(section: Component) { // video, note, todo, image
			const item = new PageItemComponent();
			item.addChild(section); // PageItemComponent ì•ˆì— section ì¶”ê°€
			item.attachTo(this.element, 'beforeend'); // this.element == page
			item.setOnCloseListener(() => {
				item.removeFrom(this.element);
			});
	}
}

```
- âœ… Composable ì¸í„°í˜ì´ìŠ¤ì— addChild(..) ì •ì˜
- âœ… Component ì¸í„°í˜ì´ìŠ¤ì— removeFrom(..) ì •ì˜ 
	- BaseComponentì—ì„œ ê³µí†µ êµ¬í˜„
	- ë¶€ëª¨ ìš”ì†Œì—ì„œ itemì„ ì‚­ì œ

>[!info] ì‚­ì œ ê¸°ëŠ¥ì„ ì½œë°± í•¨ìˆ˜ë¡œ ì •ì˜í•œ ì´ìœ ì— ëŒ€í•´ 
>ì €ëŠ” ëª¨ë“  í˜ì´ì§€ì˜ ì•„ì´í…œë“¤ì€ í˜ì´ì§€ì— ì¢…ì†ë˜ì–´ì ¸ ìˆìœ¼ë¯€ë¡œ,Â **í˜ì´ì§€ì—ì„œ ë‚´ ì•ˆì— ì–´ë–¤ í˜ì´ì§€ ì•„ì´í…œë“¤ì´ ìˆëŠ”ì§€ ì•Œê³  ì‹¶ì„ë•Œ,**Â ì¡´ì¬í•˜ëŠ” ëª¨ë“  í˜ì´ì§€ ì•„ì´í…œë“¤ì— ëŒ€í•´Â **ê´€ë¦¬ í•´ì•¼ í•˜ëŠ” ê²½ìš°**,Â **í˜ì´ì§€ê°€ ì‚­ì œë˜ì–´ì§€ëŠ” í˜ì´ì§€ ì•„ì´í…œì— ëŒ€í•´ì„œ í˜ì´ì§€ê°€ ì•Œê³  ìˆì–´ì•¼ í•˜ê² ì£ **?Â ê·¸ëŸ´ë•ŒëŠ” ëª¨ë“  í˜ì´ì§€ ì•„ì´í…œì„ ê°€ì§€ê³  ìˆëŠ” í˜ì´ì§€ í´ë˜ìŠ¤ì—ì„œ í•„ìš”í•œ ë¡œì§ë“¤ì„ ì²˜ë¦¬ í•´ì£¼ëŠ”ê²ƒì´ ì¢‹ì•„ìš”.
>â¡ï¸ ê´€ë¦¬ì˜ ì£¼ì²´ê°€ PageComponentê°€ ë˜ì—ˆìœ¼ë©´ ì‹¶ìœ¼ë‹ˆê¹ ì½œë°±ìœ¼ë¡œ ì„ ì–¸í•´ì„œ ì²˜ë¦¬í•œë‹¤ëŠ” ê±°êµ°..

>[!info] PageItemComponent ìƒì„±ìì—ì„œ ì‚­ì œ í•¨ìˆ˜ë¥¼ ë°›ì§€ ì•ŠëŠ” ì´ìœ  
>ì¢‹ì€ ì§ˆë¬¸ ì´ì˜ˆìš” ğŸ‘ ë³´í†µ ì´ë²¤íŠ¸ ê´€ë ¨ ë“±ë¡ í•¨ìˆ˜ë“¤ì€ ìƒì„±ì ë³´ë‹¤ëŠ” ë³„ë„ë¡œ ë“±ë¡í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  ìˆì–´ìš”. ìš°ë¦¬ê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ ë‹¤ë¥¸ ê°œë°œìë“¤ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ APIë¥¼ ë§Œë“œëŠ” ê²½ìš°ì—ë„, ê·¸ë¦¬ê³  ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë‚˜ ë…¸ë“œ ê·¸ ì™¸ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ë“¤ë„ ê·¸ë ‡ê²Œ ì œê³µí•˜ê³  ìˆì§€ìš” :)
>
>ì´ìœ ëŠ” "ë“±ë¡í•˜ë‹¤"ëŠ” í•„ìš”ì— ì˜í•´ì„œ, ì¶”í›„ì— ë“±ë¡ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì‹œì  ë³´ë‹¤ëŠ”, ê·¸ í›„ì— ìœ ë™ì„±ìˆê²Œ ì¶”ê°€ ë  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ê¸° ìœ„í•´ì„œì£ . **ìƒì„±ìëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ ì •ë§ ê¼­! í•„ìš”í•œ ìš”ì†Œë“¤ë§Œ ì¸ìë¡œ ë°›ì•„ì˜¤ëŠ” ê²ƒì´ ì¢‹ì•„ìš”.**


```typescript
export interface Component {
	attachTo(parent: HTMLElement, position?: InsertPosition): void;
	removeFrom(parent: HTMLElement): void;	 // âœ¨ ì‹ ê·œ ì¶”ê°€
}

// Encapsulate the HTML element creation
export class BaseComponent<T extends HTMLElement> implements Component {
	protected readonly element: T;
	
	constructor(htmlString: string) {
		const template = document.createElement('template');
		template.innerHTML = htmlString;
		this.element = template.content.firstElementChild! as T;
	}

	attachTo(parent: HTMLElement, position: InsertPosition = 'afterbegin') {
		parent.insertAdjacentElement(position, this.element);	
	}
	
	removeFrom(parent: HTMLElement) { // âœ¨ ê³µí†µ êµ¬í˜„
		if(parent !== this.element.parentElement) {
			throw new Error('parent mismatch.');
		}
		
		parent.removeChild(this.element);
	}

}

```

> [!info]
> **ê°ì²´ì§€í–¥ì´ë€, ë¬¸ì œë¥¼ ë°”ë¼ë³¼ë•Œ, ê¸°ëŠ¥ì„ ë°”ë¼ë³¼ë•Œ ê´€ë ¨ëœ ë¡œì§ë“¤ë¼ë¦¬ ë¬¶ì–´ì„œ ê°ì²´ë“¤ë¡œ ë°”ë¼ë³´ê³  ìƒê°í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ì˜ˆìš” :)**Â 
> ìš°ë¦¬ê°€ ì„¸ìƒì„ ë°”ë¼ë³´ë©´, í•™ìƒ, ê·¼ë¡œì, ê·¸ë¦¬ê³  íšŒì‚¬, ê·¼ë¡œìëŠ” ì¼ì„ í•˜ê³ , íšŒì‚¬ëŠ” ê·¼ë¡œìì—ê²Œ ì›”ê¸‰ì„ ì§€ë¶ˆí•˜ê³ , ì´ë ‡ê²Œ ê°ì²´ë“¤ ë‹¨ìœ„ë¡œ ì„œë¡œ ìœ ê¸°ì ìœ¼ë¡œ ì´ë£¨ì–´ ì§€ëŠ”ê²ƒì²˜ëŸ¼ìš”.
> **ê·¸ë˜ì„œ ë§ì€ ì—°ìŠµì´ í•„ìš”í•˜ë‹µë‹ˆë‹¤.**






ğŸ“‹ **Composal ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶„ë¦¬í•œ ì´ìœ ì— ëŒ€í•´**
```text
ì§ˆë¬¸ ì˜ ì •ë¦¬í•´ì„œ ì‘ì„±í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ ğŸ‘

ì‹œìŠ¤í…œ ë””ìì¸ì€ ì–´ë–»ê²Œ ì„¤ê³„ í•˜ëƒì— ë”°ë¼ì„œ, ê°œì¸ì´ ê°€ì§€ê³  ìˆëŠ” ì„ í˜¸ë„ì™€ ë¯¿ìŒì— ë”°ë¼ì„œ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.

ì•„í‚¤í…ì³ ì„¤ê³„ì—ëŠ” 100% ì •í•´ì§„ ì •ë‹µì´ ì—†ë‹µë‹ˆë‹¤.
ê·¸ë˜ì„œ ê¾¸ë¥´ë‹˜ì´ ìƒê°í•˜ì‹œëŠ”ëŒ€ë¡œ í•˜ì…”ë„ ê´œì°®ì•„ìš”.

ì œê°€ ê·¸ë ‡ê²Œ ë””ìì¸í•œ ë°°ê²½ì„ ì¡°ê¸ˆ ì„¤ëª…í•´ ë“œë ¤ë³´ë„ë¡ í• ê»˜ìš”.

ìš°ì„ ,Â **Composable ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ì„ Containerë¡œ ë³€ê²½**í•´ ë³´ë„ë¡ í• ê»˜ìš”. ì¡°í•©ì´ ê°€ëŠ¥í•œ ì¸í„°í˜ì´ìŠ¤ ë³´ë‹¤ëŠ” ì»¨í…Œì´ë„ˆë¡œ ì´ë¦„ì„ ë°”ê¾¸ëŠ”ê²Œ ì´í•´í•˜ê¸°ê°€ ì‰¬ìš¸ê²ƒ ê°™ì•„ìš”.

ì»´í¬ë„ŒíŠ¸(Component)ëŠ” HTML íƒœê·¸ë¥¼ ìš°ë¦¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” UIë¡œ í‘œí˜„í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ì˜ˆìš”.

ì´ë¯¸ì§€, ë…¸íŠ¸, íˆ¬ë‘, ë¹„ë””ì˜¤ ê°™ì€ ë¡œìš°ë ˆë²¨ UI ì»´í¬ë„ŒíŠ¸ë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ì„œì£ . ì»´í¬ë„ŒíŠ¸ ìì²´ì—ëŠ” ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ìê¸°ìì‹ ì—ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤(ê·œê²©)ì´ ì—†ì–´ìš”.Â **ì»´í¬ë„ŒíŠ¸ëŠ” UIë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°€ì¥ ìµœì†Œí•œì˜ ì‘ì€ ë‹¨ìœ„ì´ì£ .**

ì»´í¬ë„ŒíŠ¸ëŠ”Â **ì™¸ë¶€ì—ì„œë§Œ**Â "ì•¼, ì—¬ê¸° ì»¨í…Œì´ë„ˆ ë¶€ëª¨ê°€ ìˆìœ¼ë‹ˆ, ì—¬ê¸°ì— ë“¤ì–´ê°€ë©´ ë¼" ë¼ê³  ì„¤ì •í•  ìˆ˜ ìˆì–´ìš”.

component.attachTo(ë¶€ëª¨ì»¨í…Œì´ë„ˆ);

  

ì»¨í…Œì´ë„ˆ(Container, ì¦‰ Composable)ëŠ” ìš°ë¦¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì»¨í…Œì´ë„ˆë¡œ í‘œí˜„í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ì˜ˆìš”.Â **ê·¸ ìì²´ë§Œìœ¼ë¡œëŠ” ë³„ë„ì˜ UIê°€ ì—†ê³ , ë‹¤ë¥¸ ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì¡°í•©ë§Œ í•  ìˆ˜ ìˆëŠ” ë¶€ëª¨ ì»¨í…Œì´ë„ˆì£ .**Â Pageê°€ ëŒ€í‘œì ì´ê³ , ë‚˜ì¤‘ì— ListView ë“±ê³¼ ê°™ì´ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ìì‹ìœ¼ë¡œ ê°€ì§€ëŠ” ì»¨í…Œì´ë„ˆìš© ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.

**ì»¨í…Œì´ë„ˆ**ëŠ” ëª…ì‹œì ìœ¼ë¡œ "ë‚˜ëŠ” ë¶€ëª¨ ì»¨í…Œì´ë„ˆì´ê³ , ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë‚´ë¶€ì ìœ¼ë¡œ ê°€ì§ˆ ìˆ˜ ìˆì–´" ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆì–´ìš”.

**ì»´í¬ë„ŒíŠ¸**ëŠ” UIë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” ìœ ë‹›ì¼ë¿, ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥(ì¸í„°í˜ì´ìŠ¤, ê·œê²©)ì€ ì—†ì–´ìš”.

  

**Component**: UIë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì‘ì€ ë‹¨ìœ„

**Container**: ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ì»¨í…Œì´ë„ˆ (ë¡œì§€ì»¬í•˜ê²Œë§Œ ê°€ëŠ¥)

**Component & Container**: ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°í•©í•  ìˆ˜ ìˆëŠ” UI ì»´í¬ë„ŒíŠ¸

  

ìœ„ ì„¸ê°€ì§€ ì°¨ì´ì ì„ ë³´ì‹œë©´ ì§ˆë¬¸ì— ëŒ€í•œ ëª¨ë“  ë‹µì´ ë ê²ƒ ê°™ì€ë°, ì–´ë– ì‹ ê°€ìš”?

ê·¸ë˜ë„ "ì™œ ì´ë ‡ê²Œ ë‚˜ëˆ„ì—ˆëƒ?", "ê·¸ëƒ¥ Component ì¸í„°í˜ì´ìŠ¤ì— addChildë„ ë‘ë©´ ë˜ì§€ ì´ë ‡ê²Œ êµ¬ì§€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‘ê°œë¡œ ë‚˜ëˆ„ì—ˆëƒ?" ê³  ì§ˆë¬¸ì„ í•˜ì‹ ë‹¤ë©´:

**ì»´í¬ë„ŒíŠ¸ === ì‘ì€ ë‹¨ìœ„ì˜ UI**Â ë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ì„œ.

ì‘ì€ ë‹¨ìœ„ì˜ ì»´í¬ë„ŒíŠ¸ì™€ ê·¸ê²ƒë“¤ì„ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ì»¨í…Œì´ë„ˆì˜ ëª…í™•í•œ êµ¬ë¶„ê³¼ ê°ê°ì˜ ì œì•½ì‚¬í•­(ê°ê° í•  ìˆ˜ ìˆëŠ” ì—­í™œ)ì„ ë³„ë„ë¡œ ë§Œë“¤ê³  ì‹¶ì–´ì„œ.

```




**ğŸ‘€ app.ts ì˜ html í…Œê·¸ ìƒì„± ìˆœì„œ**

`PageComponent` ìƒì„±í•˜ê²Œ ë˜ë©´ .document í•˜ìœ„ì— ul íƒœê·¸ ì¶”ê°€ë¨
```html
<main class="document">
	<ul class="page"></ul>
</main>
```

`ImageComponent` ìƒì„±
```html
 <section class="image">
	<div class="image__holder">
		<img class="image__thumbnail">
	</div>
	<h2 class="image__title"></p>
</section>
```

PageComponentì˜ addChild(image) í˜¸ì¶œ 
```typescript
// PageComponent
addChild(section: Component) {
	const item = new PageItemComponent();
	item.addChild(section); 
	item.attachTo(this.element, 'beforeend');
	item.setOnCloseListener(() => {
		item.removeFrom(this.element);
	});
}
```

PageItemComponent ìƒì„± í›„ addChilld í˜¸ì¶œí•˜ê²Œ ë˜ë©´ .page-item__bodyì— section ì¶”ê°€ë¨
```html
<li class="page-item">
	<section class="page-item__body">
		// ì—¬ê¸° ì¶”ê°€
	</section>
	<div class="page-item__controls">
	  <button class="close">&times;</button>
	</div>
</li>
```

```html
<li class="page-item">
	<section class="page-item__body">
	    <section class="image"> // ì—¬ê¸° ì¶”ê°€
		<div class="image__holder">
		    <img class="image__thumbnail">
		</div>
		<h2 class="image__title"></p>
	    </section>
	</section>
	<div class="page-item__controls">
              <button class="close">&times;</button>
	</div>
</li>   
```

PageItemComponent ìƒì„±í•œ ê²ƒì„ PageComponentì˜ `this.element`ì— ì¶”ê°€ 
- `item.attachTo(this.element, 'beforeend');` 

âœ… ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸ê°€ ì¶”ê°€ëœ ê²°ê³¼
- ê²°êµ­ PageComponentì˜ this.elementê°€ ul íƒœê·¸ì´ë¯€ë¡œ ê·¸ ì•ˆì— ê³„ì† ìŒ“ì„

```html
<main class="document">
	<ul class="page"> // PageComponentì˜ this.element í•´ë‹¹
		<li class="page-item"> // ImageComponent ê²°ê³¼
			<section class="page-item__body">
			    <section class="image"> // ì—¬ê¸° ì¶”ê°€
				<div class="image__holder">
				    <img class="image__thumbnail">
				</div>
				<h2 class="image__title"></p>
			    </section>
			</section>
			<div class="page-item__controls">
			      <button class="close">&times;</button>
			</div>
		</li>
	</ul>
</main>
```


**14.20 DI ë¦¬íŒ©í† ë§**

<img src="./images/class-diagram6.png"/>
> í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ì—ì„œ PageItemComponentê°€ SectionContainerë¥¼ êµ¬í˜„í•˜ê²Œ ë˜ëŠ”ë°, SectionContainerëŠ” Componentì™€ Composable ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†í•œë‹¤. ê³ ë¡œ PageItemComponentëŠ” ì¸í„°í˜ì´ìŠ¤ ê·œê²©ì„ êµ¬í˜„í•´ì•¼ í•  ì˜ë¬´ê°€ ìˆë‹¤. ì´ë•Œ BaseComponentë„ ìƒì†ì„ í•˜ê³  ìˆê¸° ë•Œë¬¸ì— SectionContainerì™€ Composable ì¸í„°í˜ì´ìŠ¤ ëª…ì„¸ë§Œ ì§€í‚¤ë©´ ëœë‹¤. 
> â¡ï¸ SectionContainer ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ë¥¼ PageComponentì—ì„œ ì£¼ì…ë°›ì•„ ì‚¬ìš©ê°€ëŠ¥

```typescript
// PageComponent
addChild(section: Component) {  
    const item = new PageItemComponent();  // ğŸ’© êµ¬í˜„ì²´ì— ì§ì ‘ ì˜ì¡´ (coupling)
    item.addChild(section);  
    item.attachTo(this.element, 'beforeend');  
    item.setOnCloseListener(() => {  
        item.removeFrom(this.element);  
    });
}
```

âœ…ê·œê²© ì •ì˜
- `*ItemCompoment`ë¼ëŠ” Page í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì¶”ê°€ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì¶”ìƒí™” 
- `setOnCloseListener(..)`ì´ ê¼­ êµ¬í˜„ì´ ë˜ìˆì–´ì•¼ í•œë‹¤ê³  **ê·œê²© ëª…ì„¸** ì‘ì„±
```typescript 
interface SectionContainer extends Component, Composable {  
    setOnCloseListener(listener: OnCloseListener): void;  
}
```


```typescript
import { BaseComponent, Component } from "./component.js";  
  
export interface Composable {  
    addChild(child: Component): void;  
}  
  
type OnCloseListener = () => void;  

// âœ¨ ì‹ ê·œ ì •ì˜
interface SectionContainer extends Component, Composable {  
    setOnCloseListener(listener: OnCloseListener): void;  
}  

// âœ¨ ì‹ ê·œ ì •ì˜
type SectionContainerConstructor = {  
    new (): SectionContainer;  
}  
  
export class PageItemComponent extends BaseComponent<HTMLElement> implements SectionContainer {  
    private closeListener?: OnCloseListener;  
  
    constructor() {  
        super(`<li class="page-item">  
            <section class="page-item__body"></section>            
            <div class="page-item__controls">              
	            <button class="close">&times;</button>            
			</div>          
			</li>`);  
  
          const closeBtn = this.element.querySelector('.close')! as HTMLButtonElement;  
          closeBtn.onclick = () => {  
            this.closeListener && this.closeListener(); // nullì´ ì•„ë‹ˆë¼ë©´ í˜¸ì¶œ  
          }  
    }  
    
    addChild(child: Component) {  
        const container = this.element.querySelector('.page-item__body')! as HTMLElement;  
        child.attachTo(container);  
    }  
    
    setOnCloseListener(listener:OnCloseListener) {  
        this.closeListener = listener;  
    }
}  
  
export class PageComponent extends BaseComponent<HTMLUListElement> implements Composable {  
	// DI ì£¼ì… ë°›ìŒ
	constructor(private pageItemConstructor: SectionContainerConstructor) {  
        super('<ul class="page"></ul>');  
    }  
    
    addChild(section: Component) {  
        const item = new this.pageItemConstructor();  
        item.addChild(section);  
        item.attachTo(this.element, 'beforeend');  
        item.setOnCloseListener(() => {  
            item.removeFrom(this.element);  
        });    
	}
}
```


>[!tip] ì½”ë“œ ì§œê¸° ì „ì— êµ¬ì¡° ì„¤ê³„ë¥¼ í•˜ëŠ”ê°€?
>ë³µì¡í•˜ê³  í° ê·œëª¨ ì¼ìˆ˜ë¡, ë¯¸ë¦¬ ì†Œí”„íŠ¸ì›¨ì–´ ì‹œìŠ¤í…œ(ë””ìì¸) ì„¤ê³„ í•˜ê³  êµ¬í˜„ì— ë“¤ì–´ ê°„ë‹µë‹ˆë‹¤. ì§€ì‹(ê¸°ë³¸ êµ¬í˜„ ì§€ì‹, ì‹œìŠ¤í…œ ë””ìì¸, ë””ìì¸ íŒ¨í„´, ë¦¬íŒ©í† ë§ ë“±) ê³¼ ê²½í—˜ì´ ì •ë§ ì¤‘ìš”í•˜ì£ .

> **ì¢‹ì€ ê¸€** 
> https://academy.dream-coding.com/courses/player/typescript/lessons/578/discussions/4624

**ğŸ¤– Gemini**
`SectionContainerConstructor`ì˜ íƒ€ì… í‘œê¸°ë²•ì´ ì–´ìƒ‰í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” TypeScriptì—ì„œ **ìƒì„±ì í•¨ìˆ˜(Constructor Function)ì˜ íƒ€ì…**ì„ ì •ì˜í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

`new (): SectionContainer`ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì˜ë¯¸ë¥¼ ê°€ì§‘ë‹ˆë‹¤:
- **`new`**: ì´ íƒ€ì…ì´ **`new` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í˜¸ì¶œë  ìˆ˜ ìˆëŠ” ìƒì„±ì**ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- **`()`**: ìƒì„±ìê°€ **ì¸ì ì—†ì´ í˜¸ì¶œ**ë¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë§Œì•½ ì¸ìê°€ ìˆë‹¤ë©´ `new (name: string): SectionContainer` ì™€ ê°™ì´ í‘œí˜„í–ˆì„ ê²ë‹ˆë‹¤.
- **`: SectionContainer`**: ì´ ìƒì„±ìê°€ **`SectionContainer` íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜**í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
    
ë”°ë¼ì„œ `SectionContainerConstructor` íƒ€ì…ì€ **`SectionContainer` ì¸í„°í˜ì´ìŠ¤ì˜ ê·œê²©ì„ ì§€í‚¤ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ìƒì„±ì í•¨ìˆ˜**ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤. ì¢€ ë” í’€ì–´ì„œ ì„¤ëª…í•˜ë©´, ì´ íƒ€ì…ì€ "ì¸ì ì—†ì´ í˜¸ì¶œí•˜ë©´ `SectionContainer` íƒ€ì…ì˜ ê°ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ìƒì„±ì"ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
```typescript
class MySectionContainer implements SectionContainer {
    setOnCloseListener(listener: OnCloseListener): void {
        // ë¦¬ìŠ¤ë„ˆ ì„¤ì • ë¡œì§
    }

    // Componenent, Composable ì¸í„°í˜ì´ìŠ¤ì˜ ë©¤ë²„ êµ¬í˜„ ê°€ì •
    // ..
}

// MySectionContainerëŠ” SectionContainerConstructor íƒ€ì…ìœ¼ë¡œ í• ë‹¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
const SectionContainerFactory: SectionContainerConstructor = MySectionContainer;

// ì´ì œ SectionContainerFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ SectionContainer ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
const sectionInstance: SectionContainer = new SectionContainerFactory();
```


>[!info] ê¸°ì¡´ì— PageComponentëŠ” PageItemComponentì— ì»¤í”Œë§ì´ ê°•í•˜ê²Œ ë˜ì–´ ìˆì—ˆë‹¤. ê·¸ë˜ì„œ ìˆ˜ì •í•˜ê¸° ìœ„í•´ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ê³  ì»´íŒŒì¼ì„ ë‹¤ì‹œ í•´ì•¼ í–ˆë‹¤. ìƒì„±ì ì£¼ì… ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•œ ì´í›„ì—ëŠ” PageComponent ë§ˆë‹¤ ì„œë¡œ ë‹¤ë¥¸ SectionContainer êµ¬í˜„ì²´ë¥¼ ì£¼ì…í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. (loose coupling)


---

**14.22 ë‹¤ì´ì–¼ë¡œê·¸ ë§Œë“¤ê¸°**
- Image, Video, Note, Todo ë²„íŠ¼ í´ë¦­ì‹œ ë‹¤ì´ì–¼ë¡œê·¸ ì¶”ê°€
- `BaseComponent` ì´ìš©

<img src="./images/class-diagram7.png"/>

> onclickê³¼ addEventListener ì°¨ì´ë¥¼ ì„¤ëª…í•˜ëŠ”ë° ëª¨ë¥´ê² ìŒ (14.23)
> - addEventListenerëŠ” ì´ë²¤íŠ¸ê°€ ìŒ“ì´ëŠ”ë° 
> - onclickì€ ì—¬ëŸ¬ ì´ë²¤íŠ¸ë¥¼ í•˜ë”ë¼ë„ ë®ì–´ì”Œì›Œì ¸ ë§ˆì§€ë§‰êº¼ë§Œ ë™ì‘í•œë‹¤

ğŸ“src/components/dialog/dialog.ts

```typescript
import {BaseComponent, Component} from "../component.js";
import {Composable} from "../page.js";

// ë‹¨ìˆœ ì½œë°±, ì½œë°±ì˜ ì£¼ì²´ëŠ” App.ts
type OnCloseListener = () => void;
type OnSubmitListener = () => void;

export class InputDialog extends BaseComponent<HTMLElement> implements Composable {
	closeListener?: OnCloseListener;
	submitListener?: OnSubmitListener;

	constructor() {
		super(`<dialog class="dialog">
		<div class="dialog__container">
		<button class="close">&times;</button>
		<div id="dialog__body"></div>
		<button class="dialog__submit">ADD</button>
		</div>
		</dialog>`);
		
		const closeBtn = this.element.querySelector('.close')! as HTMLButtonElement;
		
		closeBtn.onclick = () => {
			this.closeListener && this.closeListener();
		};
		
		
		const submitBtn = this.element.querySelector('.dialog__submit')! as HTMLButtonElement;
		
		submitBtn.onclick = () => {
			this.submitListener && this.submitListener();
		};
	
	}
	
	addChild(child: Component): void {
		const body = this.element.querySelector('#dialog__body')! as HTMLElement;
		child.attachTo(body);
	}
	
	setOnCloseListener(listener: OnCloseListener) {
		this.closeListener = listener;
	}
	
	setOnSubmitListener(listener: OnSubmitListener) {
		this.submitListener = listener;
	}

}

```


**14.25 ë‹¤ì´ì–¼ë¡œê·¸ ì»¨í…ì¸ **
- ì½˜í…ì¸ ì˜ ê´€ë¦¬ ì£¼ì²´ëŠ” `app.ts`

<img src="./images/class-diagram8.png"/>

ğŸ“src/components/dialog/input/media-input.ts
```typescript
import {BaseComponent} from "../../component.js";
import {TextData} from "../../../app.js";

export class TextSectionInput extends BaseComponent<HTMLElement> implements TextData{

	constructor() {
		super(`<div>
				<div class="form__container">
					<label for="title">Title</label>
					<input type="text" id="title"/>
				</div>
				<div class="form__container">
					<label for="url">URL</label>
					<input type="text" id="url"/>
				</div>
				</div>`);
	}

	get title(): string {
		const element = this.element.querySelector('#title')! as HTMLInputElement;
		return element.value;
	}
	
	get url(): string {
		const element = this.element.querySelector('#url')! as HTMLInputElement;		
		return element.value;
	}

}
```

ğŸ“src/components/dialog/input/text-input.ts
```typescript
import {BaseComponent} from "../../component.js";
import {TextData} from "../../../app.js";

export class TextSectionInput extends BaseComponent<HTMLElement> implements TextData{

	constructor() {
		super(`<div>
			<div class="form__container">
				<label for="title">Title</label>
				<input type="text" id="title"/>
			</div>
			<div class="form__container">
				<label for="body">Body</label>
				<textarea type="text" id="body" row="3"></textarea>
			</div>
		</div>`);
	
	}

	get title(): string {
		const element = this.element.querySelector('#title')! as HTMLInputElement;
		return element.value;
	}
	
	get body(): string {
		const element = this.element.querySelector('#body')! as HTMLInputElement;		
		return element.value;
	}

}
```


`app.ts`  **ë¦¬íŒ©í„°ë§ í›„**
```typescript 
import { Component } from './components/component.js';  
import { Composable, PageItemComponent, PageComponent } from './components/page.js';  
import { ImageComponent } from './components/page/item/image.js';  
import { NoteComponent } from './components/page/item/note.js';  
import { TodoComponent } from './components/page/item/todo.js';  
import { VideoComponent } from './components/page/item/video.js';  
import {InputDialog} from "./components/dialog/dialog.js";  
import {MediaSectionInput} from "./components/dialog/input/media-input.js";  
import {TextSectionInput} from "./components/dialog/input/text-input.js";  
  
export interface MediaData {  
    readonly title: string;  
    readonly url: string;  
}  
  
export interface TextData {  
    readonly title: string;  
    readonly body: string;  
}  
  
type InputComponentConstructor<T = (MediaData | TextData) & Component> = {  
    new () : T;  
}  
  
class App {  
    private readonly page: Component & Composable;  
    constructor(appRoot: HTMLElement, private dialogRoot: HTMLElement) {  
        this.page = new PageComponent(PageItemComponent);  
        this.page.attachTo(appRoot);  
  
        this.bindElementToDialog<MediaSectionInput>('#new-image',  
            MediaSectionInput,  
            (input: MediaSectionInput) => new ImageComponent(input.title, input.url));  // ì†ì„±ì„ ì°ì€ê±° ê°™ì§€ë§Œ title(), url() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤
  
        this.bindElementToDialog<MediaSectionInput>('#new-video',  
            MediaSectionInput,  
            (input: MediaSectionInput) => new VideoComponent(input.title, input.url))  
  
        this.bindElementToDialog<TextSectionInput>('#new-note',  
            TextSectionInput,  
            (input: TextSectionInput) => new NoteComponent(input.title, input.body));  
  
        this.bindElementToDialog<TextSectionInput>('#new-todo',  
            TextSectionInput,  
            (input: TextSectionInput) => new TodoComponent(input.title, input.body));  
    }  
    
    private bindElementToDialog<T extends (MediaData | TextData) & Component>(  
        selector: string,  
        InputComponent: InputComponentConstructor<T>,  
        makeSection: (input: T) => Component  
    ) {  
        const element = document.querySelector(selector)! as HTMLButtonElement;  
        element.addEventListener('click', () => {  
            const dialog = new InputDialog();  // dialog.ts
            const input = new InputComponent();  
            dialog.addChild(input);  
            dialog.attachTo(this.dialogRoot);   // this.dialogRoot == document.body
  
            dialog.setOnCloseListener(() => {  
                dialog.removeFrom(this.dialogRoot);   // this.dialogRoot == document.body
            });  
            
            dialog.setOnSubmitListener(() => {  
                const section = makeSection(input);  
                this.page.addChild(section);  
                dialog.removeFrom(this.dialogRoot);  // this.dialogRoot == document.body
            });        
		})   
	 }
 }  
  
new App(document.querySelector('.document')! as HTMLElement, document.body);
``` 
- https://regexr.com/5l6nr
- `?:` ìº¡ì³ë§ì„ í•˜ì§€ ì•Šê² ë‹¤ (?)

---
**15.ëª¨ì…˜ ë“œë˜ê¹… ê¸°ëŠ¥**

- [Drag and Drop API](https://developer.mozilla.org/ko/docs/Web/API/HTML_%EB%93%9C%EB%9E%98%EA%B7%B8_%EC%95%A4_%EB%93%9C%EB%A1%AD_API)
- êµ¬í˜„ ì˜ˆì œê°€ í•„ìš”í•˜ë©´ ê²€ìƒ‰ 
	- `html drag and drop example codepen* `

ì ˆì°¨1. drag and drop ì´ë²¤íŠ¸ ë°œìƒì‹œ ì½˜ì†” ì¶œë ¥
**PageItemComponent**
- dragstart
- dragend

**PageComponent**
- dragover
- dragend

ì ˆì°¨2. drag and drop ìš”ì†Œ ê´€ë¦¬ 
- PageComponentì—ì„œ ê´€ë¦¬ 
- PageItemComponentì—ì„œëŠ” ì´ë²¤íŠ¸ ë°œìƒì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í†µí•´ PageComponent (ìƒìœ„ ë¶€ëª¨)ì—ê²Œ ì „ë‹¬

page.tsì— íƒ€ì… ì¶”ê°€ 
```typescript 
type DragState = 'start' | 'stop' | 'enter' | 'leave';

// targetì€ í˜„ì¬ PageItemComponent
type OnDragStateListener<T extends Component> = (target: T, state: DragState) => void;
```
- enter: ë“¤ì–´ì˜´, leave : ë‚˜ê° 

> ğŸ¤” ì—¬ëŸ¬ í´ë˜ìŠ¤ì—ì„œ ë™ì¼í•œ ëª…ì„¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤ë©´ interface(ì—­í• , ëª…ì„¸)ë¡œ ë¬¶ì–´ì„œ ê´€ë¦¬í•œë‹¤


ì ˆì°¨3. PageItemComponentì— DrageState, OnDragStateListenerë¥¼ êµ¬í˜„í•œë‹¤
- ì´ë•Œ ìƒìœ„ PageComponentì— ì´ë²¤íŠ¸ ë°œìƒì„ ì•Œë¦¬ê¸° ìœ„í•´ ì•„ë˜ ê³µí†µ í•¨ìˆ˜ë¥¼ ì •ì˜
- this.dragStateListenerì˜ ê²½ìš° ìƒìœ„ ê°ì²´ì—ì„œ setter í†µí•´ ì£¼ì…í•´ì¤€ë‹¤ 
- ê³ ë¡œ ì´ë²¤íŠ¸ Itemì— ì´ë²¤íŠ¸ ë°œìƒì‹œ ê´€ë¦¬ëŠ” page ì»´í¬ë„ŒíŠ¸ì—ì„œ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤

```typescript 
notifyDragObservers(state: DragState) { // PageComponentí•œí…Œ ì´ë²¤íŠ¸ ì „íŒŒ
	this.dragStateListener && this.dragStateListener(this, state);
}
```

ì ˆì°¨4. PageComponentì—ì„œ ì´ë²¤íŠ¸ ë“±ë¡ ë° ì „ë‹¬ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ ì •ë¦ 
- ì¶”ê°€ë¡œ Component ì¸í„°í˜ì´ìŠ¤ì— attach í•¨ìˆ˜ ëª…ì„¸ ì¶”ê°€
```typescript 

// ì•„ë¬´ì¼ ì•ˆí•¨
onDragOver(event: DragEvent) {
	event.preventDefault();
	console.log('onDragOver');
}

// ë§ˆìš°ìŠ¤ê°€ ë•Œì§€ë©´
onDrop(event: DragEvent) {
	event.preventDefault();
	
	if(!this.dropTarget) {
		return;
	}
	
	if(this.dragTarget && this.dragTarget !== this.dropTarget) {
		const dropY = event.clientY;
		const srcElement = this.dragTarget.getBoundingRect(); // SectionContainer ì¸í„°í˜ì´ìŠ¤ ì •ì˜
		
		this.dragTarget.removeFrom(this.element);
		this.dropTarget.attach(this.dragTarget, dropY < srcElement.y ? 'beforebegin' : 'afterend'); // 15.6 ì°¸ê³ 
	}
	
	this.dropTarget.onDropped();
}

addChild(section: Component) {
	
	const item = new this.pageItemConstructor();
	item.addChild(section);
	item.attachTo(this.element, 'beforeend');
	item.setOnCloseListener(() => { 
		// ë‹«ê¸° ì´ë²¤íŠ¸ì‹œ
		item.removeFrom(this.element);
		this.children.delete(item);
	});

	this.children.add(item); // ìì‹ ìš”ì†Œì— í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•´ í´ë˜ìŠ¤ ë©¤ë²„ ë³€ìˆ˜ë¡œ ê´€ë¦¬

	// PageItemComponent ê°™ì€ ìì‹ ìš”ì†Œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡ 
	// í•˜ìœ„ ìì‹ ìš”ì†Œì—ì„œ ì´ë²¤íŠ¸ ë°œìƒì‹œ ìƒìœ„ ìš”ì†Œ(Page*)ì— ì´ë²¤íŠ¸ê°€ ì „íŒŒë¨
	item.setOnDragStateListener((target: SectionContainer, state: DragState) => {
		switch (state) {
			case 'start':
				this.dragTarget = target;
				this.updateSections('mute');
				break;
			case 'stop':
				this.dragTarget = undefined;
				this.updateSections('unmute');
				break;
			case 'enter':
				this.dropTarget = target;
				break;
			case 'leave':
				this.dropTarget = undefined;
				break;
			default:
				throw new Error(`unsupported state: ${state}`);
			}
		}
	);

}
```typescript
import { BaseComponent, Component } from "./component.js";

  

private updateSections(state: 'mute' | 'unmute') {
	this.children.forEach((section: SectionContainer) => {
	section.muteChildren(state); // SectionContainer ì¸í„°í˜ì´ìŠ¤ì— ì‹ ê·œ ë©”ì„œë“œ(ê·œì•½) ì •ì˜
});

}

```


ğŸ›drag and dropì‹œ ë²„ê·¸ê°€ ìˆì–´ì„œ íƒœê·¸ì— í´ë˜ìŠ¤ ì¶”ê°€/ì‚­ì œí•˜ëŠ” í˜•íƒœë¡œ ì²˜ë¦¬ë¥¼ í•¨ 
- `pointer : none` ì²˜ë¦¬í•˜ë˜ë° .. ì˜ ëª¨ë¥´ê² ë”° 

style.css
```css
.mute-children * {
	pointer-events: none;
}
```

### drag and drop event (by gemini)

ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ë‘ ê°€ì§€ ì£¼ìš” ëŒ€ìƒì„ êµ¬ë¶„í•˜ê² ìŠµë‹ˆë‹¤.

   * ë“œë˜ê·¸ ìš”ì†Œ (Draggable Element): ì‚¬ìš©ìê°€ ë§ˆìš°ìŠ¤ë¡œ ëŒê³  ìˆëŠ” ìš”ì†Œ. (PageItemComponent)
   * ë“œë¡­ ì˜ì—­ (Drop Zone/Target): ë“œë˜ê·¸ ìš”ì†Œê°€ ë†“ì¼ ìˆ˜ ìˆëŠ” ì˜ì—­. (ì´ ì˜ˆì œì—ì„œëŠ” ë‹¤ë¥¸ PageItemComponent ë˜ëŠ” PageComponent ì „ì²´)

  ---

  1. dragstart

   * ì–¸ì œ: ì‚¬ìš©ìê°€ ë“œë˜ê·¸ ê°€ëŠ¥í•œ ìš”ì†Œ( draggable="true" ì†ì„±ì´ ìˆëŠ” ìš”ì†Œ)ë¥¼ ë§ˆìš°ìŠ¤ë¡œ ëˆ„ë¥´ê³  ì›€ì§ì´ê¸° ì‹œì‘í•˜ëŠ” ìˆœê°„ì— ë°œìƒí•©ë‹ˆë‹¤.
   * ëˆ„êµ¬ì—ê²Œ: ë“œë˜ê·¸ ìš”ì†Œ(PageItemComponent) ìì‹ ì—ê²Œ ë°œìƒí•©ë‹ˆë‹¤.
   * ì£¼ìš” ì—­í• :
       * ë“œë˜ê·¸ê°€ ì‹œì‘ë˜ì—ˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.
       * ë“œë˜ê·¸í•  ë°ì´í„°(ì˜ˆ: ìš”ì†Œì˜ ID)ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (event.dataTransfer.setData()).
       * ë“œë˜ê·¸ ì¤‘ì¸ ìš”ì†Œì˜ ì‹œê°ì  íš¨ê³¼(ì˜ˆ: ë°˜íˆ¬ëª…í•˜ê²Œ ë§Œë“¤ê¸°)ë¥¼ ì ìš©í•©ë‹ˆë‹¤. (lifted í´ë˜ìŠ¤ ì¶”ê°€)

  2. dragenter

   * ì–¸ì œ: ë“œë˜ê·¸í•˜ëŠ” ìš”ì†Œê°€ ë“œë¡­ ì˜ì—­ì˜ ê²½ê³„ ì•ˆìœ¼ë¡œ ì²˜ìŒ ë“¤ì–´ì™”ì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.
   * ëˆ„êµ¬ì—ê²Œ: ë“œë¡­ ì˜ì—­(PageItemComponent ë˜ëŠ” PageComponent)ì—ê²Œ ë°œìƒí•©ë‹ˆë‹¤.
   * ì£¼ìš” ì—­í• :
       * ë“œë¡­ì´ ê°€ëŠ¥í•œ ì˜ì—­ ìœ„ë¡œ ìš”ì†Œê°€ ì˜¬ë¼ì™”ìŒì„ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. (ì˜ˆ: í…Œë‘ë¦¬ ê°•ì¡° - drop-area í´ë˜ìŠ¤ ì¶”ê°€)
       * ìì‹ ìš”ì†Œ ìœ„ë¡œ ì˜¬ë¼ê°ˆ ë•Œë§ˆë‹¤ ë¶€ëª¨ì˜ dragleaveì™€ ìì‹ì˜ dragenterê°€ ë²ˆê°ˆì•„ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ëŠ” ì£¼ëœ ì´ë²¤íŠ¸ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.

  3. dragleave

   * ì–¸ì œ: ë“œë˜ê·¸í•˜ëŠ” ìš”ì†Œê°€ ë“œë¡­ ì˜ì—­ì˜ ê²½ê³„ë¥¼ ë²—ì–´ë‚¬ì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.
   * ëˆ„êµ¬ì—ê²Œ: ë“œë¡­ ì˜ì—­(PageItemComponent ë˜ëŠ” PageComponent)ì—ê²Œ ë°œìƒí•©ë‹ˆë‹¤.
   * ì£¼ìš” ì—­í• :
       * dragenter ë•Œ ì ìš©í–ˆë˜ ì‹œê°ì  íš¨ê³¼ë¥¼ ì œê±°í•©ë‹ˆë‹¤. (drop-area í´ë˜ìŠ¤ ì œê±°)

  4. dragover

   * ì–¸ì œ: ë“œë˜ê·¸í•˜ëŠ” ìš”ì†Œê°€ ë“œë¡­ ì˜ì—­ ìœ„ì—ì„œ ì›€ì§ì´ëŠ” ë™ì•ˆ ê³„ì†í•´ì„œ ë°œìƒí•©ë‹ˆë‹¤. (ìˆ˜ ë°€ë¦¬ì´ˆë§ˆë‹¤ ë°œìƒ)
   * ëˆ„êµ¬ì—ê²Œ: ë“œë¡­ ì˜ì—­(PageItemComponent ë˜ëŠ” PageComponent)ì—ê²Œ ë°œìƒí•©ë‹ˆë‹¤.
   * ì£¼ìš” ì—­í• :
       * ë§¤ìš° ì¤‘ìš”: ê¸°ë³¸ì ìœ¼ë¡œ ë¸Œë¼ìš°ì €ëŠ” ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— ë“œë¡­í•˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ë©´ì„œ event.preventDefault()ë¥¼ í˜¸ì¶œí•´ì•¼ë§Œ í•´ë‹¹ ì˜ì—­ì— drop
         ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
       * PageComponentì˜ onDragOver ë©”ì„œë“œê°€ ë°”ë¡œ ì´ ì—­í• ì„ í•©ë‹ˆë‹¤.

  5. drop

   * ì–¸ì œ: ì‚¬ìš©ìê°€ ë“œë˜ê·¸í•˜ë˜ ìš”ì†Œë¥¼ ë“œë¡­ ì˜ì—­ ìœ„ì—ì„œ ë§ˆìš°ìŠ¤ ë²„íŠ¼ì„ ë†“ì•˜ì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.
   * ëˆ„êµ¬ì—ê²Œ: ë“œë¡­ ì˜ì—­(PageComponent)ì—ê²Œ ë°œìƒí•©ë‹ˆë‹¤.
   * ì£¼ìš” ì—­í• :
       * ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì‘ì—…ì˜ ìµœì¢… ë‹¨ê³„ì…ë‹ˆë‹¤.
       * dragstartì—ì„œ ì„¤ì •í•œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì‹¤ì œ ë¡œì§(ì˜ˆ: ìš”ì†Œì˜ ìœ„ì¹˜ ë³€ê²½)ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
       * event.preventDefault()ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¸Œë¼ìš°ì €ê°€ ê¸°ë³¸ ë™ì‘(ì˜ˆ: ë§í¬ë¡œ ì´ë™)ì„ ìˆ˜í–‰í•˜ì§€ ì•Šë„ë¡ ë§‰ì•„ì•¼ í•©ë‹ˆë‹¤.

  ---

  ìš”ì•½ ë° ë¹„ìœ 

   * dragstart: "ë‚˜ ì´ì œë¶€í„° ì´ì‚¬ ì‹œì‘í•œë‹¤!" (ì§ì„ ì‹¸ëŠ” ì¤‘)
   * dragenter: "ìƒˆë¡œìš´ ë™ë„¤ì— ë§‰ ë“¤ì–´ì™”ì–´." (ë¶€ë™ì‚° ê°„íŒì„ ë´„)
   * dragleave: "ì´ ë™ë„¤ëŠ” ì•„ë‹Œ ê²ƒ ê°™ì•„. ë‚˜ê°ˆê²Œ." (ë‹¤ë¥¸ ë™ë„¤ë¡œ ê°)
   * dragover: "ì´ ë™ë„¤ ì£¼ë³€ì„ ê³„ì† ë‘˜ëŸ¬ë³´ëŠ” ì¤‘ì´ì•¼." (ì–´ë””ì— ì§‘ì„ ë‘˜ì§€ ê³„ì† ê³ ë¯¼ ì¤‘)
   * drop: "ì—¬ê¸°ë¡œ ì •í–ˆë‹¤! ì—¬ê¸°ì— ì§ í’€ê²Œ!" (ê³„ì•½í•˜ê³  ì´ì‚¬ ì™„ë£Œ)

  ì´í•´í•˜ì‹  ë‚´ìš©ì´ ê±°ì˜ ì •í™•í•˜ë©°, ì´ ì„¤ëª…ì„ í†µí•´ ê° ì´ë²¤íŠ¸ì˜ ì—­í• ê³¼ ë°œìƒ ì£¼ì²´ë¥¼ ë” ëª…í™•í•˜ê²Œ êµ¬ë¶„í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.

> ğŸ¤” ë§ˆìš°ìŠ¤ë¡œ ëˆ„ë¥´ê³  ìˆì„ì‹œ dragoverë§Œ ê³„ì† ì´ë²¤íŠ¸ ë°œìƒí•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” 1íšŒì„± ì´ë²¤íŠ¸ ?

âœ¦ ë„¤, ë§ìŠµë‹ˆë‹¤. ì•„ì£¼ ì •í™•í•œ í‘œí˜„ì…ë‹ˆë‹¤.

   * ì—°ì†ì„± ì´ë²¤íŠ¸ (Continuous Event):
       * dragover: ë“œë˜ê·¸í•˜ëŠ” ìš”ì†Œê°€ ë“œë¡­ ì˜ì—­ ìœ„ì— ë¨¸ë¬´ëŠ” ë™ì•ˆ ê³„ì†í•´ì„œ ë°œìƒí•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë§ˆìš°ìŠ¤ë¥¼ ë©ˆì¶”ê³  ìˆì–´ë„ ë°œìƒí•©ë‹ˆë‹¤.

   * ì¼íšŒì„± ì´ë²¤íŠ¸ (One-time Events):
       * dragstart: ë“œë˜ê·¸ë¥¼ ì‹œì‘í•  ë•Œ ë”± í•œ ë²ˆ ë°œìƒí•©ë‹ˆë‹¤.
       * dragend: ë“œë˜ê·¸ë¥¼ ì¢…ë£Œí•  ë•Œ(ë“œë¡­ ì„±ê³µ ë˜ëŠ” ì·¨ì†Œ) ë”± í•œ ë²ˆ ë°œìƒí•©ë‹ˆë‹¤.
       * drop: ë“œë¡­ ì˜ì—­ ìœ„ì—ì„œ ë§ˆìš°ìŠ¤ë¥¼ ë†“ì„ ë•Œ ë”± í•œ ë²ˆ ë°œìƒí•©ë‹ˆë‹¤.
       * dragenter: ë“œë¡­ ì˜ì—­ì— ì§„ì…í•  ë•Œ í•œ ë²ˆ ë°œìƒí•©ë‹ˆë‹¤.
       * dragleave: ë“œë¡­ ì˜ì—­ì—ì„œ ë²—ì–´ë‚  ë•Œ í•œ ë²ˆ ë°œìƒí•©ë‹ˆë‹¤.

  dragenterì™€ dragleaveëŠ” ë“œë¡­ ì˜ì—­ì˜ ê²½ê³„ë¥¼ ë„˜ë‚˜ë“¤ ë•Œë§ˆë‹¤ ë°œìƒí•˜ë¯€ë¡œ, ë³µì¡í•œ êµ¬ì¡°ì—ì„œëŠ” ì—¬ëŸ¬ ë²ˆ ë°œìƒí•  ìˆ˜ ìˆì§€ë§Œ, í•œ ë²ˆì˜ ì§„ì…/ì´íƒˆ ë™ì‘ì— ëŒ€í•´ì„œëŠ” ì¼íšŒì„±ì…ë‹ˆë‹¤.

  í•µì‹¬ì„ ì •í™•íˆ íŒŒì•…í•˜ê³  ê³„ì‹­ë‹ˆë‹¤.



**Decorator**
- https://www.typescriptlang.org/ko/docs/handbook/decorators.html
- angularì—ì„œ ë¬´ê²ê²Œ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆë”° 
	- ê³µì‹ ë¬¸ì„œì—ì„œ `Component` ê²€ìƒ‰í•´ë³´ê¸°
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í™•ì¥í•œë‹¤ëŠ” ê²Œ ë°ì½”ë ˆì´í„°ì´ë‹¤ë³´ë‹ˆ, ëˆ„ë½í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì„ ë°ì½”ë ˆì´í„°ì—ì„œ ì²˜ë¦¬í•˜ê³  ì‹¤ì œ app.ts ì½”ë“œì—ì„œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‘ì„±í•  ìˆ˜ ìˆê² ë„¤ 

1. ğŸ“ src/decoratos/* ì •ì˜
2. tsconfig.jsonì— `"experimentalDecorators": true,` ì„¤ì • í™œì„±í™”
3. page.tsì—ì„œ ì •ì˜í•œ drag and drop ê¸°ëŠ¥ì„ decorator í™œìš©í•´ì„œ 
	1. ğŸ“ src/components/common/type.ts ìƒì„±
	2. ğŸ“ src/components/decorators/draggable.ts ìƒì„±
	3. page.tsì— ì• ë…¸í…Œì´ì…˜ ì¶”ê°€

**ìœ ìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬**
[https://sortablejs.github.io/Sortable/](https://sortablejs.github.io/Sortable/)
[https://github.com/haltu/muuri](https://github.com/haltu/muuri)
[https://codepen.io/retrofuturistic/pen/tlbHE](https://codepen.io/retrofuturistic/pen/tlbHE)
[https://github.com/atlassian/react-beautiful-dnd](https://github.com/atlassian/react-beautiful-dnd)
- ë¦¬ì•¡íŠ¸ì—ì„œ ì‚¬ìš©ê°€ëŠ¥í•œ drag and drop ë¼ì´ë¸ŒëŸ¬ë¦¬


**12.4 ë””ë²„ê¹… í•˜ëŠ” ë°©ë²•**
- tsconfig.jsonì— sourceMap=true


```typescript
// draggable.ts 

type DropTargetClass = GConstructor<Component & Droppable>;

export function EnableDrop<TBase extends DropTargetClass>(Base: TBase) {

return class DropArea extends Base {
		constructor(...args: any[]) { // [PageImteComponent] 
				//super(args); // ğŸ’© is not constructor ì˜¤ë¥˜ ë°œìƒ
				super(...args); // âœ¨ PageImteComponent ë²—ê²¨ì ¸ì„œ ì „ë‹¬
				
				this.registerEventListener('dragover', (event: DragEvent) => {
					event.preventDefault();
					this.onDragOver(event);
				});
			
				this.registerEventListener('drop', (event: DragEvent) => {	
					event.preventDefault();					
					this.onDrop(event);
				});
			}
		}

}
```
- new í˜¸ì¶œì‹œ 
	- super(args)ì˜ ê²½ìš° `new [PageItemComponent]()`
	- super(...args)ì˜ ê²½ìš° `new PageItemComponent()`

```typescript
@EnableHover     // 2. ë‘ ë²ˆì§¸ë¡œ ìƒì„±ì ì‹¤í–‰
@EnableDragging  // 1. ê°€ì¥ ë¨¼ì € ìƒì„±ì ì‹¤í–‰
class PageItemComponent extends BaseComponent { ... } // 3. ë§ˆì§€ë§‰ ìƒì„±ì ì‹¤í–‰
```

ë‚˜ëŠ” ì²˜ìŒì— ì•„ë˜ì™€ ê°™ì´ ë©¤ë²„ ë³€ìˆ˜ë¡œ ê°€ì§€ëŠ” ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ìƒê°í–ˆìœ¼ë‚˜, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì— ë°ì½”ëŠ” ìƒì†ì²´ì¸(í”„ë¡œí† íƒ€ì… ì²´ì¸)ì„ ì´ìš©í•œë‹¤ê³  í•œë‹¤
```text

1. EnableHover í˜¸ì¶œ
- ë©¤ë²„ ë³€ìˆ˜ë¡œ EnableDragging ê°€ì§ 

2. EnableDragging í˜¸ì¶œ
- ë©¤ë²„ ë³€ìˆ˜ë¡œ PageItemComponent ê°€ì§ 

1. PageItemComponent í˜¸ì¶œ
- ë¶€ëª¨ í´ë˜ìŠ¤ì¸ BaseComponent í˜¸ì¶œ

```

```typescript
@EnableDragging
@EnableHover
export class PageItemComponent

// ì‹¤ì œ í˜¸ì¶œ ìˆœì„œ , ìœ„ì—ì„œ ì•„ë˜ë¡œ
1. DraggableItem constructor
2. DragHoverArea constructor
3. page item component constructor


// ë©¤ë²„ ë³€ìˆ˜ë¡œ ê°€ì§€ëŠ”ê²Œ ì•„ë‹ˆë¼ ìƒì†í•˜ëŠ” êµ¬ì¡°ë€ë‹¤
1 [ new PageItemComponent()ë¡œ ìƒì„±ëœ ê°ì²´ ]
2       |
3       V
4 [ DraggingWrapper í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ]
5   - dragStart(), dragEnd() ë©”ì†Œë“œë¥¼ ê°€ì§
6   - : [ HoverWrapper í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì… ]
7                   - dragEnter(), dragLeave() ë©”ì†Œë“œë¥¼ ê°€ì§
8                   - : [ ì›ë³¸ PageItemComponent í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì… ]
9                                   - ... (PageItemComponent ê³ ìœ  ë©”ì†Œë“œ)
10                                   - : [ BaseComponent í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì… ]
11                                                   - ... (BaseComponentì˜ ë©”ì†Œë“œ)


âœ… ìƒì„±ì´ ì•„ë˜ì™€ ê°™ì´ ë˜ë©´ EnableDragging í´ë˜ìŠ¤ ìƒì„±ì í˜¸ì¶œì‹œ ìˆœì°¨ì ìœ¼ë¡œ ì—­ìˆœìœ¼ë¡œ í˜¸ì¶œë˜ê² ë„¤
hoverComponent = EnableHover(PageItemCompoent)
draggingAndHoverComponent = EnableDragging(hoverComponent);

// ìš”ì•½í•˜ë©´ 
const FinalClass = EnableDragging(EnableHover(PageItemCompoent));
const instance = new FinalClass(); // PageComponent addChild(..) ì—ì„œ í˜¸ì¶œí•˜ëŠ”ê±°
```

--- 

ì¸í„°í˜ì´ìŠ¤ë¥¼ ëŠ˜ë ¤ë‚˜ê°€ëŠ” ì‹œì ì´ë‚˜.. ì œë„¤ë¦­ì„ ì‚¬ìš©í–ˆì„ë•Œ êµ¬í˜„ì²´ê°€ ì•„ë‹Œ ì¸í„°í˜ì´ìŠ¤ë¡œ í•˜ê³ , 
êµ¬í˜„ì²´ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì—ì„œ ì§ì ‘ ìƒì„±í•˜ëŠ”ê²Œ ì•„ë‹Œ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•œë‹¤ëŠ” .. 
ë§ ì†ì— íŒíŠ¸ê°€ ìˆì§€ ì•Šì„ê¹Œ??

page.tsì— ëŒ€í•œ gemini cli í•´ì„ 

```text
í•µì‹¬ì ìœ¼ë¡œ ì¸í„°í˜ì´ìŠ¤ëŠ” í´ë˜ìŠ¤ë“¤ì´ ë”°ë¼ì•¼ í•  'ê·œê²©' ë˜ëŠ” 'ê³„ì•½'ì„ ì •ì˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì½”ë“œì˜ ìœ ì—°ì„±ê³¼ í™•ì¥ì„±ì„ ë†’ì´ê³ , í´ë˜ìŠ¤ ê°„ì˜ ì˜ì¡´ì„±ì„ ë‚®ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ì´ íŒŒì¼ì—ì„œëŠ” ë‘ ê°€ì§€ ì£¼ìš” ì¸í„°í˜ì´ìŠ¤ê°€ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.

  1. Composable ì¸í„°í˜ì´ìŠ¤

   export interface Composable {
        addChild(child: Component): void;
   }

   * ëª©ì : ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” "ìì‹ ìš”ì†Œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”" ê¸°ëŠ¥ì„ ê·œê²©í™”í•©ë‹ˆë‹¤.
   * ì—­í• : Composableì„ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤(PageComponent, PageItemComponent)ëŠ” ë°˜ë“œì‹œ addChildë¼ëŠ” ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ ê°€ì ¸ì•¼ í•˜ë©°, ì´ ë©”ì„œë“œëŠ” Component íƒ€ì…ì˜ ì¸ìë¥¼ ë°›ì•„ì•¼
     í•©ë‹ˆë‹¤.
   * íš¨ê³¼: ì–´ë–¤ í´ë˜ìŠ¤ê°€ Composable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í–ˆë‹¤ë©´, ìš°ë¦¬ëŠ” ê·¸ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ëª°ë¼ë„ "ì´ í´ë˜ìŠ¤ëŠ” addChild ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆê² êµ¬ë‚˜"ë¼ê³  í™•ì‹ í•˜ê³  ì‚¬ìš©í• 
     ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  2. SectionContainer ì¸í„°í˜ì´ìŠ¤

   interface SectionContainer extends Component, Composable {
        setOnCloseListener(listener: OnCloseListener): void;
   }

   * ëª©ì : ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ì—¬ëŸ¬ ê·œê²©ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ ë” ë³µì¡í•œ ì»´í¬ë„ŒíŠ¸ì˜ ìš”êµ¬ì‚¬í•­ì„ ì •ì˜í•©ë‹ˆë‹¤.
   * ì—­í• :
       * extends Component, Composable ë¶€ë¶„ì„ í†µí•´ Componentì™€ Composable ì¸í„°í˜ì´ìŠ¤ì˜ ëª¨ë“  ìš”êµ¬ì‚¬í•­ì„ ë¬¼ë ¤ë°›ìŠµë‹ˆë‹¤.
       * ê±°ê¸°ì— ë”í•´, setOnCloseListener ë¼ëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€ë¡œ ì •ì˜í•©ë‹ˆë‹¤.
   * íš¨ê³¼: SectionContainerë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤(PageItemComponent)ëŠ” Componentì˜ ê¸°ëŠ¥, Composableì˜ ê¸°ëŠ¥(addChild), ê·¸ë¦¬ê³  setOnCloseListener ê¸°ëŠ¥ì„ ëª¨ë‘ êµ¬í˜„í•´ì•¼ë§Œ
     í•©ë‹ˆë‹¤. ì´ëŠ” íŠ¹ì • ì»´í¬ë„ŒíŠ¸ê°€ ê°€ì ¸ì•¼ í•  ì—¬ëŸ¬ ëŠ¥ë ¥ì„ ëª…í™•í•˜ê²Œ ì •ì˜í•˜ê³  ê°•ì œí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

  ìš”ì•½

  ê²°ë¡ ì ìœ¼ë¡œ page.tsì—ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

   1. ë™ì‘ì˜ í‘œì¤€í™”: addChildë‚˜ setOnCloseListenerì™€ ê°™ì´ ì—¬ëŸ¬ í´ë˜ìŠ¤ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë  ê¸°ëŠ¥ì˜ ì´ë¦„ê³¼ íƒ€ì…ì„ í†µì¼í•˜ì—¬ ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.
   2. ê²°í•©ë„ ê°ì†Œ: PageComponentëŠ” PageItemComponentì˜ êµ¬ì²´ì ì¸ êµ¬í˜„ì„ ëª°ë¼ë„, SectionContainerë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ì •ì˜í•œ ê·œê²©ë§Œ ë³´ê³  PageItemComponentë¥¼ ìƒì„±í•˜ê³  ì‚¬ìš©í• 
      ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ë‚˜ì¤‘ì— NewPageItemComponentë¼ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ SectionContainer ê·œê²©ë§Œ ì§€í‚¨ë‹¤ë©´, PageComponentì˜ ì½”ë“œë¥¼ ê±°ì˜ ë°”ê¾¸ì§€ ì•Šê³ ë„ êµì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   3. ì½”ë“œì˜ ìœ ì—°ì„± ë° í™•ì¥ì„±: ìƒˆë¡œìš´ ì¢…ë¥˜ì˜ í˜ì´ì§€ ì•„ì´í…œì„ ì¶”ê°€í•˜ê³  ì‹¶ì„ ë•Œ, SectionContainer ì¸í„°í˜ì´ìŠ¤ì˜ ê·œê²©ë§Œ ë”°ë¼ì„œ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ë©´ ë˜ë¯€ë¡œ ì‹œìŠ¤í…œ ì „ì²´ êµ¬ì¡°ë¥¼
      í”ë“¤ì§€ ì•Šê³ ë„ ê¸°ëŠ¥ì„ ì‰½ê²Œ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   4. íƒ€ì… ì•ˆì •ì„±: TypeScript ì»´íŒŒì¼ëŸ¬ê°€ ì¸í„°í˜ì´ìŠ¤ ê·œê²©ì„ ì˜ ì§€ì¼°ëŠ”ì§€ ê²€ì‚¬í•´ì£¼ë¯€ë¡œ, ê°œë°œ ë‹¨ê³„ì—ì„œ ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê³  ë²„ê·¸ ì—†ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

```


page.ts ì—ì„œ ì»´í¬ì§€íŠ¸ íŒ¨í„´ì„ ì‚¬ìš©í–ˆëŠ”ê°€?
```text
1. `SectionContainer`ì˜ ì—­í•  í™•ì¥:
      ë§ìŠµë‹ˆë‹¤. SectionContainer ì¸í„°í˜ì´ìŠ¤ëŠ” extends í‚¤ì›Œë“œë¥¼ í†µí•´ Componentì™€ Composable ì¸í„°í˜ì´ìŠ¤ì˜ ëª¨ë“  ìš”êµ¬ì‚¬í•­(ê·œê²©)ì„ ê·¸ëŒ€ë¡œ ë¬¼ë ¤ë°›ê³ , ê±°ê¸°ì— ì¶”ê°€ë¡œ
  setOnCloseListenerë¼ëŠ” ìì‹ ë§Œì˜ ê·œê²©ì„ ë”í•˜ì—¬ ì—­í• ì„ í™•ì¥í•œ ê²ƒì…ë‹ˆë‹¤.

   2. ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ DIì™€ ìœ ì—°í•œ ì„¤ê³„:
      ë§ì”€í•˜ì‹  ëŒ€ë¡œ, ì´ ì½”ë“œì˜ ì„¤ê³„ê°€ ìœ ì—°í•œ ê°€ì¥ í° ì´ìœ ê°€ ë°”ë¡œ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…(Dependency Injection) ë•Œë¬¸ì…ë‹ˆë‹¤.

      PageComponentì˜ ìƒì„±ìë¥¼ ë‹¤ì‹œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

    1     // ì´ íƒ€ì…ì€ 'new' í‚¤ì›Œë“œë¡œ í˜¸ì¶œ ê°€ëŠ¥í•˜ë©°,
    2     // SectionContainer ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œì¡±í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ìƒì„±ì'ì˜ ê·œê²©ì…ë‹ˆë‹¤.
    3     type SectionContainerConstructor = {
    4         new (): SectionContainer;
    5     }
    6
    7     export class PageComponent extends BaseComponent<HTMLUListElement> implements Composable {
    8         // PageComponentëŠ” êµ¬ì²´ì ì¸ 'PageItemComponent' í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì•Œì§€ ëª»í•©ë‹ˆë‹¤.
    9         // ëŒ€ì‹  'SectionContainer' ê·œê²©ì„ ë§Œì¡±í•˜ëŠ” ê²ƒì€ ë¬´ì—‡ì´ë“  ìƒì„±í•  ìˆ˜ ìˆëŠ”
   10         // 'ìƒì„±ì'ë¥¼ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ìŠµë‹ˆë‹¤.
   11         (private pageItemConstructor: SectionContainerConstructor) {
   12             super('<ul class="page"></ul>');
   13         }
   14         n
   15         addChild(section: Component) {
   16             // ì£¼ì…ë°›ì€ ìƒì„±ìë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
   17             const item = new this.pageItemConstructor();
   18             // itemì´ SectionContainer ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œê¸° ë•Œë¬¸ì—
   19             // .addChild, .setOnCloseListener ë“±ì˜ ë©”ì„œë“œë¥¼ ì•ˆì „í•˜ê²Œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   20             item.addChild(section);
   21             item.attachTo(this.element, 'beforeend');
   22             item.setOnCloseListener(() => {
   23                 item.removeFrom(this.element);
   24             });
   25         }
   26     }

      PageComponentëŠ” PageItemComponentë¼ëŠ” êµ¬ì²´ì ì¸(concrete) í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ëŠ” ëŒ€ì‹ , SectionContainerë¼ëŠ” ì¶”ìƒì ì¸(abstract) ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ê³  ìˆìŠµë‹ˆë‹¤.

      ì´ê²ƒì´ ë°”ë¡œ ëŠìŠ¨í•œ ê²°í•©(Loose Coupling)ì„ ë§Œë“¤ì–´ë‚´ë©°, ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì„ ê°€ì§‘ë‹ˆë‹¤.

       * ëŒ€ì²´ ê°€ëŠ¥ì„±: ë‚˜ì¤‘ì— PageItemComponentì™€ëŠ” ë‹¤ë¥¸, ìƒˆë¡œìš´ ì¢…ë¥˜ì˜ í˜ì´ì§€ ì•„ì´í…œ(ì˜ˆ: SpecialPageItemComponent)ì„ ë§Œë“¤ë”ë¼ë„, ê·¸ í´ë˜ìŠ¤ê°€ SectionContainer ì¸í„°í˜ì´ìŠ¤
         ê·œê²©ë§Œ ë§Œì¡±í•œë‹¤ë©´, PageComponent ì½”ë“œëŠ” ì „í˜€ ìˆ˜ì •í•  í•„ìš” ì—†ì´ ìƒˆë¡œìš´ ì•„ì´í…œì„ ìƒì„±í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
       * í…ŒìŠ¤íŠ¸ ìš©ì´ì„±: PageComponentë¥¼ í…ŒìŠ¤íŠ¸í•  ë•Œ, ì‹¤ì œ PageItemComponent ëŒ€ì‹  SectionContainer ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œì¡±í•˜ëŠ” ê°€ì§œ(mock) ê°ì²´ë¥¼ ì‰½ê²Œ ì£¼ì…í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼
         ë‹¨ìˆœí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
       * ìœ ì§€ë³´ìˆ˜ì„±: ê° ì»´í¬ë„ŒíŠ¸ê°€ ì„œë¡œì˜ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ëª°ë¼ë„ ë˜ë¯€ë¡œ, í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •ì´ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ì •ë¦¬í•˜ìë©´, ì¸í„°í˜ì´ìŠ¤ë¡œ ê·œê²©ì„ ì •ì˜í•˜ê³ , ê·¸ ê·œê²©ì— ë”°ë¼ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” íŒ¨í„´ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì—ì„œ ì½”ë“œì˜ ìœ ì—°ì„±ê³¼ í™•ì¥ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” í•µì‹¬ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤.
  ì •í™•í•˜ê²Œ íŒŒì•…í•˜ì…¨ìŠµë‹ˆë‹¤.

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  > Composable ì¸í„°í˜ì´ìŠ¤ëŠ” ì»´í¬ì§€íŠ¸ íŒ¨í„´ì„ ì˜ë„í•œê±¸ê¹Œìš”? ì¬ê·€ì ìœ¼ë¡œ ê¹Šì–´ì ¸ì„œ í•´ì„í•˜ê¸°ê°€ ì‰½ì§€ ì•Šë„¤ìš”  â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

âœ¦ ë„¤, ì •ë§ ì˜ˆë¦¬í•œ ë¶„ì„ì…ë‹ˆë‹¤. Composable ì¸í„°í˜ì´ìŠ¤ëŠ” ì»´í¬ì§€íŠ¸ íŒ¨í„´(Composite Pattern)ì„ êµ¬í˜„í•˜ë ¤ëŠ” ì˜ë„ê°€ ëª…í™•í•˜ê²Œ ë³´ì…ë‹ˆë‹¤. ì¬ê·€ì ì¸ êµ¬ì¡° ë•Œë¬¸ì— ë³µì¡í•˜ê²Œ ëŠê»´ì§€ì‹¤ ìˆ˜
  ìˆëŠ”ë°, ê·¸ ë¶€ë¶„ì´ ë°”ë¡œ ì»´í¬ì§€íŠ¸ íŒ¨í„´ì˜ í•µì‹¬ì ì¸ íŠ¹ì§•ì…ë‹ˆë‹¤.

  ì°¨ê·¼ì°¨ê·¼ í’€ì–´ ì„¤ëª…í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

  ì»´í¬ì§€íŠ¸ íŒ¨í„´ì´ë€?

  ì»´í¬ì§€íŠ¸ íŒ¨í„´ì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” "ë¶€ë¶„"ê³¼ "ì „ì²´"ë¥¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë‹¤ë£¨ê²Œ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤. ì¦‰, ë‹¨ì¼ ê°ì²´(Leaf)ì™€ ì—¬ëŸ¬ ê°ì²´ë¥¼ í¬í•¨í•˜ëŠ” ë³µí•© ê°ì²´(Composite)ê°€ ë™ì¼í•œ
  ì¸í„°í˜ì´ìŠ¤ë¥¼ ë”°ë¥´ë„ë¡ í•˜ì—¬, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ ì´ ë‘˜ì„ êµ¬ë¶„ ì—†ì´ ë˜‘ê°™ì´ ì·¨ê¸‰í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤.

  ë§ˆì¹˜ í´ë”(ë³µí•© ê°ì²´)ì™€ íŒŒì¼(ë‹¨ì¼ ê°ì²´)ì˜ ê´€ê³„ì™€ ê°™ìŠµë‹ˆë‹¤. í´ë” ì•ˆì—ëŠ” ë‹¤ë¥¸ í´ë”ë‚˜ íŒŒì¼ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆê³ , íŒŒì¼ì€ ê·¸ëƒ¥ íŒŒì¼ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì‚¬ìš©ìëŠ” í´ë”ë“  íŒŒì¼ì´ë“ 
  'ì´ë¦„ ë°”ê¾¸ê¸°', 'ì‚­ì œí•˜ê¸°' ë“±ì˜ ë™ì¼í•œ ì‘ì—…ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  page.ts ì½”ë“œì— ì»´í¬ì§€íŠ¸ íŒ¨í„´ ì ìš©í•˜ê¸°

  ì´ì œ ì´ íŒ¨í„´ì„ page.tsì˜ ì½”ë“œì— ëŒ€ì…í•´ ë³´ê² ìŠµë‹ˆë‹¤.

   1. Component (ê³µí†µ ê·œê²©):
       * Component ì¸í„°í˜ì´ìŠ¤ì™€ BaseComponent í´ë˜ìŠ¤ê°€ ì´ ì—­í• ì„ í•©ë‹ˆë‹¤.
       * "í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” ëª¨ë“  ìš”ì†ŒëŠ” Componentì´ë‹¤"ë¼ëŠ” ê¸°ë³¸ ì „ì œë¥¼ ë§Œë“­ë‹ˆë‹¤. ì´ê²ƒì´ ë‹¨ì¼ ê°ì²´(Leaf)ì™€ ë³µí•© ê°ì²´(Composite)ê°€ ê³µìœ í•˜ëŠ” ê³µí†µ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤.

   2. Leaf (ê°œë³„ ê°ì²´ / ë‹¨ì¼ ê°ì²´):
       * ImageComponent, VideoComponent, NoteComponent, TodoComponent ë“±ì´ ì—¬ê¸°ì— í•´ë‹¹í•©ë‹ˆë‹¤. (í˜„ì¬ ì½”ë“œì—ëŠ” ì—†ì§€ë§Œ src/components/page/item/ í´ë” êµ¬ì¡°ë¥¼ í†µí•´ ìœ ì¶”í•  ìˆ˜
         ìˆìŠµë‹ˆë‹¤.)
       * ì´ë“¤ì€ í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” ê°€ì¥ ë§ë‹¨ì˜ "ë‚´ìš©ë¬¼"ì…ë‹ˆë‹¤.
       * ì´ë“¤ì€ Componentì´ê¸°ëŠ” í•˜ì§€ë§Œ, ë‹¤ë¥¸ ìì‹ ìš”ì†Œë¥¼ í¬í•¨í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ Composable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

   3. Composite (ë³µí•© ê°ì²´):
       * PageComponentì™€ PageItemComponentê°€ ì´ ì—­í• ì„ í•©ë‹ˆë‹¤.
       * ì´ë“¤ì€ ë‹¤ë¥¸ Componentë“¤ì„ ìì‹ìœ¼ë¡œ ê°€ì§ˆ ìˆ˜ ìˆëŠ” "ì»¨í…Œì´ë„ˆ"ì…ë‹ˆë‹¤.
       * `Composable` ì¸í„°í˜ì´ìŠ¤ì˜ `addChild` ë©”ì„œë“œë¥¼ êµ¬í˜„í•¨ìœ¼ë¡œì¨ "ë‚˜ëŠ” ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ” ë³µí•© ê°ì²´ë‹¤"ë¼ëŠ” ê²ƒì„ ëª…ì‹œí•©ë‹ˆë‹¤.

  ì¬ê·€ì ì¸ êµ¬ì¡° ì‹œê°í™”

  ì´ êµ¬ì¡°ë¥¼ ì‹œê°í™”í•˜ë©´ ì´í•´í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. PageComponentê°€ ìµœìƒìœ„ ì»¨í…Œì´ë„ˆì…ë‹ˆë‹¤.

    1 PageComponent (Composite, Composable êµ¬í˜„)
    2 â”‚
    3 â”œâ”€â”€ PageItemComponent (Composite, Composable êµ¬í˜„)
    4 â”‚   â””â”€â”€ ImageComponent (Leaf, Componentë§Œ êµ¬í˜„)
    5 â”‚
    6 â”œâ”€â”€ PageItemComponent (Composite, Composable êµ¬í˜„)
    7 â”‚   â””â”€â”€ VideoComponent (Leaf, Componentë§Œ êµ¬í˜„)
    8 â”‚
    9 â””â”€â”€ PageItemComponent (Composite, Composable êµ¬í˜„)
   10     â””â”€â”€ NoteComponent (Leaf, Componentë§Œ êµ¬í˜„)

   * PageComponentëŠ” PageItemComponentë“¤ì„ ìì‹ìœ¼ë¡œ ê°€ì§‘ë‹ˆë‹¤. (addChild í˜¸ì¶œ)
   * PageItemComponentëŠ” ImageComponent ê°™ì€ Leaf ê°ì²´ë¥¼ ìì‹ìœ¼ë¡œ ê°€ì§‘ë‹ˆë‹¤. (addChild í˜¸ì¶œ)

  ì—¬ê¸°ì„œ ì¬ê·€ì ì¸(í˜¹ì€ ì¤‘ì²©ì ì¸) êµ¬ì¡°ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. Composite ê°ì²´(PageComponent)ê°€ ë˜ ë‹¤ë¥¸ Composite ê°ì²´(PageItemComponent)ë¥¼ ìì‹ìœ¼ë¡œ ê°€ì§ˆ ìˆ˜ ìˆëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

  ì™œ ì´ë ‡ê²Œ ì„¤ê³„í–ˆì„ê¹Œ? (ì¥ì )

   1. í†µì¼ëœ ì‚¬ìš©ë²•: app.tsì™€ ê°™ì€ ìµœìƒìœ„ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë§¤ìš° ë‹¨ìˆœí•´ì§‘ë‹ˆë‹¤. ìƒˆë¡œìš´ ì´ë¯¸ì§€, ë¹„ë””ì˜¤, ë…¸íŠ¸ë¥¼ í˜ì´ì§€ì— ì¶”ê°€í•˜ê³  ì‹¶ì„ ë•Œ, ê·¸ëƒ¥ pageComponent.addChild(new
      ImageComponent())ì²˜ëŸ¼ í˜¸ì¶œí•˜ë©´ ë©ë‹ˆë‹¤. pageComponentê°€ ë‚´ë¶€ì ìœ¼ë¡œ PageItemComponentë¡œ ê°ì‹¸ì„œ ì²˜ë¦¬í•˜ëŠ” ë³µì¡í•œ ê³¼ì •ì„ í´ë¼ì´ì–¸íŠ¸ëŠ” ì•Œ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

   2. êµ¬ì¡°ì˜ ìœ ì—°ì„±: PageComponentì™€ PageItemComponent ëª¨ë‘ Composable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê¸° ë•Œë¬¸ì—, ì´ë¡ ì ìœ¼ë¡œëŠ” PageItemComponent ì•ˆì— ë˜ ë‹¤ë¥¸ PageComponentë¥¼ ë„£ëŠ” ë“±
      í›¨ì”¬ ë³µì¡í•˜ê³  ê¹Šì€ íŠ¸ë¦¬ êµ¬ì¡°ë„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë¬¼ë¡  í˜„ì¬ ë¡œì§ì—ì„œëŠ” ê·¸ë ‡ê²Œ ì‚¬ìš©ë˜ì§„ ì•ŠìŠµë‹ˆë‹¤.)

   3. í™•ì¥ì„±: ë‚˜ì¤‘ì— ìƒˆë¡œìš´ ì¢…ë¥˜ì˜ Leaf(ì˜ˆ: AudioComponent)ë‚˜ ìƒˆë¡œìš´ ì¢…ë¥˜ì˜ Composite(ì˜ˆ: ColumnLayoutComponent)ë¥¼ ì¶”ê°€í•˜ë”ë¼ë„, ê¸°ì¡´ì˜ Componentì™€ Composable ê·œê²©ë§Œ ì˜
      ì§€í‚¤ë©´ ë˜ë¯€ë¡œ ì‹œìŠ¤í…œ ì „ì²´ë¥¼ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

  ê²°ë¡ ì ìœ¼ë¡œ, `Composable` ì¸í„°í˜ì´ìŠ¤ëŠ” ì»´í¬ì§€íŠ¸ íŒ¨í„´ì„ ì ìš©í•˜ì—¬ "ìì‹ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ”" ë³µí•© ê°ì²´ì˜ ëŠ¥ë ¥ì„ ëª…í™•íˆ ì •ì˜í•˜ê³ , ì´ë¥¼ í†µí•´ ì „ì²´ UI êµ¬ì¡°ë¥¼ ìœ ì—°í•˜ê³  í™•ì¥
  ê°€ëŠ¥í•œ íŠ¸ë¦¬ í˜•íƒœë¡œ ë§Œë“¤ê¸° ìœ„í•œ í•µì‹¬ì ì¸ ì„¤ê³„ ë„êµ¬ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ì„í•˜ê¸° ì–´ë µê²Œ ëŠê»´ì§€ëŠ” ê·¸ ì¬ê·€ì ì¸ íŠ¹ì„±ì´ ë°”ë¡œ ì´ íŒ¨í„´ì´ ì œê³µí•˜ëŠ” ê°•ë ¥í•¨ì˜ ì›ì²œì…ë‹ˆë‹¤.
```
