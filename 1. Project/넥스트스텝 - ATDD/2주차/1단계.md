
 TODO.md 내용을 확인했습니다. 제시된 5개의 기능 후보에 대해 각각 코드 레벨의 문제점과 인수 테스트 구현 난이도를 분석해 드리겠습니다.

✦ 코드 분석이 완료되었습니다. 결과를 바탕으로 각 기능 후보의 문제점과 테스트 구현 난이도를 알려드립니다.

  **전체적인 공통 문제점**
  분석 결과, 대부분의 컨트롤러에서 다음과 같은 구조적인 문제점들이 공통적으로 발견되었습니다.
   * 서비스 계층(Service Layer) 부재: 컨트롤러가 비즈니스 로직 처리 없이 리포지토리(Repository)를 직접 호출하고 있습니다.
   * 안전하지 않은 요청 처리: 요청 본문(Request Body)을 DTO(Data Transfer Object) 대신 Map<String, Object>으로 받아 처리하고 있어, 타입 에러나 Null 값 처리에 매우 취약합니다.
   * 부족한 유효성 검증: 입력값에 대한 유효성 검증(validation)이 거의 없어 잘못된 데이터가 저장될 위험이 높습니다.

  **기능 후보별 분석 결과**
  1. 예약 목록 조회 (GET `/admin/reservations`)
	   * 관련 파일: `ReservationAdminController.java`, `ReservationRepository.java`
	   * 현재 상태 및 문제점:
	       * 단순히 DB의 모든 예약을 조회해서 반환하는 기능입니다.
	       * 서비스 계층이 없고, 엔티티 객체를 그대로 반환하여 불필요한 데이터가 노출될 수 있습니다.
	   * 테스트 구현 난이도: 하
	       * 선정 이유: 기능이 매우 단순하고 다른 데이터에 대한 의존성이 적습니다. DB에 테스트용 예약 데이터 몇 개를 넣고, API 호출 시 데이터가 정상적으로 반환되는지만 확인하면 되므로 첫
	         인수 테스트로 구현하기에 가장 쉽고 위험 부담이 적습니다.

  2. 예약 상태 변경 (PATCH `/admin/reservations/{id}/status`)
	   * 관련 파일: `ReservationAdminController.java`, `Reservation.java`
	   * 현재 상태 및 문제점:
	       * Reservation 엔티티의 status 필드가 Enum이 아닌 String 타입이라 "CANCELLED" 대신 오타가 들어가도 막을 방법이 없습니다. 데이터 무결성을 해칠 위험이 매우 큽니다.
	       * 요청으로 들어온 상태 값이 유효한 값인지 검증하는 로직이 전혀 없습니다.
	   * 테스트 구현 난이도: 하
	       * 선정 이유: 테스트 자체는 예약을 생성하고 API로 상태를 변경한 뒤 DB를 확인하면 되므로 간단합니다. 특히, 상태 값을 Enum으로 변경하고 유효성 검증 로직을 추가하는 등 코드를
	         개선하는 작업을 병행한다면 프로젝트의 안정성을 높이는 좋은 시작점이 될 수 있습니다.

  3. 상품 생성 (POST `/admin/products`)
	   * 관련 파일: `ProductAdminController.java`, `Product.java`
	   * 현재 상태 및 문제점:
	       * 앞서 언급된 공통 문제점(서비스 계층 부재, Map 사용)이 가장 두드러집니다.
	       * 상품명(name) 중복이나 가격(price)/재고(stock)의 음수 값 등 비즈니스 규칙에 대한 검증이 전혀 없습니다.
	   * 테스트 구현 난이도: 하
	       * 선정 이유: Happy Path 테스트(정상적인 생성) 자체는 간단합니다. 하지만 근본적인 문제를 해결하려면 DTO를 도입하고 유효성 검증 로직을 추가하는 리팩토링이 필요합니다.

  4. 캠프사이트 생성 (POST `/admin/campsites`)
	   * 관련 파일: `CampsiteAdminController.java, Campsite.java`
	   * 현재 상태 및 문제점:
	       * 상품 생성과 동일한 구조적 문제를 가지고 있습니다.
	       * 캠프사이트 번호(siteNumber)처럼 고유해야 할 값에 대한 중복 검사 로직이 없습니다.
	   * 테스트 구현 난이도: 하
	       * 선정 이유: 상품 생성과 마찬가지로 정상적인 생성 케이스에 대한 테스트는 쉽습니다.

  5. 대여 생성 (POST `/admin/rentals`)
	   * 관련 파일: `RentalAdminController.java`
	   * 현재 상태 및 문제점:
	       * (분석이 중간에 중단되어 이 기능의 상세 분석은 누락되었습니다.)
	       * 하지만 다른 기능들과 유사하게 서비스 계층 부재, Map 사용, 유효성 검증 부족 등의 문제를 동일하게 가지고 있을 것으로 강하게 추정됩니다.
	   * 테스트 구현 난이도: 중 (예상)
	       * 선정 이유: '대여'는 예약, 고객, 상품 등 다른 여러 데이터와 관계를 맺고 있을 가능성이 높습니다. 따라서 다른 기능에 비해 테스트 데이터를 준비하는 과정이 좀 더 복잡할 수 있습니다.

  **결론 및 추천**

  어떤 기능을 선택해도 테스트 코드 구현 자체의 난이도는 높지 않습니다. 다만, 프로젝트의 안정성을 확보하고 테스트의 가치를 높이기 위한 관점에서 추천 순서는 다음과 같습니다.

   6. 추천 1순위: `예약 목록 조회`
       * 가장 간단하여 Cucumber와 테스트 환경 설정에만 집중할 수 있습니다. 위험 부담 없이 첫 안전벨트를 만들기에 최적입니다.
   7. 추천 2순위: `예약 상태 변경`
       * 테스트 구현은 간단하지만, String 타입을 Enum으로 리팩토링하는 의미 있는 개선을 함께 진행할 수 있어 좋은 후보입니다.

  어떤 기능으로 진행하시겠습니까? 선택해 주시면 해당 기능에 대한 Gherkin 시나리오 작성을 도와드리겠습니다.