
## ìš”êµ¬ì‚¬í•­

### 1. ë ˆê±°ì‹œ ì½”ë“œ ë¦¬íŒ©í„°ë§

- **í…ŒìŠ¤íŠ¸ ì‹¤í–‰:**Â Step 2ì—ì„œ ì™„ì„±í•œ ì „ì²´ ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ ëª¨ë‘ ë…¹ìƒ‰ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.
- **ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë¦¬íŒ©í„°ë§:**Â ê³„ì¸µê³¼ ê°ì²´ì˜ ì±…ì„ê³¼ ì—­í• ì„ ê¸°ë°˜ìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ì€ ì½”ë“œë¡œ ë¦¬íŒ©í„°ë§í•©ë‹ˆë‹¤.
- **í…ŒìŠ¤íŠ¸ ë³´ì¶©:**Â ê¸°ì¡´ ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ê°€ ë¦¬íŒ©í„°ë§ í•  ì½”ë“œë¥¼ ì¶©ë¶„íˆ ê²€ì¦í•˜ì§€ ëª»í•˜ê³  ìˆëŠ” ê²½ìš° í…ŒìŠ¤íŠ¸ë¥¼ ë³´ì¶©í•©ë‹ˆë‹¤. ì´ ë•Œ Step 2ì—ì„œ ì§„í–‰í•œ êµ¬ì¡°í™”ëœ í…ŒìŠ¤íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.

### 2. ì‹ ê·œ ê¸°ëŠ¥ ë¹ ë¥´ê²Œ ê°œë°œí•˜ê¸°

1. **ì‹ ê·œ ê¸°ëŠ¥ ì„¤ê³„:**Â ê¸°ì¡´ ê¸°ëŠ¥ë“¤ ì¤‘ì— ë³´ì™„í•˜ë©´ ì¢‹ì„ ë¶€ë¶„ì„ ì°¾ìŠµë‹ˆë‹¤. (AIì˜ ë„ì›€ì„ ë°›ì•„ë„ ì¢‹ì•„ìš” ğŸ¤–)
2. **ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ ì¡°ë¦½:**Â featureíŒŒì¼ì— ì‹ ê·œ ê¸°ëŠ¥ì— ëŒ€í•œ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‘ì„±í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.
3. **í•µì‹¬:**Â ëª¨ë“  ë‚´ìš©ì„ ìƒˆë¡œ ë§Œë“¤ê¸°ë³´ë‹¤ Step 2ì—ì„œ êµ¬ì¶•í•œ ê²ƒì„Â **ì¬í™œìš©**í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì¡°ë¦½í•˜ì„¸ìš”.

### 3. ê²½í—˜ ê³µìœ í•˜ê¸°

- ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ë¦¬íŒ©í„°ë§ì„ í•˜ë©´ì„œ ì–´ë–¤ ì ì„ ì²´ê°í–ˆëŠ”ì§€ ì‘ì„±í•˜ê¸°
- ë¦¬íŒ©í„°ë§ ê³¼ì •ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜ì •í–ˆëŠ”ì§€, í–ˆë‹¤ë©´ ì™œ í–ˆëŠ”ì§€ë¥¼ ì‘ì„±í•˜ê¸°
- AI ë„êµ¬ë¥¼ í™œìš©í•˜ëŠ” ê²½ìš° ë°©ë²•ê³¼ ëŠë‚€ì ì„ ì‘ì„±í•˜ê¸°

## ì²´í¬í¬ì¸íŠ¸

- [ ] ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ì˜ ìŠ¤íŒŒê²Œí‹° ë¡œì§ì´ ì„œë¹„ìŠ¤ ê³„ì¸µìœ¼ë¡œ ì´ê´€ë˜ì—ˆëŠ”ê°€?
- [ ] ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë¦¬íŒ©í„°ë§ í›„ì—ë„ ëª¨ë“  ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ëŠ”ê°€?
- [ ] ì‹ ê·œ ê¸°ëŠ¥ì˜ ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ê°€ ëª¨ë‘ êµ¬í˜„ë˜ì—ˆëŠ”ê°€?
- [ ] ì‹ ê·œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‘ì„± ì‹œ, ê¸°ì¡´ Step Definitionì„ ì¬í™œìš©í–ˆëŠ”ê°€?

---

### ê¸€ë¡œë²Œ ì˜ˆì™¸ ì²˜ë¦¬ 

6ë…„ ì°¨ ê°œë°œìì˜ ì‹œê°ì—ì„œ ì´ íŒ¨í‚¤ì§€ êµ¬ì¡° ê³ ë¯¼ì€ **'ë„ë©”ì¸ ê²½ê³„'**ì™€ **'ê³µí†µ ê´€ì‹¬ì‚¬'**ë¥¼ ì–´ë–»ê²Œ ë¶„ë¦¬í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ì•„ì£¼ ì¢‹ì€ ê³ ë¯¼ì…ë‹ˆë‹¤.

ê²°ë¡ ë¶€í„° ë§ì”€ë“œë¦¬ë©´, **`handler`ê°€ `exception`ì˜ í•˜ìœ„ íŒ¨í‚¤ì§€ì— ìˆëŠ” êµ¬ì¡°ëŠ” ìŠ¤í”„ë§ì—ì„œ ë§¤ìš° í”í•˜ê³  ìì—°ìŠ¤ëŸ¬ìš´ êµ¬ì¡°**ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ í”„ë¡œì íŠ¸ì˜ ì„±ê²©ì— ë”°ë¼ ë” ë‚˜ì€ ëŒ€ì•ˆì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒí™©ë³„ë¡œ ê°€ì´ë“œë¥¼ ë“œë¦´ê²Œìš”.

---

**1. í˜„ì¬ êµ¬ì¡° (í•˜ìœ„ íŒ¨í‚¤ì§€ ë°©ì‹) : "ì˜ˆì•½ ë„ë©”ì¸ ì „ìš©"**

ì‘ì„±í•˜ì‹  êµ¬ì¡°ëŠ” **"ì´ í•¸ë“¤ëŸ¬ëŠ” ì´ íŒ¨í‚¤ì§€ì— ì •ì˜ëœ ì˜ˆì™¸ë“¤ë§Œ ì „ë¬¸ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤"**ëŠ” ê°•í•œ ì‘ì§‘ë ¥ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

Plaintext

```
exception
â”œâ”€â”€ handler (íŒ¨í‚¤ì§€)
â”‚   â””â”€â”€ GlobalExceptionHandler.java
â””â”€â”€ CustomException.java
```

- **ì¥ì **: ì˜ˆì™¸ í´ë˜ìŠ¤ì™€ ê·¸ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” í•¸ë“¤ëŸ¬ê°€ ë¬¼ë¦¬ì ìœ¼ë¡œ ê°€ê¹Œì›Œ ì°¾ê¸° ì‰½ìŠµë‹ˆë‹¤.
    
- **ë‹¨ì **: ë‚˜ì¤‘ì— ë‹¤ë¥¸ ë„ë©”ì¸(ì˜ˆ: ìº í•‘ì¥, íšŒì›)ì´ ì¶”ê°€ë˜ì—ˆì„ ë•Œ, ì´ í•¸ë“¤ëŸ¬ê°€ 'ì „ì—­(Global)'ì¸ì§€ 'íŠ¹ì • ë„ë©”ì¸ìš©'ì¸ì§€ ëª¨í˜¸í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    

---

**2. ì¶”ì²œ ëŒ€ì•ˆ (ìˆ˜í‰ì  êµ¬ì„±) : "ì „ì—­ ê³µí†µ ì²˜ë¦¬ ë°©ì‹"**

ë§ì€ ì‹œë‹ˆì–´ ê°œë°œìë“¤ì´ ì„ í˜¸í•˜ëŠ” ë°©ì‹ì€ `handler`ì™€ `exception`ì„ **ë™ë“±í•œ ë ˆë²¨(Sibling)**ë¡œ ë‘ê±°ë‚˜, ì•„ì˜ˆ ê³µí†µ íŒ¨í‚¤ì§€ë¡œ ë¬¶ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

Plaintext

```
common (ë˜ëŠ” global)
â”œâ”€â”€ exception
â”‚   â”œâ”€â”€ CustomException.java
â”‚   â””â”€â”€ ReservationNotFoundException.java
â””â”€â”€ handler (ë˜ëŠ” advice)
    â””â”€â”€ GlobalExceptionHandler.java
```

- **ì¥ì **: ê³„ì¸µ êµ¬ì¡°ê°€ ëª…í™•í•©ë‹ˆë‹¤. `exception`ì€ **ë°ì´í„°(ì˜ˆì™¸ ê°ì²´)**ë¥¼, `handler`ëŠ” **ë¡œì§(ì²˜ë¦¬ í–‰ìœ„)**ì„ ë‹´ë‹¹í•˜ëŠ” í˜•ì œ ê´€ê³„ê°€ ë©ë‹ˆë‹¤.
    
- **êµ¬ì¡°ì  ì§ê´€ì„±**: "ì˜ˆì™¸ ìƒí™©ì´ í„°ì§€ë©´(`exception`), ì´ë¥¼ ê°€ë¡œì±„ì„œ ì²˜ë¦¬í•˜ëŠ” ê³³(`handler`)ì´ ì˜†ì— ìˆêµ¬ë‚˜"ë¼ê³  ì§ê´€ì ìœ¼ë¡œ ì´í•´ë©ë‹ˆë‹¤.
    

---

**3. íŒ¨í‚¤ì§€ ì„¤ê³„ì˜ í•µì‹¬ ê·œì¹™: "ì˜ì¡´ì„± ë°©í–¥"**

íŒ¨í‚¤ì§€ ê¹Šì´ë³´ë‹¤ ë” ì¤‘ìš”í•œ ê²ƒì€ **importì˜ ë°©í–¥**ì…ë‹ˆë‹¤.

1. **HandlerëŠ” Exceptionì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.** (ì˜ˆì™¸ë¥¼ ì¸ìë¡œ ë°›ì•„ì•¼ í•˜ë‹ˆê¹Œìš”.)
    
2. **Exceptionì€ Handlerë¥¼ ëª°ë¼ì•¼ í•©ë‹ˆë‹¤.**
    

ë§Œì•½ `handler`ê°€ `exception`ë³´ë‹¤ ìƒìœ„ì— ìˆê±°ë‚˜ ê°™ì€ ë ˆë²¨ì— ìˆë‹¤ë©´ ì˜ì¡´ì„±ì´ **`Handler -> Exception`**ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ íë¦…ë‹ˆë‹¤. í•˜ì§€ë§Œ `handler`ê°€ `exception`ì˜ ìì‹ íŒ¨í‚¤ì§€ë¼ë©´, ë¶€ëª¨ íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ë¥¼ ìì‹ì´ ì°¸ì¡°í•˜ê²Œ ë˜ëŠ”ë° ì´ê²ƒë„ ìŠ¤í”„ë§ì—ì„œëŠ” í—ˆìš©ë˜ëŠ” ë²”ìœ„ì…ë‹ˆë‹¤.

---

**ğŸ’¡ 6ë…„ ì°¨ì˜ ìµœì¢… ê¶Œì¥ì•ˆ**

ì§€ê¸ˆì€ ê³¼ì œ ë‹¨ê³„ì´ë¯€ë¡œ **ê°™ì€ ë ˆë²¨(ìˆ˜í‰ì  êµ¬ì¡°)** ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì„ ê°€ì¥ ì¶”ì²œí•©ë‹ˆë‹¤.

```
com.camping.admin
â””â”€â”€ exception
    â”œâ”€â”€ handler
    â”‚   â””â”€â”€ GlobalExceptionHandler.java  (ì—¬ê¸°ì— ë‘¬ë„ ë¬´ë°©!)
    â”œâ”€â”€ ReservationException.java
    â””â”€â”€ AlreadyCancelledException.java
```

ë§Œì•½ `handler`ê°€ `exception`ì˜ ë¶€ëª¨ê°€ ë˜ë©´, ë‚˜ì¤‘ì— ì˜ˆì™¸ í´ë˜ìŠ¤ê°€ 20~30ê°œë¡œ ëŠ˜ì–´ë‚¬ì„ ë•Œ í•¸ë“¤ëŸ¬ íŒŒì¼ì´ ì˜ˆì™¸ íŒŒì¼ë“¤ ì‚¬ì´ì— íŒŒë¬»í˜€ ì°¾ê¸° í˜ë“¤ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ **`exception`ì´ë¼ëŠ” í° ë°”êµ¬ë‹ˆ ì•ˆì— `handler`ë¼ëŠ” ì‘ì€ ì„œëì„ ë§Œë“œëŠ” ì§€ê¸ˆì˜ ë°©ì‹**ì´ ì˜¤íˆë ¤ ê´€ë¦¬ ë©´ì—ì„œëŠ” ë” í¸í•˜ì‹¤ ê±°ì˜ˆìš”.

---

**ë©”ëª¨**

ì˜ˆì•½ íŒ©í† ë¦¬ ë§Œë“¤ê¸° .. 

ìƒìˆ˜ Fixture

ë¦¬íŒ©í„°ë§ ê³¼ì •ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜ì •í–ˆë‹¤ë©´ ì™œ í–ˆëŠ”ì§€ 
- ì˜ˆì•½ ì¡°íšŒê°€ ì•ˆë¨
IllegalArgumentException (500)
ì˜ëª»ëœ ìš”ì²­ì´ë¼ì„œ 400 BAD Request


í•´ì¤˜ ë¼ê³  í•˜ëŠ”ê²Œ í¸í•˜ê¸´ í•˜ê² ì§€ë§Œ 

---

**ì œì•ˆ ê¸°ëŠ¥: ì˜ˆì•½ ìƒíƒœ ë³€ê²½ íë¦„(State Transition) ìœ íš¨ì„± ê²€ì‚¬**

  í˜„ì¬ APIëŠ” ì–´ë–¤ ìƒíƒœì—ì„œë“  ë‹¤ë¥¸ ìƒíƒœë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œëŠ” íŠ¹ì • ìƒíƒœ ë³€ê²½ íë¦„ì´ ì œí•œë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

   * `CANCELLED`(ì·¨ì†Œ)ëœ ì˜ˆì•½ì„ `CONFIRMED`(í™•ì •)ì´ë‚˜ `CHECKED_IN`(ì²´í¬ì¸) ìƒíƒœë¡œ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
   * `CHECKED_OUT`(ì²´í¬ì•„ì›ƒ)ëœ ì˜ˆì•½ì„ `PENDING`(ìŠ¹ì¸ëŒ€ê¸°) ìƒíƒœë¡œ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

  ì´ëŸ¬í•œ ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ì„ ì¶”ê°€í•˜ë©´ ì‹œìŠ¤í…œì˜ ë°ì´í„° ë¬´ê²°ì„±ì„ ë†’ì´ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì„ ì½”ë“œë¡œ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ê°€ ì´ëŸ° ì˜ˆì™¸ì ì¸ ê²½ìš°ë¥¼ ì•„ì§ ë‹¤ë£¨ì§€ ì•Šì•˜ë‹¤ë©´, ì´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸ì˜ ì•ˆì •ë§ì„ ê²½í—˜í•´ ë³´ê¸°ì— ë§¤ìš° ì í•©í•œ ì‹œë‚˜ë¦¬ì˜¤ì…ë‹ˆë‹¤.


**ì „í†µì ì¸ `switch` ë¬¸ (Waterfall ë°©ì‹)**
 ìš°ë¦¬ê°€ í”íˆ ì•„ëŠ” `case :` ë¬¸ë²•ì€ ëª…ì‹œì ìœ¼ë¡œ `break;`ë¥¼ ì ì–´ì£¼ì§€ ì•Šìœ¼ë©´, ë§¤ì¹­ëœ `case` ì•„ë˜ì˜ ëª¨ë“  ì½”ë“œë¥¼ í›‘ìœ¼ë©° ë‚´ë ¤ê°€ëŠ” **Waterfall(í­í¬ìˆ˜)** ë™ì‘ì„ í•©ë‹ˆë‹¤.
```java
switch (status) {
    case WAITING:
        System.out.println("ëŒ€ê¸°");
        // breakê°€ ì—†ìœ¼ë©´ ì•„ë˜ PENDING ì½”ë“œê¹Œì§€ ì‹¤í–‰ë¨!
    case PENDING:
        System.out.println("ìŠ¹ì¸ëŒ€ê¸°");
        break; 
}
```
- **ì¥ì **: ì—¬ëŸ¬ `case`ë¥¼ í•˜ë‚˜ë¡œ ë¬¶ì„ ë•Œ í¸ë¦¬í•©ë‹ˆë‹¤.
- **ë‹¨ì **: `break;` í•˜ë‚˜ë¥¼ ì‹¤ìˆ˜ë¡œ ë¹¼ë¨¹ìœ¼ë©´ ì¹˜ëª…ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë²„ê·¸(ì˜ˆ: ì·¨ì†Œëœ ì˜ˆì•½ì´ í™•ì •ë¨)ê°€ ë°œìƒí•©ë‹ˆë‹¤


**í˜„ëŒ€ì ì¸ `switch` í‘œí˜„ì‹ (Arrow ì—°ì‚°ì `->`)**
 `Java 14`ë¶€í„° ì •ì‹ ë„ì…ëœ ì´ ë°©ì‹ì€ **Waterfall í˜„ìƒì´ ì•„ì˜ˆ ì—†ìŠµë‹ˆë‹¤.** ë§¤ì¹­ëœ `case` í•˜ë‚˜ë§Œ ë”± ì‹¤í–‰í•˜ê³  ë°”ë¡œ ì¢…ë£Œë©ë‹ˆë‹¤.
```java
public boolean canTransitionTo(ReservationStatus nextStatus) {
    return switch (this) {
        case WAITING -> Set.of(PENDING, REJECTED, CANCELLED).contains(nextStatus);
        case PENDING -> Set.of(CONFIRMED, REJECTED, CANCELLED).contains(nextStatus);
        // breakê°€ ì—†ì–´ë„ ì—¬ê¸°ì„œ ì‹¤í–‰ í›„ ë°”ë¡œ ë¦¬í„´(ì¢…ë£Œ)ë©ë‹ˆë‹¤.
        default -> false;
    };
}
```